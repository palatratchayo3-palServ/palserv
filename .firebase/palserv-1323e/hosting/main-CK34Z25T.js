import{b as cf,c as uf,d as lf,e as ff,f as Es}from"./chunk-WK6C2C5Q.js";import{a as df}from"./chunk-6AMAIK7D.js";import{a as sf,b as vs,c as Xn,d as af,e as Is}from"./chunk-6KRVARI3.js";import{a as Hh,b as Kh,d as _s,e as ys,f as nn,g as rn,h as ef,i as tf,j as nf,k as rf,l as be,m as on}from"./chunk-7FFX5VN4.js";import{$a as of,B as Qh,C as Yh,Fb as Jn,Gb as hf,Hb as ht,i as tn,j as ms,k as gs,lb as sn,mb as dt,p as Wh,q as Gh,t as Ze}from"./chunk-C24EWEZB.js";import{$ as Yn,$a as Oh,Aa as kh,Ab as Qe,Ac as Dt,Bc as ri,Cb as Pt,Cc as ii,Db as xt,Ea as Ph,Eb as W,Fa as xh,Fb as y,Gb as b,H as Zr,Hb as D,Ib as F,Jb as U,Kb as pe,Lb as fs,Mb as ps,Ob as Ga,Rc as jh,Sb as nt,Sc as zh,Ta as Dh,Tb as Vh,Tc as Ya,U as Qn,Ub as de,Xa as x,Y as $a,Yb as Ha,Zb as Ka,_a as Nh,_b as Qa,a as An,ab as $e,b as Sn,bb as Lh,ca as ut,cc as ti,cd as Xh,d as Xt,db as Mh,dc as Fh,dd as Jh,e as v,ea as Me,fa as lt,fc as Uh,fd as Xa,gb as ee,gc as E,gd as Ja,h as Cn,ha as Sh,hc as Pe,hd as Zh,ia as ds,ic as ue,ja,ka as za,la as Jt,m as bh,ma as Zt,mb as en,n as Ah,na as Je,oa as Ch,pb as We,pc as Bh,q as Fa,qc as qh,r as Ua,rc as me,s as Ba,sc as $h,ta as Rh,va as hs,vc as ni,wa as ke,xb as Wa,y as qa,yb as Ke,zb as ei}from"./chunk-PCUFBTX4.js";var i1="@",s1=(()=>{class n{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=Me(Je);loadingSchedulerFn=Me(o1,{optional:!0});_engine;constructor(t,r,i,o,a){this.doc=t,this.delegate=r,this.zone=i,this.animationType=o,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-GIIIKZ7M.js").then(i=>i),r;return this.loadingSchedulerFn?r=this.loadingSchedulerFn(t):r=t(),r.catch(i=>{throw new $a(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:o})=>{this._engine=i(this.animationType,this.doc);let a=new o(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,r){let i=this.delegate.createRenderer(t,r);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let o=new Za(i);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let u=a.createRenderer(t,r);o.use(u),this.scheduler??=this.injector.get(Rh,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{o.use(i)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(t){this._engine?.flush(),this.delegate.componentReplaced?.(t)}static \u0275fac=function(r){Lh()};static \u0275prov=Yn({token:n,factory:n.\u0275fac})}return n})(),Za=class{delegate;replay=[];\u0275type=1;constructor(e){this.delegate=e}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,i){this.delegate.insertBefore(e,t,r,i)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.shouldReplay(t)&&this.replay.push(o=>o.listen(e,t,r,i)),this.delegate.listen(e,t,r,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(i1)}},o1=new ut("");function pf(n="animations"){return Mh("NgAsyncAnimations"),lt([{provide:Nh,useFactory:(e,t,r)=>new s1(e,t,r,n),deps:[Ch,Hh,We]},{provide:xh,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var c1=(n,e)=>({"pi ":!0,"pi-moon":n,"pi-sun":e}),si=class n{constructor(e){this.layoutService=e}items;toggleDarkMode(){this.layoutService.layoutConfig.update(e=>Sn(An({},e),{darkTheme:!e.darkTheme}))}static \u0275fac=function(t){return new(t||n)($e(on))};static \u0275cmp=ee({type:n,selectors:[["app-topbar"]],decls:37,vars:6,consts:[[1,"layout-topbar"],[1,"layout-topbar-logo-container"],[1,"layout-menu-button","layout-topbar-action",3,"click"],[1,"pi","pi-bars"],["routerLink","/",1,"layout-topbar-logo"],["viewBox","0 0 54 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M17.1637 19.2467C17.1566 19.4033 17.1529 19.561 17.1529 19.7194C17.1529 25.3503 21.7203 29.915 27.3546 29.915C32.9887 29.915 37.5561 25.3503 37.5561 19.7194C37.5561 19.5572 37.5524 19.3959 37.5449 19.2355C38.5617 19.0801 39.5759 18.9013 40.5867 18.6994L40.6926 18.6782C40.7191 19.0218 40.7326 19.369 40.7326 19.7194C40.7326 27.1036 34.743 33.0896 27.3546 33.0896C19.966 33.0896 13.9765 27.1036 13.9765 19.7194C13.9765 19.374 13.9896 19.0316 14.0154 18.6927L14.0486 18.6994C15.0837 18.9062 16.1223 19.0886 17.1637 19.2467ZM33.3284 11.4538C31.6493 10.2396 29.5855 9.52381 27.3546 9.52381C25.1195 9.52381 23.0524 10.2421 21.3717 11.4603C20.0078 11.3232 18.6475 11.1387 17.2933 10.907C19.7453 8.11308 23.3438 6.34921 27.3546 6.34921C31.36 6.34921 34.9543 8.10844 37.4061 10.896C36.0521 11.1292 34.692 11.3152 33.3284 11.4538ZM43.826 18.0518C43.881 18.6003 43.9091 19.1566 43.9091 19.7194C43.9091 28.8568 36.4973 36.2642 27.3546 36.2642C18.2117 36.2642 10.8 28.8568 10.8 19.7194C10.8 19.1615 10.8276 18.61 10.8816 18.0663L7.75383 17.4411C7.66775 18.1886 7.62354 18.9488 7.62354 19.7194C7.62354 30.6102 16.4574 39.4388 27.3546 39.4388C38.2517 39.4388 47.0855 30.6102 47.0855 19.7194C47.0855 18.9439 47.0407 18.1789 46.9536 17.4267L43.826 18.0518ZM44.2613 9.54743L40.9084 10.2176C37.9134 5.95821 32.9593 3.1746 27.3546 3.1746C21.7442 3.1746 16.7856 5.96385 13.7915 10.2305L10.4399 9.56057C13.892 3.83178 20.1756 0 27.3546 0C34.5281 0 40.8075 3.82591 44.2613 9.54743Z","fill","var(--primary-color)"],["id","mask0_1413_1551","maskUnits","userSpaceOnUse","x","0","y","8","width","54","height","11",2,"mask-type","alpha"],["d","M27 18.3652C10.5114 19.1944 0 8.88892 0 8.88892C0 8.88892 16.5176 14.5866 27 14.5866C37.4824 14.5866 54 8.88892 54 8.88892C54 8.88892 43.4886 17.5361 27 18.3652Z","fill","var(--primary-color)"],["mask","url(#mask0_1413_1551)"],["d","M-4.673e-05 8.88887L3.73084 -1.91434L-8.00806 17.0473L-4.673e-05 8.88887ZM27 18.3652L26.4253 6.95109L27 18.3652ZM54 8.88887L61.2673 17.7127L50.2691 -1.91434L54 8.88887ZM-4.673e-05 8.88887C-8.00806 17.0473 -8.00469 17.0505 -8.00132 17.0538C-8.00018 17.055 -7.99675 17.0583 -7.9944 17.0607C-7.98963 17.0653 -7.98474 17.0701 -7.97966 17.075C-7.96949 17.0849 -7.95863 17.0955 -7.94707 17.1066C-7.92401 17.129 -7.89809 17.1539 -7.86944 17.1812C-7.8122 17.236 -7.74377 17.3005 -7.66436 17.3743C-7.50567 17.5218 -7.30269 17.7063 -7.05645 17.9221C-6.56467 18.3532 -5.89662 18.9125 -5.06089 19.5534C-3.39603 20.83 -1.02575 22.4605 1.98012 24.0457C7.97874 27.2091 16.7723 30.3226 27.5746 29.7793L26.4253 6.95109C20.7391 7.23699 16.0326 5.61231 12.6534 3.83024C10.9703 2.94267 9.68222 2.04866 8.86091 1.41888C8.45356 1.10653 8.17155 0.867278 8.0241 0.738027C7.95072 0.673671 7.91178 0.637576 7.90841 0.634492C7.90682 0.63298 7.91419 0.639805 7.93071 0.65557C7.93897 0.663455 7.94952 0.673589 7.96235 0.686039C7.96883 0.692262 7.97582 0.699075 7.98338 0.706471C7.98719 0.710167 7.99113 0.714014 7.99526 0.718014C7.99729 0.720008 8.00047 0.723119 8.00148 0.724116C8.00466 0.727265 8.00796 0.730446 -4.673e-05 8.88887ZM27.5746 29.7793C37.6904 29.2706 45.9416 26.3684 51.6602 23.6054C54.5296 22.2191 56.8064 20.8465 58.4186 19.7784C59.2265 19.2431 59.873 18.7805 60.3494 18.4257C60.5878 18.2482 60.7841 18.0971 60.9374 17.977C61.014 17.9169 61.0799 17.8645 61.1349 17.8203C61.1624 17.7981 61.1872 17.7781 61.2093 17.7602C61.2203 17.7512 61.2307 17.7427 61.2403 17.7348C61.2452 17.7308 61.2499 17.727 61.2544 17.7233C61.2566 17.7215 61.2598 17.7188 61.261 17.7179C61.2642 17.7153 61.2673 17.7127 54 8.88887C46.7326 0.0650536 46.7357 0.0625219 46.7387 0.0600241C46.7397 0.0592345 46.7427 0.0567658 46.7446 0.0551857C46.7485 0.0520238 46.7521 0.0489887 46.7557 0.0460799C46.7628 0.0402623 46.7694 0.0349487 46.7753 0.0301318C46.7871 0.0204986 46.7966 0.0128495 46.8037 0.00712562C46.818 -0.00431848 46.8228 -0.00808311 46.8184 -0.00463784C46.8096 0.00228345 46.764 0.0378652 46.6828 0.0983779C46.5199 0.219675 46.2165 0.439161 45.7812 0.727519C44.9072 1.30663 43.5257 2.14765 41.7061 3.02677C38.0469 4.79468 32.7981 6.63058 26.4253 6.95109L27.5746 29.7793ZM54 8.88887C50.2691 -1.91433 50.27 -1.91467 50.271 -1.91498C50.2712 -1.91506 50.272 -1.91535 50.2724 -1.9155C50.2733 -1.91581 50.274 -1.91602 50.2743 -1.91616C50.2752 -1.91643 50.275 -1.91636 50.2738 -1.91595C50.2714 -1.91515 50.2652 -1.91302 50.2552 -1.9096C50.2351 -1.90276 50.1999 -1.89078 50.1503 -1.874C50.0509 -1.84043 49.8938 -1.78773 49.6844 -1.71863C49.2652 -1.58031 48.6387 -1.377 47.8481 -1.13035C46.2609 -0.635237 44.0427 0.0249875 41.5325 0.6823C36.215 2.07471 30.6736 3.15796 27 3.15796V26.0151C33.8087 26.0151 41.7672 24.2495 47.3292 22.7931C50.2586 22.026 52.825 21.2618 54.6625 20.6886C55.5842 20.4011 56.33 20.1593 56.8551 19.986C57.1178 19.8993 57.3258 19.8296 57.4735 19.7797C57.5474 19.7548 57.6062 19.7348 57.6493 19.72C57.6709 19.7127 57.6885 19.7066 57.7021 19.7019C57.7089 19.6996 57.7147 19.6976 57.7195 19.696C57.7219 19.6952 57.7241 19.6944 57.726 19.6938C57.7269 19.6934 57.7281 19.693 57.7286 19.6929C57.7298 19.6924 57.7309 19.692 54 8.88887ZM27 3.15796C23.3263 3.15796 17.7849 2.07471 12.4674 0.6823C9.95717 0.0249875 7.73904 -0.635237 6.15184 -1.13035C5.36118 -1.377 4.73467 -1.58031 4.3155 -1.71863C4.10609 -1.78773 3.94899 -1.84043 3.84961 -1.874C3.79994 -1.89078 3.76474 -1.90276 3.74471 -1.9096C3.73469 -1.91302 3.72848 -1.91515 3.72613 -1.91595C3.72496 -1.91636 3.72476 -1.91643 3.72554 -1.91616C3.72593 -1.91602 3.72657 -1.91581 3.72745 -1.9155C3.72789 -1.91535 3.72874 -1.91506 3.72896 -1.91498C3.72987 -1.91467 3.73084 -1.91433 -4.673e-05 8.88887C-3.73093 19.692 -3.72983 19.6924 -3.72868 19.6929C-3.72821 19.693 -3.72698 19.6934 -3.72603 19.6938C-3.72415 19.6944 -3.72201 19.6952 -3.71961 19.696C-3.71482 19.6976 -3.70901 19.6996 -3.7022 19.7019C-3.68858 19.7066 -3.67095 19.7127 -3.6494 19.72C-3.60629 19.7348 -3.54745 19.7548 -3.47359 19.7797C-3.32589 19.8296 -3.11788 19.8993 -2.85516 19.986C-2.33008 20.1593 -1.58425 20.4011 -0.662589 20.6886C1.17485 21.2618 3.74125 22.026 6.67073 22.7931C12.2327 24.2495 20.1913 26.0151 27 26.0151V3.15796Z","fill","var(--primary-color)"],[1,"layout-topbar-actions"],[1,"layout-config-menu"],["type","button",1,"layout-topbar-action",3,"click"],[3,"ngClass"],[1,"relative"],["pStyleClass","@next","enterFromClass","hidden","enterActiveClass","animate-scalein","leaveToClass","hidden","leaveActiveClass","animate-fadeout",1,"layout-topbar-action","layout-topbar-action-highlight",3,"hideOnOutsideClick"],[1,"pi","pi-palette"],["pStyleClass","@next","enterFromClass","hidden","enterActiveClass","animate-scalein","leaveToClass","hidden","leaveActiveClass","animate-fadeout",1,"layout-topbar-menu-button","layout-topbar-action",3,"hideOnOutsideClick"],[1,"pi","pi-ellipsis-v"],[1,"layout-topbar-menu","hidden","lg:block"],[1,"layout-topbar-menu-content"],["type","button",1,"layout-topbar-action"],[1,"pi","pi-calendar"],[1,"pi","pi-inbox"],[1,"pi","pi-user"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"button",2),nt("click",function(){return r.layoutService.onMenuToggle()}),D(3,"i",3),b(),y(4,"a",4),Jt(),y(5,"svg",5),D(6,"path",6),y(7,"mask",7),D(8,"path",8),b(),y(9,"g",9),D(10,"path",10),b()(),Zt(),y(11,"span"),E(12,"SAKAI"),b()()(),y(13,"div",11)(14,"div",12)(15,"button",13),nt("click",function(){return r.toggleDarkMode()}),D(16,"i",14),b(),y(17,"div",15)(18,"button",16),D(19,"i",17),b(),D(20,"app-configurator"),b()(),y(21,"button",18),D(22,"i",19),b(),y(23,"div",20)(24,"div",21)(25,"button",22),D(26,"i",23),y(27,"span"),E(28,"Calendar"),b()(),y(29,"button",22),D(30,"i",24),y(31,"span"),E(32,"Messages"),b()(),y(33,"button",22),D(34,"i",25),y(35,"span"),E(36,"Profile"),b()()()()()()),t&2&&(x(16),W("ngClass",$h(3,c1,r.layoutService.isDarkTheme(),!r.layoutService.isDarkTheme())),x(2),W("hideOnOutsideClick",!0),x(3),W("hideOnOutsideClick",!0))},dependencies:[be,rn,Ze,tn,Xn,vs,af],encapsulation:2})};var u1=["app-menuitem",""],l1=()=>({paths:"exact",queryParams:"ignored",matrixParams:"ignored",fragment:"ignored"});function d1(n,e){if(n&1&&(y(0,"div",4),E(1),b()),n&2){let t=de();x(),Pe(t.item.label)}}function h1(n,e){n&1&&D(0,"i",9)}function f1(n,e){if(n&1){let t=Ga();y(0,"a",5),nt("click",function(i){ja(t);let o=de();return za(o.itemClick(i))}),D(1,"i",6),y(2,"span",7),E(3),b(),en(4,h1,1,0,"i",8),b()}if(n&2){let t=de();W("ngClass",t.item.styleClass),Wa("href",t.item.url,Dh)("target",t.item.target),x(),W("ngClass",t.item.icon),x(2),Pe(t.item.label),x(),W("ngIf",t.item.items)}}function p1(n,e){n&1&&D(0,"i",9)}function m1(n,e){if(n&1){let t=Ga();y(0,"a",10),nt("click",function(i){ja(t);let o=de();return za(o.itemClick(i))}),D(1,"i",6),y(2,"span",7),E(3),b(),en(4,p1,1,0,"i",8),b()}if(n&2){let t=de();W("ngClass",t.item.styleClass)("routerLink",t.item.routerLink)("routerLinkActiveOptions",t.item.routerLinkActiveOptions||qh(14,l1))("fragment",t.item.fragment)("queryParamsHandling",t.item.queryParamsHandling)("preserveFragment",t.item.preserveFragment)("skipLocationChange",t.item.skipLocationChange)("replaceUrl",t.item.replaceUrl)("state",t.item.state)("queryParams",t.item.queryParams),Wa("target",t.item.target),x(),W("ngClass",t.item.icon),x(2),Pe(t.item.label),x(),W("ngIf",t.item.items)}}function g1(n,e){if(n&1&&D(0,"li",12),n&2){let t=e.$implicit,r=e.index,i=de(2);Uh(t.badgeClass),W("item",t)("index",r)("parentKey",i.key)}}function _1(n,e){if(n&1&&(y(0,"ul"),en(1,g1,1,5,"ng-template",11),b()),n&2){let t=de();W("@children",t.submenuAnimation),x(),W("ngForOf",t.item.items)}}var Ts=class n{constructor(e,t){this.router=e;this.layoutService=t;this.menuSourceSubscription=this.layoutService.menuSource$.subscribe(r=>{Promise.resolve(null).then(()=>{r.routeEvent?this.active=!!(r.key===this.key||r.key.startsWith(this.key+"-")):r.key!==this.key&&!r.key.startsWith(this.key+"-")&&(this.active=!1)})}),this.menuResetSubscription=this.layoutService.resetSource$.subscribe(()=>{this.active=!1}),this.router.events.pipe(Zr(r=>r instanceof _s)).subscribe(r=>{this.item.routerLink&&this.updateActiveStateFromRoute()})}item;index;root;parentKey;active=!1;menuSourceSubscription;menuResetSubscription;key="";ngOnInit(){this.key=this.parentKey?this.parentKey+"-"+this.index:String(this.index),this.item.routerLink&&this.updateActiveStateFromRoute()}updateActiveStateFromRoute(){this.router.isActive(this.item.routerLink[0],{paths:"exact",queryParams:"ignored",matrixParams:"ignored",fragment:"ignored"})&&this.layoutService.onMenuStateChange({key:this.key,routeEvent:!0})}itemClick(e){if(this.item.disabled){e.preventDefault();return}this.item.command&&this.item.command({originalEvent:e,item:this.item}),this.item.items&&(this.active=!this.active),this.layoutService.onMenuStateChange({key:this.key})}get submenuAnimation(){return this.root||this.active?"expanded":"collapsed"}get activeClass(){return this.active&&!this.root}ngOnDestroy(){this.menuSourceSubscription&&this.menuSourceSubscription.unsubscribe(),this.menuResetSubscription&&this.menuResetSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||n)($e(nn),$e(on))};static \u0275cmp=ee({type:n,selectors:[["","app-menuitem",""]],hostVars:4,hostBindings:function(t,r){t&2&&Fh("layout-root-menuitem",r.root)("active-menuitem",r.activeClass)},inputs:{item:"item",index:"index",root:"root",parentKey:"parentKey"},features:[Bh([on])],attrs:u1,decls:5,vars:4,consts:[["class","layout-menuitem-root-text",4,"ngIf"],["tabindex","0","pRipple","",3,"ngClass","click",4,"ngIf"],["routerLinkActive","active-route","tabindex","0","pRipple","",3,"ngClass","routerLink","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","queryParams","click",4,"ngIf"],[4,"ngIf"],[1,"layout-menuitem-root-text"],["tabindex","0","pRipple","",3,"click","ngClass"],[1,"layout-menuitem-icon",3,"ngClass"],[1,"layout-menuitem-text"],["class","pi pi-fw pi-angle-down layout-submenu-toggler",4,"ngIf"],[1,"pi","pi-fw","pi-angle-down","layout-submenu-toggler"],["routerLinkActive","active-route","tabindex","0","pRipple","",3,"click","ngClass","routerLink","routerLinkActiveOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","queryParams"],["ngFor","",3,"ngForOf"],["app-menuitem","",3,"item","index","parentKey"]],template:function(t,r){t&1&&(fs(0),en(1,d1,2,1,"div",0)(2,f1,5,6,"a",1)(3,m1,5,15,"a",2)(4,_1,2,2,"ul",3),ps()),t&2&&(x(),W("ngIf",r.root&&r.item.visible!==!1),x(),W("ngIf",(!r.item.routerLink||r.item.items)&&r.item.visible!==!1),x(),W("ngIf",r.item.routerLink&&!r.item.items&&r.item.visible!==!1),x(),W("ngIf",r.item.items&&r.item.visible!==!1))},dependencies:[n,Ze,tn,ms,gs,be,rn,ef,dt,sn],encapsulation:2,data:{animation:[Xh("children",[Ja("collapsed",Xa({height:"0"})),Ja("expanded",Xa({height:"*"})),Zh("collapsed <=> expanded",Jh("400ms cubic-bezier(0.86, 0, 0.07, 1)"))])]}})};function y1(n,e){if(n&1&&D(0,"li",4),n&2){let t=de(),r=t.$implicit,i=t.index;W("item",r)("index",i)("root",!0)}}function v1(n,e){n&1&&D(0,"li",5)}function E1(n,e){if(n&1&&(fs(0),en(1,y1,1,3,"li",2)(2,v1,1,0,"li",3),ps()),n&2){let t=e.$implicit;x(),W("ngIf",!t.separator),x(),W("ngIf",t.separator)}}var bs=class n{model=[];ngOnInit(){this.model=[{label:"Home",items:[{label:"Dashboard",icon:"pi pi-fw pi-home",routerLink:["/"]}]},{label:"UI Components",items:[{label:"Form Layout",icon:"pi pi-fw pi-id-card",routerLink:["/uikit/formlayout"]},{label:"Input",icon:"pi pi-fw pi-check-square",routerLink:["/uikit/input"]},{label:"Button",icon:"pi pi-fw pi-mobile",class:"rotated-icon",routerLink:["/uikit/button"]},{label:"Table",icon:"pi pi-fw pi-table",routerLink:["/uikit/table"]},{label:"List",icon:"pi pi-fw pi-list",routerLink:["/uikit/list"]},{label:"Tree",icon:"pi pi-fw pi-share-alt",routerLink:["/uikit/tree"]},{label:"Panel",icon:"pi pi-fw pi-tablet",routerLink:["/uikit/panel"]},{label:"Overlay",icon:"pi pi-fw pi-clone",routerLink:["/uikit/overlay"]},{label:"Media",icon:"pi pi-fw pi-image",routerLink:["/uikit/media"]},{label:"Menu",icon:"pi pi-fw pi-bars",routerLink:["/uikit/menu"]},{label:"Message",icon:"pi pi-fw pi-comment",routerLink:["/uikit/message"]},{label:"File",icon:"pi pi-fw pi-file",routerLink:["/uikit/file"]},{label:"Chart",icon:"pi pi-fw pi-chart-bar",routerLink:["/uikit/charts"]},{label:"Timeline",icon:"pi pi-fw pi-calendar",routerLink:["/uikit/timeline"]},{label:"Misc",icon:"pi pi-fw pi-circle",routerLink:["/uikit/misc"]}]},{label:"Pages",icon:"pi pi-fw pi-briefcase",routerLink:["/pages"],items:[{label:"Landing",icon:"pi pi-fw pi-globe",routerLink:["/landing"]},{label:"Auth",icon:"pi pi-fw pi-user",items:[{label:"Login",icon:"pi pi-fw pi-sign-in",routerLink:["/auth/login"]},{label:"Error",icon:"pi pi-fw pi-times-circle",routerLink:["/auth/error"]},{label:"Access Denied",icon:"pi pi-fw pi-lock",routerLink:["/auth/access"]}]},{label:"Crud",icon:"pi pi-fw pi-pencil",routerLink:["/pages/crud"]},{label:"Not Found",icon:"pi pi-fw pi-exclamation-circle",routerLink:["/pages/notfound"]},{label:"Empty",icon:"pi pi-fw pi-circle-off",routerLink:["/pages/empty"]}]},{label:"Hierarchy",items:[{label:"Submenu 1",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 1.1",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 1.1.1",icon:"pi pi-fw pi-bookmark"},{label:"Submenu 1.1.2",icon:"pi pi-fw pi-bookmark"},{label:"Submenu 1.1.3",icon:"pi pi-fw pi-bookmark"}]},{label:"Submenu 1.2",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 1.2.1",icon:"pi pi-fw pi-bookmark"}]}]},{label:"Submenu 2",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 2.1",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 2.1.1",icon:"pi pi-fw pi-bookmark"},{label:"Submenu 2.1.2",icon:"pi pi-fw pi-bookmark"}]},{label:"Submenu 2.2",icon:"pi pi-fw pi-bookmark",items:[{label:"Submenu 2.2.1",icon:"pi pi-fw pi-bookmark"}]}]}]},{label:"Get Started",items:[{label:"Documentation",icon:"pi pi-fw pi-book",routerLink:["/documentation"]},{label:"View Source",icon:"pi pi-fw pi-github",url:"https://github.com/primefaces/sakai-ng",target:"_blank"}]}]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-menu"]],decls:2,vars:1,consts:[[1,"layout-menu"],[4,"ngFor","ngForOf"],["app-menuitem","",3,"item","index","root",4,"ngIf"],["class","menu-separator",4,"ngIf"],["app-menuitem","",3,"item","index","root"],[1,"menu-separator"]],template:function(t,r){t&1&&(y(0,"ul",0),en(1,E1,3,2,"ng-container",1),b()),t&2&&(x(),W("ngForOf",r.model))},dependencies:[Ze,ms,gs,Ts,be],encapsulation:2})};var oi=class n{constructor(e){this.el=e}static \u0275fac=function(t){return new(t||n)($e(kh))};static \u0275cmp=ee({type:n,selectors:[["app-sidebar"]],decls:2,vars:0,consts:[[1,"layout-sidebar"]],template:function(t,r){t&1&&(y(0,"div",0),D(1,"app-menu"),b())},dependencies:[bs],encapsulation:2})};var As=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"layout-footer"],["href","https://primeng.org","target","_blank","rel","noopener noreferrer",1,"text-primary","font-bold","hover:underline"]],template:function(t,r){t&1&&(F(0,"div",0),E(1," SAKAI by "),F(2,"a",1),E(3,"PrimeNG"),U()())},encapsulation:2})};var Ss=class n{constructor(e,t,r){this.layoutService=e;this.renderer=t;this.router=r;this.overlayMenuOpenSubscription=this.layoutService.overlayOpen$.subscribe(()=>{this.menuOutsideClickListener||(this.menuOutsideClickListener=this.renderer.listen("document","click",i=>{this.isOutsideClicked(i)&&this.hideMenu()})),this.layoutService.layoutState().staticMenuMobileActive&&this.blockBodyScroll()}),this.router.events.pipe(Zr(i=>i instanceof _s)).subscribe(()=>{this.hideMenu()})}overlayMenuOpenSubscription;menuOutsideClickListener;appSidebar;appTopBar;isOutsideClicked(e){let t=document.querySelector(".layout-sidebar"),r=document.querySelector(".layout-menu-button"),i=e.target;return!(t?.isSameNode(i)||t?.contains(i)||r?.isSameNode(i)||r?.contains(i))}hideMenu(){this.layoutService.layoutState.update(e=>Sn(An({},e),{overlayMenuActive:!1,staticMenuMobileActive:!1,menuHoverActive:!1})),this.menuOutsideClickListener&&(this.menuOutsideClickListener(),this.menuOutsideClickListener=null),this.unblockBodyScroll()}blockBodyScroll(){document.body.classList?document.body.classList.add("blocked-scroll"):document.body.className+=" blocked-scroll"}unblockBodyScroll(){document.body.classList?document.body.classList.remove("blocked-scroll"):document.body.className=document.body.className.replace(new RegExp("(^|\\b)"+"blocked-scroll".split(" ").join("|")+"(\\b|$)","gi")," ")}get containerClass(){return{"layout-overlay":this.layoutService.layoutConfig().menuMode==="overlay","layout-static":this.layoutService.layoutConfig().menuMode==="static","layout-static-inactive":this.layoutService.layoutState().staticMenuDesktopInactive&&this.layoutService.layoutConfig().menuMode==="static","layout-overlay-active":this.layoutService.layoutState().overlayMenuActive,"layout-mobile-active":this.layoutService.layoutState().staticMenuMobileActive}}ngOnDestroy(){this.overlayMenuOpenSubscription&&this.overlayMenuOpenSubscription.unsubscribe(),this.menuOutsideClickListener&&this.menuOutsideClickListener()}static \u0275fac=function(t){return new(t||n)($e(on),$e(Oh),$e(nn))};static \u0275cmp=ee({type:n,selectors:[["app-layout"]],viewQuery:function(t,r){if(t&1&&(Ha(oi,5),Ha(si,5)),t&2){let i;Ka(i=Qa())&&(r.appSidebar=i.first),Ka(i=Qa())&&(r.appTopBar=i.first)}},decls:8,vars:1,consts:[[1,"layout-wrapper",3,"ngClass"],[1,"layout-main-container"],[1,"layout-main"],[1,"layout-mask","animate-fadein"]],template:function(t,r){t&1&&(y(0,"div",0),D(1,"app-topbar")(2,"app-sidebar"),y(3,"div",1)(4,"div",2),D(5,"router-outlet"),b(),D(6,"app-footer"),b(),D(7,"div",3),b()),t&2&&W("ngClass",r.containerClass)},dependencies:[Ze,tn,si,oi,be,ys,As],encapsulation:2})};var gf=()=>{};var vf=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},I1=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],d=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Cs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,d=i+2<n.length,h=d?n[i+2]:0,p=o>>2,I=(o&3)<<4|u>>4,T=(u&15)<<2|h>>6,P=h&63;d||(P=64,a||(T=64)),r.push(t[p],t[I],t[T],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vf(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):I1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let I=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||h==null||I==null)throw new nc;let T=o<<2|u>>4;if(r.push(T),h!==64){let P=u<<4&240|h>>2;if(r.push(P),I!==64){let V=h<<6&192|I;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},nc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},w1=function(n){let e=vf(n);return Cs.encodeByteArray(e,!0)},ci=function(n){return w1(n).replace(/\./g,"")},Rs=function(n){try{return Cs.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ic(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var T1=()=>ic().__FIREBASE_DEFAULTS__,b1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},A1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Rs(n[1]);return e&&JSON.parse(e)},ks=()=>{try{return gf()||T1()||b1()||A1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sc=n=>{var e,t;return(t=(e=ks())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ps=n=>{let e=sc(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},oc=()=>{var n;return(n=ks())===null||n===void 0?void 0:n.config},ac=n=>{var e;return(e=ks())===null||e===void 0?void 0:e[`_${n}`]};var Rn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ft(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function er(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function xs(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ci(JSON.stringify(t)),ci(JSON.stringify(a)),""].join(".")}var ai={};function S1(){let n={prod:[],emulator:[]};for(let e of Object.keys(ai))ai[e]?n.emulator.push(e):n.prod.push(e);return n}function C1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var _f=!1;function tr(n,e){if(typeof window>"u"||typeof document>"u"||!ft(window.location.host)||ai[n]===e||ai[n]||_f)return;ai[n]=e;function t(T){return`__firebase__banner__${T}`}let r="__firebase__banner",o=S1().prod.length>0;function a(){let T=document.getElementById(r);T&&T.remove()}function u(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){let T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{_f=!0,a()},T}function p(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function I(){let T=C1(r),P=t("text"),V=document.getElementById(P)||document.createElement("span"),q=t("learnmore"),O=document.getElementById(q)||document.createElement("a"),X=t("preprendIcon"),Q=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){let H=T.element;u(H),p(O,q);let Y=h();d(Q,X),H.append(Q,V,O,Y),document.body.appendChild(H)}o?(V.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}function Ae(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ef(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function R1(){var n;let e=(n=ks())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function If(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Tf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bf(){let n=Ae();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Af(){return!R1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ui(){try{return typeof indexedDB=="object"}catch{return!1}}function Sf(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var k1="FirebaseError",je=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=k1,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}},rt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?P1(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new je(i,u,r)}};function P1(n,e){return n.replace(x1,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var x1=/\{\$([^}]+)}/g;function Cf(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(yf(o)&&yf(a)){if(!pt(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function yf(n){return n!==null&&typeof n=="object"}function li(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rf(n,e){let t=new rc(n,e);return t.subscribe.bind(t)}var rc=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");D1(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tc),i.error===void 0&&(i.error=tc),i.complete===void 0&&(i.complete=tc);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function D1(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tc(){}var MT=4*60*60*1e3;function Ye(n){return n&&n._delegate?n._delegate:n}var xe=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var kn="[DEFAULT]";var cc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Rn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O1(e))try{this.getOrInitializeService({instanceIdentifier:kn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=kn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=kn){return this.instances.has(e)}getOptions(e=kn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N1(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kn){return this.component?this.component.multipleInstances?e:kn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N1(n){return n===kn?void 0:n}function O1(n){return n.instantiationMode==="EAGER"}var Ds=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new cc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var L1=[],Z=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Z||{}),M1={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},V1=Z.INFO,F1={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},U1=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=F1[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},mt=class{constructor(e){this.name=e,this._logLevel=V1,this._logHandler=U1,this._userLogHandler=null,L1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var B1=(n,e)=>e.some(t=>n instanceof t),kf,Pf;function q1(){return kf||(kf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $1(){return Pf||(Pf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var xf=new WeakMap,lc=new WeakMap,Df=new WeakMap,uc=new WeakMap,hc=new WeakMap;function j1(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(gt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&xf.set(t,n)}).catch(()=>{}),hc.set(e,n),e}function z1(n){if(lc.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});lc.set(n,e)}var dc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Df.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Nf(n){dc=n(dc)}function W1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ns(this),e,...t);return Df.set(r,e.sort?e.sort():[e]),gt(r)}:$1().includes(n)?function(...e){return n.apply(Ns(this),e),gt(xf.get(this))}:function(...e){return gt(n.apply(Ns(this),e))}}function G1(n){return typeof n=="function"?W1(n):(n instanceof IDBTransaction&&z1(n),B1(n,q1())?new Proxy(n,dc):n)}function gt(n){if(n instanceof IDBRequest)return j1(n);if(uc.has(n))return uc.get(n);let e=G1(n);return e!==n&&(uc.set(n,e),hc.set(e,n)),e}var Ns=n=>hc.get(n);function Lf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=gt(a);return r&&a.addEventListener("upgradeneeded",d=>{r(gt(a.result),d.oldVersion,d.newVersion,gt(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}var H1=["get","getKey","getAll","getAllKeys","count"],K1=["put","add","delete","clear"],fc=new Map;function Of(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fc.get(e))return fc.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=K1.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||H1.includes(t)))return;let o=function(a,...u){return v(this,null,function*(){let d=this.transaction(a,i?"readwrite":"readonly"),h=d.store;return r&&(h=h.index(u.shift())),(yield Promise.all([h[t](...u),i&&d.done]))[0]})};return fc.set(e,o),o}Nf(n=>Sn(An({},n),{get:(e,t,r)=>Of(e,t)||n.get(e,t,r),has:(e,t)=>!!Of(e,t)||n.has(e,t)}));var mc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Q1(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Q1(n){let e=n.getComponent();return e?.type==="VERSION"}var gc="@firebase/app",Mf="0.13.2";var Nt=new mt("@firebase/app"),Y1="@firebase/app-compat",X1="@firebase/analytics-compat",J1="@firebase/analytics",Z1="@firebase/app-check-compat",e_="@firebase/app-check",t_="@firebase/auth",n_="@firebase/auth-compat",r_="@firebase/database",i_="@firebase/data-connect",s_="@firebase/database-compat",o_="@firebase/functions",a_="@firebase/functions-compat",c_="@firebase/installations",u_="@firebase/installations-compat",l_="@firebase/messaging",d_="@firebase/messaging-compat",h_="@firebase/performance",f_="@firebase/performance-compat",p_="@firebase/remote-config",m_="@firebase/remote-config-compat",g_="@firebase/storage",__="@firebase/storage-compat",y_="@firebase/firestore",v_="@firebase/ai",E_="@firebase/firestore-compat",I_="firebase",w_="11.10.0";var _c="[DEFAULT]",T_={[gc]:"fire-core",[Y1]:"fire-core-compat",[J1]:"fire-analytics",[X1]:"fire-analytics-compat",[e_]:"fire-app-check",[Z1]:"fire-app-check-compat",[t_]:"fire-auth",[n_]:"fire-auth-compat",[r_]:"fire-rtdb",[i_]:"fire-data-connect",[s_]:"fire-rtdb-compat",[o_]:"fire-fn",[a_]:"fire-fn-compat",[c_]:"fire-iid",[u_]:"fire-iid-compat",[l_]:"fire-fcm",[d_]:"fire-fcm-compat",[h_]:"fire-perf",[f_]:"fire-perf-compat",[p_]:"fire-rc",[m_]:"fire-rc-compat",[g_]:"fire-gcs",[__]:"fire-gcs-compat",[y_]:"fire-fst",[E_]:"fire-fst-compat",[v_]:"fire-vertex","fire-js":"fire-js",[I_]:"fire-js-all"};var di=new Map,b_=new Map,yc=new Map;function Vf(n,e){try{n.container.addComponent(e)}catch(t){Nt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xe(n){let e=n.name;if(yc.has(e))return Nt.debug(`There were multiple attempts to register component ${e}.`),!1;yc.set(e,n);for(let t of di.values())Vf(t,n);for(let t of b_.values())Vf(t,n);return!0}function cn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ge(n){return n==null?!1:n.settings!==void 0}var A_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},an=new rt("app","Firebase",A_);var vc=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}};var _t=w_;function wc(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:_c,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw an.create("bad-app-name",{appName:String(i)});if(t||(t=oc()),!t)throw an.create("no-options");let o=di.get(i);if(o){if(pt(t,o.options)&&pt(r,o.config))return o;throw an.create("duplicate-app",{appName:i})}let a=new Ds(i);for(let d of yc.values())a.addComponent(d);let u=new vc(t,r,a);return di.set(i,u),u}function Ot(n=_c){let e=di.get(n);if(!e&&n===_c&&oc())return wc();if(!e)throw an.create("no-app",{appName:n});return e}function Os(){return Array.from(di.values())}function ae(n,e,t){var r;let i=(r=T_[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nt.warn(u.join(" "));return}Xe(new xe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var S_="firebase-heartbeat-database",C_=1,hi="firebase-heartbeat-store",pc=null;function qf(){return pc||(pc=Lf(S_,C_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(hi)}catch(t){console.warn(t)}}}}).catch(n=>{throw an.create("idb-open",{originalErrorMessage:n.message})})),pc}function R_(n){return v(this,null,function*(){try{let t=(yield qf()).transaction(hi),r=yield t.objectStore(hi).get($f(n));return yield t.done,r}catch(e){if(e instanceof je)Nt.warn(e.message);else{let t=an.create("idb-get",{originalErrorMessage:e?.message});Nt.warn(t.message)}}})}function Ff(n,e){return v(this,null,function*(){try{let r=(yield qf()).transaction(hi,"readwrite");yield r.objectStore(hi).put(e,$f(n)),yield r.done}catch(t){if(t instanceof je)Nt.warn(t.message);else{let r=an.create("idb-set",{originalErrorMessage:t?.message});Nt.warn(r.message)}}})}function $f(n){return`${n.name}!${n.options.appId}`}var k_=1024,P_=30,Ec=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ic(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Uf();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>P_){let a=D_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Nt.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Uf(),{heartbeatsToSend:r,unsentEntries:i}=x_(this._heartbeatsCache.heartbeats),o=ci(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Nt.warn(t),""}})}};function Uf(){return new Date().toISOString().substring(0,10)}function x_(n,e=k_){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Bf(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Bf(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ic=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return ui()?Sf().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield R_(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ff(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ff(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Bf(n){return ci(JSON.stringify({version:2,heartbeats:n})).length}function D_(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function N_(n){Xe(new xe("platform-logger",e=>new mc(e),"PRIVATE")),Xe(new xe("heartbeat",e=>new Ec(e),"PRIVATE")),ae(gc,Mf,n),ae(gc,Mf,"esm2017"),ae("fire-js","")}N_("");var O_="firebase",L_="11.10.0";ae(O_,L_,"app");function jf(n){n===void 0&&(n=Me(Je));let e=n.get(hs);return t=>new Cn(r=>{let i=e.add(),o=!1;function a(){o||(i(),o=!0)}let u=t.subscribe({next:d=>{r.next(d),a()},complete:()=>{r.complete(),a()},error:d=>{r.error(d),a()}});return u.add(()=>{r.unsubscribe(),a()}),u})}var yt=new jh("ANGULARFIRE2_VERSION");function xn(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var un=(n,e)=>{let t=e?[e]:Os(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},nr=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(nr||{}),zf=Ya()&&typeof Zone<"u"?nr.WARN:nr.SILENT;var Ls=class{zone;delegate;constructor(e,t=Ah){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,r)}},vt=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Me(We);this.outsideAngular=t.runOutsideAngular(()=>new Ls(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ls(typeof Zone>"u"?void 0:Zone.current,bh))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Yn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wf=!1;function M_(n,e){!Wf&&(zf>nr.SILENT||Ya())&&(Wf=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),zf>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function V_(n){let e=Me(We,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Pn(n){let e=Me(We,{optional:!0});return e?e.run(()=>n()):n()}var F_=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ds(t,()=>Pn(()=>n.apply(void 0,r)))),it=(n,e,t)=>(t||=e?nr.WARN:nr.VERBOSE,function(){let r,i=arguments,o,a,u;try{o=Me(vt),a=Me(hs),u=Me(Sh)}catch{return M_(n,t),n.apply(this,i)}for(let h=0;h<arguments.length;h++)typeof i[h]=="function"&&(e&&(r||=Pn(()=>a.add())),i[h]=F_(i[h],r,u));let d=V_(()=>n.apply(this,i));return e?d instanceof Cn?d.pipe(Ba(o.outsideAngular),Ua(o.insideAngular),jf(u)):d instanceof Promise?Pn(()=>{let h=a.add();return new Promise((p,I)=>{d.then(T=>ds(u,()=>Pn(()=>p(T))),T=>ds(u,()=>Pn(()=>I(T)))).finally(h)})}):typeof d=="function"&&r?function(){return setTimeout(r,0),d.apply(this,arguments)}:Pn(()=>d):d instanceof Cn?d.pipe(Ba(o.outsideAngular),Ua(o.insideAngular)):Pn(()=>d)});var st=class{constructor(e){return e}},Lt=class{constructor(){return Os()}};function U_(n){return n&&n.length===1?n[0]:new st(Ot())}var Tc=new ut("angularfire2._apps"),B_={provide:st,useFactory:U_,deps:[[new ke,Tc]]},q_={provide:Lt,deps:[[new ke,Tc]]};function $_(n){return(e,t)=>{let r=t.get(Ph);ae("angularfire",yt.full,"core"),ae("angularfire",yt.full,"app"),ae("angular",zh.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new st(i)}}function Gf(n,...e){return lt([B_,q_,{provide:Tc,useFactory:$_(n),multi:!0,deps:[We,Je,vt,...e]}])}var Hf=it(wc,!0);var j_=new Map,z_={activated:!1,tokenObservers:[]},W_={initialized:!1,enabled:!1};function ot(n){return j_.get(n)||Object.assign({},z_)}function Xf(){return W_}var G_="https://content-firebaseappcheck.googleapis.com/v1";var H_="exchangeDebugToken",Kf={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},qb=24*60*60*1e3;var Sc=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new Rn,this.pending.promise.catch(t=>{}),yield K_(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Rn,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function K_(n){return new Promise(e=>{setTimeout(e,n)})}var Q_={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ln=new rt("appCheck","AppCheck",Q_);function Jf(n){if(!ot(n).activated)throw ln.create("use-before-activation",{appName:n.name})}function Zf(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let P=yield a.getHeartbeatsHeader();P&&(o["X-Firebase-Client"]=P)}let u={method:"POST",body:JSON.stringify(e),headers:o},d;try{d=yield fetch(n,u)}catch(P){throw ln.create("fetch-network-error",{originalErrorMessage:P?.message})}if(d.status!==200)throw ln.create("fetch-status-error",{httpStatus:d.status});let h;try{h=yield d.json()}catch(P){throw ln.create("fetch-parse-error",{originalErrorMessage:P?.message})}let p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw ln.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});let I=Number(p[1])*1e3,T=Date.now();return{token:h.token,expireTimeMillis:T+I,issuedAtTimeMillis:T}})}function ep(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${G_}/projects/${t}/apps/${r}:${H_}?key=${i}`,body:{debug_token:e}}}var Y_="firebase-app-check-database",X_=1,Cc="firebase-app-check-store";var Ms=null;function J_(){return Ms||(Ms=new Promise((n,e)=>{try{let t=indexedDB.open(Y_,X_);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ln.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Cc,{keyPath:"compositeKey"})}}}catch(t){e(ln.create("storage-open",{originalErrorMessage:t?.message}))}}),Ms)}function Z_(n,e){return ey(ty(n),e)}function ey(n,e){return v(this,null,function*(){let r=(yield J_()).transaction(Cc,"readwrite"),o=r.objectStore(Cc).put({compositeKey:n,value:e});return new Promise((a,u)=>{o.onsuccess=d=>{a()},r.onerror=d=>{var h;u(ln.create("storage-set",{originalErrorMessage:(h=d.target.error)===null||h===void 0?void 0:h.message}))}})})}function ty(n){return`${n.options.appId}-${n.name}`}var fi=new mt("@firebase/app-check");function bc(n,e){return ui()?Z_(n,e).catch(t=>{fi.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function tp(){return Xf().enabled}function np(){return v(this,null,function*(){let n=Xf();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var ny={error:"UNKNOWN_ERROR"};function ry(n){return Cs.encodeString(JSON.stringify(n),!1)}function Rc(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;Jf(r);let i=ot(r),o=i.token,a;if(o&&!pi(o)&&(i.token=void 0,o=void 0),!o){let h=yield i.cachedTokenPromise;h&&(pi(h)?o=h:yield bc(r,void 0))}if(!e&&o&&pi(o))return{token:o.token};let u=!1;if(tp())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Zf(ep(r,yield np()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);let h=yield i.exchangeTokenPromise;return yield bc(r,h),i.token=h,{token:h.token}}catch(h){return h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?fi.warn(h.message):t&&fi.error(h),Ac(h)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),o=yield ot(r).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?fi.warn(h.message):t&&fi.error(h),a=h}let d;return o?a?pi(o)?d={token:o.token,internalError:a}:d=Ac(a):(d={token:o.token},i.token=o,yield bc(r,o)):d=Ac(a),u&&ay(r,d),d})}function iy(n){return v(this,null,function*(){let e=n.app;Jf(e);let{provider:t}=ot(e);if(tp()){let r=yield np(),{token:i}=yield Zf(ep(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function sy(n,e,t,r){let{app:i}=n,o=ot(i),a={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&pi(o.token)){let u=o.token;Promise.resolve().then(()=>{t({token:u.token}),Qf(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Qf(n))}function rp(n,e){let t=ot(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Qf(n){let{app:e}=n,t=ot(e),r=t.tokenRefresher;r||(r=oy(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oy(n){let{app:e}=n;return new Sc(()=>v(null,null,function*(){let t=ot(e),r;if(t.token?r=yield Rc(n,!0):r=yield Rc(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ot(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Kf.RETRIAL_MIN_WAIT,Kf.RETRIAL_MAX_WAIT)}function ay(n,e){let t=ot(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function pi(n){return n.expireTimeMillis-Date.now()>0}function Ac(n){return{token:ry(ny),error:n}}var kc=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ot(this.app);for(let t of e)rp(this.app,t.next);return Promise.resolve()}};function cy(n,e){return new kc(n,e)}function uy(n){return{getToken:e=>Rc(n,e),getLimitedUseToken:()=>iy(n),addTokenListener:e=>sy(n,"INTERNAL",e),removeTokenListener:e=>rp(n.app,e)}}var ly="@firebase/app-check",dy="0.10.1";var hy="app-check",Yf="app-check-internal";function fy(){Xe(new xe(hy,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return cy(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Yf).initialize()})),Xe(new xe(Yf,n=>{let e=n.getProvider("app-check").getImmediate();return uy(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ae(ly,dy)}fy();var py="app-check";var dn=class{constructor(){return un(py)}};var my=["localhost","0.0.0.0","127.0.0.1"],eA=typeof window<"u"&&my.includes(window.location.hostname);function yp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vp=yp,Ep=new rt("auth","Firebase",yp());var $s=new mt("@firebase/auth");function gy(n,...e){$s.logLevel<=Z.WARN&&$s.warn(`Auth (${_t}): ${n}`,...e)}function Fs(n,...e){$s.logLevel<=Z.ERROR&&$s.error(`Auth (${_t}): ${n}`,...e)}function pn(n,...e){throw Qc(n,...e)}function Nn(n,...e){return Qc(n,...e)}function Ip(n,e,t){let r=Object.assign(Object.assign({},vp()),{[e]:t});return new rt("auth","Firebase",r).create(e,{appName:n.name})}function Dn(n){return Ip(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qc(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ep.create(n,...e)}function z(n,e,...t){if(!n)throw Qc(e,...t)}function Mt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Fs(e),new Error(e)}function mn(n,e){n||Mt(e)}function Nc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _y(){return ip()==="http:"||ip()==="https:"}function ip(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function yy(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_y()||wf()||"connection"in navigator)?navigator.onLine:!0}function vy(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var On=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,mn(t>e,"Short delay should be less than long delay!"),this.isMobile=Ef()||Tf()}get(){return yy()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Yc(n,e){mn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var js=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ey={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Iy=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wy=new On(3e4,6e4);function Xc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function rr(o,a,u,d){return v(this,arguments,function*(n,e,t,r,i={}){return wp(n,i,()=>v(null,null,function*(){let h={},p={};r&&(e==="GET"?p=r:h={body:JSON.stringify(r)});let I=li(Object.assign({key:n.config.apiKey},p)).slice(1),T=yield n._getAdditionalHeaders();T["Content-Type"]="application/json",n.languageCode&&(T["X-Firebase-Locale"]=n.languageCode);let P=Object.assign({method:e,headers:T},h);return If()||(P.referrerPolicy="no-referrer"),n.emulatorConfig&&ft(n.emulatorConfig.host)&&(P.credentials="include"),js.fetch()(yield Tp(n,n.config.apiHost,t,I),P)}))})}function wp(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Ey),e);try{let i=new Oc(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw Vs(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vs(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Vs(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw Vs(n,"user-disabled",a);let p=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ip(n,p,h);pn(n,p)}}catch(i){if(i instanceof je)throw i;pn(n,"network-request-failed",{message:String(i)})}})}function Ty(o,a,u,d){return v(this,arguments,function*(n,e,t,r,i={}){let h=yield rr(n,e,t,r,i);return"mfaPendingCredential"in h&&pn(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function Tp(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,a=o.config.emulator?Yc(n.config,i):`${n.config.apiScheme}://${i}`;return Iy.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}var Oc=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),wy.get())})}};function Vs(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Nn(n,e,r);return i.customData._tokenResponse=t,i}function by(n,e){return v(this,null,function*(){return rr(n,"POST","/v1/accounts:delete",e)})}function zs(n,e){return v(this,null,function*(){return rr(n,"POST","/v1/accounts:lookup",e)})}function mi(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Jc(n,e=!1){return v(this,null,function*(){let t=Ye(n),r=yield t.getIdToken(e),i=Zc(r);z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:mi(Pc(i.auth_time)),issuedAtTime:mi(Pc(i.iat)),expirationTime:mi(Pc(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Pc(n){return Number(n)*1e3}function Zc(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fs("JWT malformed, contained fewer than 3 sections"),null;try{let i=Rs(t);return i?JSON.parse(i):(Fs("Failed to decode base64 JWT payload"),null)}catch(i){return Fs("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sp(n){let e=Zc(n);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function _i(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof je&&Ay(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Ay({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Lc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var yi=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mi(this.lastLoginAt),this.creationTime=mi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ws(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield _i(n,zs(t,{idToken:r}));z(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?bp(o.providerUserInfo):[],u=Sy(n.providerData,a),d=n.isAnonymous,h=!(n.email&&o.passwordHash)&&!u?.length,p=d?h:!1,I={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new yi(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,I)})}function eu(n){return v(this,null,function*(){let e=Ye(n);yield Ws(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Sy(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bp(n){return n.map(e=>{var{providerId:t}=e,r=Fa(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Cy(n,e){return v(this,null,function*(){let t=yield wp(n,{},()=>v(null,null,function*(){let r=li({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=yield Tp(n,i,"/v1/token",`key=${o}`),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:u,body:r};return n.emulatorConfig&&ft(n.emulatorConfig.host)&&(d.credentials="include"),js.fetch()(a,d)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Ry(n,e){return v(this,null,function*(){return rr(n,"POST","/v2/accounts:revokeToken",Xc(n,e))})}var gi=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){z(e.length!==0,"internal-error");let t=sp(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Cy(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(z(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Mt("not implemented")}};function hn(n,e){z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Fa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new yi(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield _i(this,this.stsTokenManager.getToken(this.auth,e));return z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Jc(this,e)}reload(){return eu(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ws(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Ge(this.auth.app))return Promise.reject(Dn(this.auth));let e=yield this.getIdToken();return yield _i(this,by(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,u,d,h,p;let I=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(i=t.email)!==null&&i!==void 0?i:void 0,P=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,V=(a=t.photoURL)!==null&&a!==void 0?a:void 0,q=(u=t.tenantId)!==null&&u!==void 0?u:void 0,O=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,X=(h=t.createdAt)!==null&&h!==void 0?h:void 0,Q=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:H,emailVerified:Y,isAnonymous:ye,providerData:re,stsTokenManager:A}=t;z(H&&A,e,"internal-error");let m=gi.fromJSON(this.name,A);z(typeof H=="string",e,"internal-error"),hn(I,e.name),hn(T,e.name),z(typeof Y=="boolean",e,"internal-error"),z(typeof ye=="boolean",e,"internal-error"),hn(P,e.name),hn(V,e.name),hn(q,e.name),hn(O,e.name),hn(X,e.name),hn(Q,e.name);let _=new n({uid:H,auth:e,email:T,emailVerified:Y,displayName:I,isAnonymous:ye,photoURL:V,phoneNumber:P,tenantId:q,stsTokenManager:m,createdAt:X,lastLoginAt:Q});return re&&Array.isArray(re)&&(_.providerData=re.map(w=>Object.assign({},w))),O&&(_._redirectEventId=O),_}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new gi;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ws(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?bp(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new gi;u.updateFromIdToken(r);let d=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new yi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,h),d})}};var op=new Map;function Vt(n){mn(n instanceof Function,"Expected a class definition");let e=op.get(n);return e?(mn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,op.set(n,e),e)}var ky=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Mc=ky;function Us(n,e,t){return`firebase:${n}:${e}:${t}`}var Gs=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Us(this.userKey,i.apiKey,o),this.fullPersistenceKey=Us("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield zs(this.auth,{idToken:e}).catch(()=>{});return t?fn._fromGetAccountInfoResponse(this.auth,t,e):null}return fn._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Vt(Mc),e,r);let i=(yield Promise.all(t.map(h=>v(null,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),o=i[0]||Vt(Mc),a=Us(r,e.config.apiKey,e.name),u=null;for(let h of t)try{let p=yield h._get(a);if(p){let I;if(typeof p=="string"){let T=yield zs(e,{idToken:p}).catch(()=>{});if(!T)break;I=yield fn._fromGetAccountInfoResponse(e,T,p)}else I=fn._fromJSON(e,p);h!==o&&(u=I),o=h;break}}catch{}let d=i.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new n(o,e,r):(o=d[0],u&&(yield o._set(a,u.toJSON())),yield Promise.all(t.map(h=>v(null,null,function*(){if(h!==o)try{yield h._remove(a)}catch{}}))),new n(o,e,r))})}};function ap(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ap(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pp(e))return"Blackberry";if(xp(e))return"Webos";if(Sp(e))return"Safari";if((e.includes("chrome/")||Cp(e))&&!e.includes("edge/"))return"Chrome";if(kp(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ap(n=Ae()){return/firefox\//i.test(n)}function Sp(n=Ae()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cp(n=Ae()){return/crios\//i.test(n)}function Rp(n=Ae()){return/iemobile/i.test(n)}function kp(n=Ae()){return/android/i.test(n)}function Pp(n=Ae()){return/blackberry/i.test(n)}function xp(n=Ae()){return/webos/i.test(n)}function tu(n=Ae()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Py(n=Ae()){var e;return tu(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xy(){return bf()&&document.documentMode===10}function Dp(n=Ae()){return tu(n)||kp(n)||xp(n)||Pp(n)||/windows phone/i.test(n)||Rp(n)}function Np(n,e=[]){let t;switch(n){case"Browser":t=ap(Ae());break;case"Worker":t=`${ap(Ae())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_t}/${r}`}var Vc=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,u)=>{try{let d=e(o);a(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Dy(t){return v(this,arguments,function*(n,e={}){return rr(n,"GET","/v2/passwordPolicy",Xc(n,e))})}var Ny=6,Fc=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Ny,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,u;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Uc=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hs(this),this.idTokenSubscription=new Hs(this),this.beforeStateQueue=new Vc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ep,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vt(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Gs.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield zs(this,{idToken:e}),r=yield fn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Ge(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,d=yield this.tryRedirectSignIn(e);(!a||a===u)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ws(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=vy()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Ge(this.app))return Promise.reject(Dn(this));let t=e?Ye(e):null;return t&&z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Ge(this.app)?Promise.reject(Dn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ge(this.app)?Promise.reject(Dn(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Vt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Dy(this),t=new Fc(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Ry(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Vt(e)||this._popupRedirectResolver;z(t,this,"argument-error"),this.redirectPersistenceManager=yield Gs.create(this,[Vt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let d=e.addObserver(t,r,i);return()=>{a=!0,d()}}else{let d=e.addObserver(t);return()=>{a=!0,d()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Np(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Ge(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&gy(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function nu(n){return Ye(n)}var Hs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rf(t=>this.observer=t)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ru={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Oy(n){ru=n}function Ly(n){return ru.loadJS(n)}function My(){return ru.gapiScript}function Op(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function iu(n,e){let t=cn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(pt(o,e??{}))return i;pn(i,"already-initialized")}return t.initialize({options:e})}function Vy(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function su(n,e,t){let r=nu(n);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=Lp(e),{host:a,port:u}=Fy(e),d=u===null?"":`:${u}`,h={url:`${o}//${a}${d}/`},p=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(pt(h,r.config.emulator)&&pt(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,ft(a)?(er(`${o}//${a}${d}`),tr("Auth",!0)):i||Uy()}function Lp(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Fy(n){let e=Lp(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:cp(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:cp(a)}}}function cp(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Uy(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ks=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mt("not implemented")}_getIdTokenResponse(e){return Mt("not implemented")}_linkToIdToken(e,t){return Mt("not implemented")}_getReauthenticationResolver(e){return Mt("not implemented")}};function xc(n,e){return v(this,null,function*(){return Ty(n,"POST","/v1/accounts:signInWithIdp",Xc(n,e))})}var Qs=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bc=class extends Qs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var vi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield fn._fromIdTokenResponse(e,r,i),a=up(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=up(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function up(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var qc=class n extends je{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Mp(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(n,o,e,r):o})}function By(n,e,t=!1){return v(this,null,function*(){let r=yield _i(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return vi._forOperation(n,"link",r)})}function qy(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Ge(r.app))return Promise.reject(Dn(r));let i="reauthenticate";try{let o=yield _i(n,Mp(r,i,e,n),t);z(o.idToken,r,"internal-error");let a=Zc(o.idToken);z(a,r,"internal-error");let{sub:u}=a;return z(n.uid===u,r,"user-mismatch"),vi._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&pn(r,"user-mismatch"),o}})}function $y(n,e,t=!1){return v(this,null,function*(){if(Ge(n.app))return Promise.reject(Dn(n));let r="signIn",i=yield Mp(n,r,e),o=yield vi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function ou(n,e,t,r){return Ye(n).onIdTokenChanged(e,t,r)}function au(n,e,t){return Ye(n).beforeAuthStateChanged(e,t)}var Ys="__sak";var Xs=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ys,"1"),this.storage.removeItem(Ys),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var jy=1e3,zy=10,Wy=(()=>{class n extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dp(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,d,h)=>{this.notifyListeners(u,h)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);xy()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,zy):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},jy)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Xt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Xt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Xt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Vp=Wy;var Gy=(()=>{class n extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),cu=Gy;function Hy(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Ky=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,u=this.handlersMap[o];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let d=Array.from(u).map(p=>v(this,null,function*(){return p(r.origin,a)})),h=yield Hy(d);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:h})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Fp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var $c=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,d)=>{let h=Fp("",20);i.port1.start();let p=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(I){let T=I;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(T.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function Et(){return window}function Qy(n){Et().location.href=n}function Up(){return typeof Et().WorkerGlobalScope<"u"&&typeof Et().importScripts=="function"}function Yy(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Xy(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Jy(){return Up()?self:null}var Bp="firebaseLocalStorageDb",Zy=1,Js="firebaseLocalStorage",qp="fbase_key",Ln=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function eo(n,e){return n.transaction([Js],e?"readwrite":"readonly").objectStore(Js)}function ev(){let n=indexedDB.deleteDatabase(Bp);return new Ln(n).toPromise()}function jc(){let n=indexedDB.open(Bp,Zy);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Js,{keyPath:qp})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Js)?e(r):(r.close(),yield ev(),e(yield jc()))}))})}function lp(n,e,t){return v(this,null,function*(){let r=eo(n,!0).put({[qp]:e,value:t});return new Ln(r).toPromise()})}function tv(n,e){return v(this,null,function*(){let t=eo(n,!1).get(e),r=yield new Ln(t).toPromise();return r===void 0?null:r.value})}function dp(n,e){let t=eo(n,!0).delete(e);return new Ln(t).toPromise()}var nv=800,rv=3,iv=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield jc(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>rv)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return Up()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=Ky._getInstance(Jy()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Yy(),!this.activeServiceWorker)return;this.sender=new $c(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Xy()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield jc();return yield lp(t,Ys,"1"),yield dp(t,Ys),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>lp(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>tv(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>dp(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let a=eo(o,!1).getAll();return new Ln(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),nv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),$p=iv;var lA=Op("rcb"),dA=new On(3e4,6e4);function sv(n,e){return e?Vt(e):(z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ei=class extends Ks{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ov(n){return $y(n.auth,new Ei(n),n.bypassAuthState)}function av(n){let{auth:e,user:t}=n;return z(t,e,"internal-error"),qy(t,new Ei(n),n.bypassAuthState)}function cv(n){return v(this,null,function*(){let{auth:e,user:t}=n;return z(t,e,"internal-error"),By(t,new Ei(n),n.bypassAuthState)})}var zc=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(d))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ov;case"linkViaPopup":case"linkViaRedirect":return cv;case"reauthViaPopup":case"reauthViaRedirect":return av;default:pn(this.auth,"internal-error")}}resolve(e){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hA=new On(2e3,1e4);var uv="pendingRedirect",Bs=new Map,Wc=class n extends zc{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Bs.get(this.auth._key());if(!e){try{let r=(yield lv(this.resolver,this.auth))?yield Xt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bs.set(this.auth._key(),e)}return this.bypassAuthState||Bs.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Xt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Xt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function lv(n,e){return v(this,null,function*(){let t=fv(e),r=hv(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function dv(n,e){Bs.set(n._key(),e)}function hv(n){return Vt(n._redirectPersistence)}function fv(n){return Us(uv,n.config.apiKey,n.name)}function pv(n,e,t=!1){return v(this,null,function*(){if(Ge(n.app))return Promise.reject(Dn(n));let r=nu(n),i=sv(r,e),a=yield new Wc(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var mv=10*60*1e3,Gc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gv(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!jp(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Nn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mv&&this.cachedEventUids.clear(),this.cachedEventUids.has(hp(e))}saveEventToCache(e){this.cachedEventUids.add(hp(e)),this.lastProcessedEventTime=Date.now()}};function hp(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function jp({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function gv(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jp(n);default:return!1}}function _v(t){return v(this,arguments,function*(n,e={}){return rr(n,"GET","/v1/projects",e)})}var yv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vv=/^https?/;function Ev(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield _v(n);for(let t of e)try{if(Iv(t))return}catch{}pn(n,"unauthorized-domain")})}function Iv(n){let e=Nc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!vv.test(t))return!1;if(yv.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var wv=new On(3e4,6e4);function fp(){let n=Et().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Tv(n){return new Promise((e,t)=>{var r,i,o;function a(){fp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fp(),t(Nn(n,"network-request-failed"))},timeout:wv.get()})}if(!((i=(r=Et().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Et().gapi)===null||o===void 0)&&o.load)a();else{let u=Op("iframefcb");return Et()[u]=()=>{gapi.load?a():t(Nn(n,"network-request-failed"))},Ly(`${My()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw qs=null,e})}var qs=null;function bv(n){return qs=qs||Tv(n),qs}var Av=new On(5e3,15e3),Sv="__/auth/iframe",Cv="emulator/auth/iframe",Rv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pv(n){let e=n.config;z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Yc(e,Cv):`https://${n.config.authDomain}/${Sv}`,r={apiKey:e.apiKey,appName:n.name,v:_t},i=kv.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${li(r).slice(1)}`}function xv(n){return v(this,null,function*(){let e=yield bv(n),t=Et().gapi;return z(t,n,"internal-error"),e.open({where:document.body,url:Pv(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rv,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Nn(n,"network-request-failed"),u=Et().setTimeout(()=>{o(a)},Av.get());function d(){Et().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{o(a)})})))})}var Dv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nv=500,Ov=600,Lv="_blank",Mv="http://localhost",Zs=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Vv(n,e,t,r=Nv,i=Ov){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",d=Object.assign(Object.assign({},Dv),{width:r.toString(),height:i.toString(),top:o,left:a}),h=Ae().toLowerCase();t&&(u=Cp(h)?Lv:t),Ap(h)&&(e=e||Mv,d.scrollbars="yes");let p=Object.entries(d).reduce((T,[P,V])=>`${T}${P}=${V},`,"");if(Py(h)&&u!=="_self")return Fv(e||"",u),new Zs(null);let I=window.open(e||"",u,p);z(I,n,"popup-blocked");try{I.focus()}catch{}return new Zs(I)}function Fv(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Uv="__/auth/handler",Bv="emulator/auth/handler",qv=encodeURIComponent("fac");function pp(n,e,t,r,i,o){return v(this,null,function*(){z(n.config.authDomain,n,"auth-domain-config-required"),z(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_t,eventId:i};if(e instanceof Qs){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Cf(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,I]of Object.entries(o||{}))a[p]=I}if(e instanceof Bc){let p=e.getScopes().filter(I=>I!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let p of Object.keys(u))u[p]===void 0&&delete u[p];let d=yield n._getAppCheckToken(),h=d?`#${qv}=${encodeURIComponent(d)}`:"";return`${$v(n)}?${li(u).slice(1)}${h}`})}function $v({config:n}){return n.emulator?Yc(n,Bv):`https://${n.authDomain}/${Uv}`}var Dc="webStorageSupport",Hc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cu,this._completeRedirectFn=pv,this._overrideRedirectResult=dv}_openPopup(e,t,r,i){return v(this,null,function*(){var o;mn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield pp(e,t,r,Nc(),i);return Vv(e,a,Fp())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield pp(e,t,r,Nc(),i);return Qy(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(mn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield xv(e),r=new Gc(e);return t.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Dc,{type:Dc},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[Dc];a!==void 0&&t(!!a),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ev(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dp()||Sp()||tu()}},zp=Hc;var mp="@firebase/auth",gp="1.10.8";var Kc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function jv(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zv(n){Xe(new xe("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;z(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Np(n)},h=new Uc(r,i,o,d);return Vy(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xe(new xe("auth-internal",e=>{let t=nu(e.getProvider("auth").getImmediate());return(r=>new Kc(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ae(mp,gp,jv(n)),ae(mp,gp,"esm2017")}var Wv=5*60,Gv=ac("authIdTokenMaxAge")||Wv,_p=null,Hv=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Gv)return;let i=t?.token;_p!==i&&(_p=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function uu(n=Ot()){let e=cn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=iu(n,{popupRedirectResolver:zp,persistence:[$p,Vp,cu]}),r=ac("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=Hv(o.toString());au(t,a,()=>a(t.currentUser)),ou(t,u=>a(u))}}let i=sc("auth");return i&&su(t,`http://${i}`),t}function Kv(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Oy({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Nn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Kv().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zv("Browser");var Wp="auth",Ii=class{constructor(e){return e}},Mn=class{constructor(){return un(Wp)}};var lu=new ut("angularfire2.auth-instances");function qE(n,e){let t=xn(Wp,n,e);return t&&new Ii(t)}function $E(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ii(r)}}var jE={provide:Mn,deps:[[new ke,lu]]},zE={provide:Ii,useFactory:qE,deps:[[new ke,lu],st]};function Gp(n,...e){return ae("angularfire",yt.full,"auth"),lt([zE,jE,{provide:lu,useFactory:$E(n),multi:!0,deps:[We,Je,vt,Lt,[new ke,dn],...e]}])}var Hp=it(uu,!0);var Kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qp={};var Ft,du;(function(){var n;function e(A,m){function _(){}_.prototype=m.prototype,A.D=m.prototype,A.prototype=new _,A.prototype.constructor=A,A.C=function(w,S,R){for(var g=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)g[Ct-2]=arguments[Ct];return m.prototype[S].apply(w,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,m,_){_||(_=0);var w=Array(16);if(typeof m=="string")for(var S=0;16>S;++S)w[S]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(S=0;16>S;++S)w[S]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=A.g[0],_=A.g[1],S=A.g[2];var R=A.g[3],g=m+(R^_&(S^R))+w[0]+3614090360&4294967295;m=_+(g<<7&4294967295|g>>>25),g=R+(S^m&(_^S))+w[1]+3905402710&4294967295,R=m+(g<<12&4294967295|g>>>20),g=S+(_^R&(m^_))+w[2]+606105819&4294967295,S=R+(g<<17&4294967295|g>>>15),g=_+(m^S&(R^m))+w[3]+3250441966&4294967295,_=S+(g<<22&4294967295|g>>>10),g=m+(R^_&(S^R))+w[4]+4118548399&4294967295,m=_+(g<<7&4294967295|g>>>25),g=R+(S^m&(_^S))+w[5]+1200080426&4294967295,R=m+(g<<12&4294967295|g>>>20),g=S+(_^R&(m^_))+w[6]+2821735955&4294967295,S=R+(g<<17&4294967295|g>>>15),g=_+(m^S&(R^m))+w[7]+4249261313&4294967295,_=S+(g<<22&4294967295|g>>>10),g=m+(R^_&(S^R))+w[8]+1770035416&4294967295,m=_+(g<<7&4294967295|g>>>25),g=R+(S^m&(_^S))+w[9]+2336552879&4294967295,R=m+(g<<12&4294967295|g>>>20),g=S+(_^R&(m^_))+w[10]+4294925233&4294967295,S=R+(g<<17&4294967295|g>>>15),g=_+(m^S&(R^m))+w[11]+2304563134&4294967295,_=S+(g<<22&4294967295|g>>>10),g=m+(R^_&(S^R))+w[12]+1804603682&4294967295,m=_+(g<<7&4294967295|g>>>25),g=R+(S^m&(_^S))+w[13]+4254626195&4294967295,R=m+(g<<12&4294967295|g>>>20),g=S+(_^R&(m^_))+w[14]+2792965006&4294967295,S=R+(g<<17&4294967295|g>>>15),g=_+(m^S&(R^m))+w[15]+1236535329&4294967295,_=S+(g<<22&4294967295|g>>>10),g=m+(S^R&(_^S))+w[1]+4129170786&4294967295,m=_+(g<<5&4294967295|g>>>27),g=R+(_^S&(m^_))+w[6]+3225465664&4294967295,R=m+(g<<9&4294967295|g>>>23),g=S+(m^_&(R^m))+w[11]+643717713&4294967295,S=R+(g<<14&4294967295|g>>>18),g=_+(R^m&(S^R))+w[0]+3921069994&4294967295,_=S+(g<<20&4294967295|g>>>12),g=m+(S^R&(_^S))+w[5]+3593408605&4294967295,m=_+(g<<5&4294967295|g>>>27),g=R+(_^S&(m^_))+w[10]+38016083&4294967295,R=m+(g<<9&4294967295|g>>>23),g=S+(m^_&(R^m))+w[15]+3634488961&4294967295,S=R+(g<<14&4294967295|g>>>18),g=_+(R^m&(S^R))+w[4]+3889429448&4294967295,_=S+(g<<20&4294967295|g>>>12),g=m+(S^R&(_^S))+w[9]+568446438&4294967295,m=_+(g<<5&4294967295|g>>>27),g=R+(_^S&(m^_))+w[14]+3275163606&4294967295,R=m+(g<<9&4294967295|g>>>23),g=S+(m^_&(R^m))+w[3]+4107603335&4294967295,S=R+(g<<14&4294967295|g>>>18),g=_+(R^m&(S^R))+w[8]+1163531501&4294967295,_=S+(g<<20&4294967295|g>>>12),g=m+(S^R&(_^S))+w[13]+2850285829&4294967295,m=_+(g<<5&4294967295|g>>>27),g=R+(_^S&(m^_))+w[2]+4243563512&4294967295,R=m+(g<<9&4294967295|g>>>23),g=S+(m^_&(R^m))+w[7]+1735328473&4294967295,S=R+(g<<14&4294967295|g>>>18),g=_+(R^m&(S^R))+w[12]+2368359562&4294967295,_=S+(g<<20&4294967295|g>>>12),g=m+(_^S^R)+w[5]+4294588738&4294967295,m=_+(g<<4&4294967295|g>>>28),g=R+(m^_^S)+w[8]+2272392833&4294967295,R=m+(g<<11&4294967295|g>>>21),g=S+(R^m^_)+w[11]+1839030562&4294967295,S=R+(g<<16&4294967295|g>>>16),g=_+(S^R^m)+w[14]+4259657740&4294967295,_=S+(g<<23&4294967295|g>>>9),g=m+(_^S^R)+w[1]+2763975236&4294967295,m=_+(g<<4&4294967295|g>>>28),g=R+(m^_^S)+w[4]+1272893353&4294967295,R=m+(g<<11&4294967295|g>>>21),g=S+(R^m^_)+w[7]+4139469664&4294967295,S=R+(g<<16&4294967295|g>>>16),g=_+(S^R^m)+w[10]+3200236656&4294967295,_=S+(g<<23&4294967295|g>>>9),g=m+(_^S^R)+w[13]+681279174&4294967295,m=_+(g<<4&4294967295|g>>>28),g=R+(m^_^S)+w[0]+3936430074&4294967295,R=m+(g<<11&4294967295|g>>>21),g=S+(R^m^_)+w[3]+3572445317&4294967295,S=R+(g<<16&4294967295|g>>>16),g=_+(S^R^m)+w[6]+76029189&4294967295,_=S+(g<<23&4294967295|g>>>9),g=m+(_^S^R)+w[9]+3654602809&4294967295,m=_+(g<<4&4294967295|g>>>28),g=R+(m^_^S)+w[12]+3873151461&4294967295,R=m+(g<<11&4294967295|g>>>21),g=S+(R^m^_)+w[15]+530742520&4294967295,S=R+(g<<16&4294967295|g>>>16),g=_+(S^R^m)+w[2]+3299628645&4294967295,_=S+(g<<23&4294967295|g>>>9),g=m+(S^(_|~R))+w[0]+4096336452&4294967295,m=_+(g<<6&4294967295|g>>>26),g=R+(_^(m|~S))+w[7]+1126891415&4294967295,R=m+(g<<10&4294967295|g>>>22),g=S+(m^(R|~_))+w[14]+2878612391&4294967295,S=R+(g<<15&4294967295|g>>>17),g=_+(R^(S|~m))+w[5]+4237533241&4294967295,_=S+(g<<21&4294967295|g>>>11),g=m+(S^(_|~R))+w[12]+1700485571&4294967295,m=_+(g<<6&4294967295|g>>>26),g=R+(_^(m|~S))+w[3]+2399980690&4294967295,R=m+(g<<10&4294967295|g>>>22),g=S+(m^(R|~_))+w[10]+4293915773&4294967295,S=R+(g<<15&4294967295|g>>>17),g=_+(R^(S|~m))+w[1]+2240044497&4294967295,_=S+(g<<21&4294967295|g>>>11),g=m+(S^(_|~R))+w[8]+1873313359&4294967295,m=_+(g<<6&4294967295|g>>>26),g=R+(_^(m|~S))+w[15]+4264355552&4294967295,R=m+(g<<10&4294967295|g>>>22),g=S+(m^(R|~_))+w[6]+2734768916&4294967295,S=R+(g<<15&4294967295|g>>>17),g=_+(R^(S|~m))+w[13]+1309151649&4294967295,_=S+(g<<21&4294967295|g>>>11),g=m+(S^(_|~R))+w[4]+4149444226&4294967295,m=_+(g<<6&4294967295|g>>>26),g=R+(_^(m|~S))+w[11]+3174756917&4294967295,R=m+(g<<10&4294967295|g>>>22),g=S+(m^(R|~_))+w[2]+718787259&4294967295,S=R+(g<<15&4294967295|g>>>17),g=_+(R^(S|~m))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+m&4294967295,A.g[1]=A.g[1]+(S+(g<<21&4294967295|g>>>11))&4294967295,A.g[2]=A.g[2]+S&4294967295,A.g[3]=A.g[3]+R&4294967295}r.prototype.u=function(A,m){m===void 0&&(m=A.length);for(var _=m-this.blockSize,w=this.B,S=this.h,R=0;R<m;){if(S==0)for(;R<=_;)i(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<m;)if(w[S++]=A.charCodeAt(R++),S==this.blockSize){i(this,w),S=0;break}}else for(;R<m;)if(w[S++]=A[R++],S==this.blockSize){i(this,w),S=0;break}}this.h=S,this.o+=m},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var m=1;m<A.length-8;++m)A[m]=0;var _=8*this.o;for(m=A.length-8;m<A.length;++m)A[m]=_&255,_/=256;for(this.u(A),A=Array(16),m=_=0;4>m;++m)for(var w=0;32>w;w+=8)A[_++]=this.g[m]>>>w&255;return A};function o(A,m){var _=u;return Object.prototype.hasOwnProperty.call(_,A)?_[A]:_[A]=m(A)}function a(A,m){this.h=m;for(var _=[],w=!0,S=A.length-1;0<=S;S--){var R=A[S]|0;w&&R==m||(_[S]=R,w=!1)}this.g=_}var u={};function d(A){return-128<=A&&128>A?o(A,function(m){return new a([m|0],0>m?-1:0)}):new a([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return I;if(0>A)return O(h(-A));for(var m=[],_=1,w=0;A>=_;w++)m[w]=A/_|0,_*=4294967296;return new a(m,0)}function p(A,m){if(A.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(A.charAt(0)=="-")return O(p(A.substring(1),m));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(m,8)),w=I,S=0;S<A.length;S+=8){var R=Math.min(8,A.length-S),g=parseInt(A.substring(S,S+R),m);8>R?(R=h(Math.pow(m,R)),w=w.j(R).add(h(g))):(w=w.j(_),w=w.add(h(g)))}return w}var I=d(0),T=d(1),P=d(16777216);n=a.prototype,n.m=function(){if(q(this))return-O(this).m();for(var A=0,m=1,_=0;_<this.g.length;_++){var w=this.i(_);A+=(0<=w?w:4294967296+w)*m,m*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if(q(this))return"-"+O(this).toString(A);for(var m=h(Math.pow(A,6)),_=this,w="";;){var S=Y(_,m).g;_=X(_,S.j(m));var R=((0<_.g.length?_.g[0]:_.h)>>>0).toString(A);if(_=S,V(_))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(var m=0;m<A.g.length;m++)if(A.g[m]!=0)return!1;return!0}function q(A){return A.h==-1}n.l=function(A){return A=X(this,A),q(A)?-1:V(A)?0:1};function O(A){for(var m=A.g.length,_=[],w=0;w<m;w++)_[w]=~A.g[w];return new a(_,~A.h).add(T)}n.abs=function(){return q(this)?O(this):this},n.add=function(A){for(var m=Math.max(this.g.length,A.g.length),_=[],w=0,S=0;S<=m;S++){var R=w+(this.i(S)&65535)+(A.i(S)&65535),g=(R>>>16)+(this.i(S)>>>16)+(A.i(S)>>>16);w=g>>>16,R&=65535,g&=65535,_[S]=g<<16|R}return new a(_,_[_.length-1]&-2147483648?-1:0)};function X(A,m){return A.add(O(m))}n.j=function(A){if(V(this)||V(A))return I;if(q(this))return q(A)?O(this).j(O(A)):O(O(this).j(A));if(q(A))return O(this.j(O(A)));if(0>this.l(P)&&0>A.l(P))return h(this.m()*A.m());for(var m=this.g.length+A.g.length,_=[],w=0;w<2*m;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var S=0;S<A.g.length;S++){var R=this.i(w)>>>16,g=this.i(w)&65535,Ct=A.i(S)>>>16,Or=A.i(S)&65535;_[2*w+2*S]+=g*Or,Q(_,2*w+2*S),_[2*w+2*S+1]+=R*Or,Q(_,2*w+2*S+1),_[2*w+2*S+1]+=g*Ct,Q(_,2*w+2*S+1),_[2*w+2*S+2]+=R*Ct,Q(_,2*w+2*S+2)}for(w=0;w<m;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=m;w<2*m;w++)_[w]=0;return new a(_,0)};function Q(A,m){for(;(A[m]&65535)!=A[m];)A[m+1]+=A[m]>>>16,A[m]&=65535,m++}function H(A,m){this.g=A,this.h=m}function Y(A,m){if(V(m))throw Error("division by zero");if(V(A))return new H(I,I);if(q(A))return m=Y(O(A),m),new H(O(m.g),O(m.h));if(q(m))return m=Y(A,O(m)),new H(O(m.g),m.h);if(30<A.g.length){if(q(A)||q(m))throw Error("slowDivide_ only works with positive integers.");for(var _=T,w=m;0>=w.l(A);)_=ye(_),w=ye(w);var S=re(_,1),R=re(w,1);for(w=re(w,2),_=re(_,2);!V(w);){var g=R.add(w);0>=g.l(A)&&(S=S.add(_),R=g),w=re(w,1),_=re(_,1)}return m=X(A,S.j(m)),new H(S,m)}for(S=I;0<=A.l(m);){for(_=Math.max(1,Math.floor(A.m()/m.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=h(_),g=R.j(m);q(g)||0<g.l(A);)_-=w,R=h(_),g=R.j(m);V(R)&&(R=T),S=S.add(R),A=X(A,g)}return new H(S,A)}n.A=function(A){return Y(this,A).h},n.and=function(A){for(var m=Math.max(this.g.length,A.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)&A.i(w);return new a(_,this.h&A.h)},n.or=function(A){for(var m=Math.max(this.g.length,A.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)|A.i(w);return new a(_,this.h|A.h)},n.xor=function(A){for(var m=Math.max(this.g.length,A.g.length),_=[],w=0;w<m;w++)_[w]=this.i(w)^A.i(w);return new a(_,this.h^A.h)};function ye(A){for(var m=A.g.length+1,_=[],w=0;w<m;w++)_[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(_,A.h)}function re(A,m){var _=m>>5;m%=32;for(var w=A.g.length-_,S=[],R=0;R<w;R++)S[R]=0<m?A.i(R+_)>>>m|A.i(R+_+1)<<32-m:A.i(R+_);return new a(S,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,du=Qp.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Ft=Qp.Integer=a}).apply(typeof Kp<"u"?Kp:typeof self<"u"?self:typeof window<"u"?window:{});var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ut={};var hu,WE,ir,fu,wi,no,pu,mu,gu;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,c,l){return s==Array.prototype||s==Object.prototype||(s[c]=l.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof to=="object"&&to];for(var c=0;c<s.length;++c){var l=s[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=t(this);function i(s,c){if(c)e:{var l=r;s=s.split(".");for(var f=0;f<s.length-1;f++){var C=s[f];if(!(C in l))break e;l=l[C]}s=s[s.length-1],f=l[s],c=c(f),c!=f&&c!=null&&e(l,s,{configurable:!0,writable:!0,value:c})}}function o(s,c){s instanceof String&&(s+="");var l=0,f=!1,C={next:function(){if(!f&&l<s.length){var k=l++;return{value:c(k,s[k]),done:!1}}return f=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(s){return s||function(){return o(this,function(c,l){return l})}});var a=a||{},u=this||self;function d(s){var c=typeof s;return c=c!="object"?c:s?Array.isArray(s)?"array":c:"null",c=="array"||c=="object"&&typeof s.length=="number"}function h(s){var c=typeof s;return c=="object"&&s!=null||c=="function"}function p(s,c,l){return s.call.apply(s.bind,arguments)}function I(s,c,l){if(!s)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,f),s.apply(c,C)}}return function(){return s.apply(c,arguments)}}function T(s,c,l){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:I,T.apply(null,arguments)}function P(s,c){var l=Array.prototype.slice.call(arguments,1);return function(){var f=l.slice();return f.push.apply(f,arguments),s.apply(this,f)}}function V(s,c){function l(){}l.prototype=c.prototype,s.aa=c.prototype,s.prototype=new l,s.prototype.constructor=s,s.Qb=function(f,C,k){for(var L=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)L[oe-2]=arguments[oe];return c.prototype[C].apply(f,L)}}function q(s){let c=s.length;if(0<c){let l=Array(c);for(let f=0;f<c;f++)l[f]=s[f];return l}return[]}function O(s,c){for(let l=1;l<arguments.length;l++){let f=arguments[l];if(d(f)){let C=s.length||0,k=f.length||0;s.length=C+k;for(let L=0;L<k;L++)s[C+L]=f[L]}else s.push(f)}}class X{constructor(c,l){this.i=c,this.j=l,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function Q(s){return/^[\s\xa0]*$/.test(s)}function H(){var s=u.navigator;return s&&(s=s.userAgent)?s:""}function Y(s){return Y[" "](s),s}Y[" "]=function(){};var ye=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function re(s,c,l){for(let f in s)c.call(l,s[f],f,s)}function A(s,c){for(let l in s)c.call(void 0,s[l],l,s)}function m(s){let c={};for(let l in s)c[l]=s[l];return c}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(s,c){let l,f;for(let C=1;C<arguments.length;C++){f=arguments[C];for(l in f)s[l]=f[l];for(let k=0;k<_.length;k++)l=_[k],Object.prototype.hasOwnProperty.call(f,l)&&(s[l]=f[l])}}function S(s){var c=1;s=s.split(":");let l=[];for(;0<c&&s.length;)l.push(s.shift()),c--;return s.length&&l.push(s.join(":")),l}function R(s){u.setTimeout(()=>{throw s},0)}function g(){var s=fa;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class Ct{constructor(){this.h=this.g=null}add(c,l){let f=Or.get();f.set(c,l),this.h?this.h.next=f:this.g=f,this.h=f}}var Or=new X(()=>new b0,s=>s.reset());class b0{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let Lr,Mr=!1,fa=new Ct,Td=()=>{let s=u.Promise.resolve(void 0);Lr=()=>{s.then(A0)}};var A0=()=>{for(var s;s=g();){try{s.h.call(s.g)}catch(l){R(l)}var c=Or;c.j(s),100>c.h&&(c.h++,s.next=c.g,c.g=s)}Mr=!1};function Ht(){this.s=this.s,this.C=this.C}Ht.prototype.s=!1,Ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(s,c){this.type=s,this.g=this.target=c,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var S0=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var s=!1,c=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let l=()=>{};u.addEventListener("test",l,c),u.removeEventListener("test",l,c)}catch{}return s}();function Vr(s,c){if(De.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var l=this.type=s.type,f=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=c,c=s.relatedTarget){if(ye){e:{try{Y(c.nodeName);var C=!0;break e}catch{}C=!1}C||(c=null)}}else l=="mouseover"?c=s.fromElement:l=="mouseout"&&(c=s.toElement);this.relatedTarget=c,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:C0[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Vr.aa.h.call(this)}}V(Vr,De);var C0={2:"touch",3:"pen",4:"mouse"};Vr.prototype.h=function(){Vr.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var Fr="closure_listenable_"+(1e6*Math.random()|0),R0=0;function k0(s,c,l,f,C){this.listener=s,this.proxy=null,this.src=c,this.type=l,this.capture=!!f,this.ha=C,this.key=++R0,this.da=this.fa=!1}function Ki(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Qi(s){this.src=s,this.g={},this.h=0}Qi.prototype.add=function(s,c,l,f,C){var k=s.toString();s=this.g[k],s||(s=this.g[k]=[],this.h++);var L=ma(s,c,f,C);return-1<L?(c=s[L],l||(c.fa=!1)):(c=new k0(c,this.src,k,!!f,C),c.fa=l,s.push(c)),c};function pa(s,c){var l=c.type;if(l in s.g){var f=s.g[l],C=Array.prototype.indexOf.call(f,c,void 0),k;(k=0<=C)&&Array.prototype.splice.call(f,C,1),k&&(Ki(c),s.g[l].length==0&&(delete s.g[l],s.h--))}}function ma(s,c,l,f){for(var C=0;C<s.length;++C){var k=s[C];if(!k.da&&k.listener==c&&k.capture==!!l&&k.ha==f)return C}return-1}var ga="closure_lm_"+(1e6*Math.random()|0),_a={};function bd(s,c,l,f,C){if(f&&f.once)return Sd(s,c,l,f,C);if(Array.isArray(c)){for(var k=0;k<c.length;k++)bd(s,c[k],l,f,C);return null}return l=Ia(l),s&&s[Fr]?s.K(c,l,h(f)?!!f.capture:!!f,C):Ad(s,c,l,!1,f,C)}function Ad(s,c,l,f,C,k){if(!c)throw Error("Invalid event type");var L=h(C)?!!C.capture:!!C,oe=va(s);if(oe||(s[ga]=oe=new Qi(s)),l=oe.add(c,l,f,L,k),l.proxy)return l;if(f=P0(),l.proxy=f,f.src=s,f.listener=l,s.addEventListener)S0||(C=L),C===void 0&&(C=!1),s.addEventListener(c.toString(),f,C);else if(s.attachEvent)s.attachEvent(Rd(c.toString()),f);else if(s.addListener&&s.removeListener)s.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return l}function P0(){function s(l){return c.call(s.src,s.listener,l)}let c=x0;return s}function Sd(s,c,l,f,C){if(Array.isArray(c)){for(var k=0;k<c.length;k++)Sd(s,c[k],l,f,C);return null}return l=Ia(l),s&&s[Fr]?s.L(c,l,h(f)?!!f.capture:!!f,C):Ad(s,c,l,!0,f,C)}function Cd(s,c,l,f,C){if(Array.isArray(c))for(var k=0;k<c.length;k++)Cd(s,c[k],l,f,C);else f=h(f)?!!f.capture:!!f,l=Ia(l),s&&s[Fr]?(s=s.i,c=String(c).toString(),c in s.g&&(k=s.g[c],l=ma(k,l,f,C),-1<l&&(Ki(k[l]),Array.prototype.splice.call(k,l,1),k.length==0&&(delete s.g[c],s.h--)))):s&&(s=va(s))&&(c=s.g[c.toString()],s=-1,c&&(s=ma(c,l,f,C)),(l=-1<s?c[s]:null)&&ya(l))}function ya(s){if(typeof s!="number"&&s&&!s.da){var c=s.src;if(c&&c[Fr])pa(c.i,s);else{var l=s.type,f=s.proxy;c.removeEventListener?c.removeEventListener(l,f,s.capture):c.detachEvent?c.detachEvent(Rd(l),f):c.addListener&&c.removeListener&&c.removeListener(f),(l=va(c))?(pa(l,s),l.h==0&&(l.src=null,c[ga]=null)):Ki(s)}}}function Rd(s){return s in _a?_a[s]:_a[s]="on"+s}function x0(s,c){if(s.da)s=!0;else{c=new Vr(c,this);var l=s.listener,f=s.ha||s.src;s.fa&&ya(s),s=l.call(f,c)}return s}function va(s){return s=s[ga],s instanceof Qi?s:null}var Ea="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ia(s){return typeof s=="function"?s:(s[Ea]||(s[Ea]=function(c){return s.handleEvent(c)}),s[Ea])}function Ne(){Ht.call(this),this.i=new Qi(this),this.M=this,this.F=null}V(Ne,Ht),Ne.prototype[Fr]=!0,Ne.prototype.removeEventListener=function(s,c,l,f){Cd(this,s,c,l,f)};function Be(s,c){var l,f=s.F;if(f)for(l=[];f;f=f.F)l.push(f);if(s=s.M,f=c.type||c,typeof c=="string")c=new De(c,s);else if(c instanceof De)c.target=c.target||s;else{var C=c;c=new De(f,s),w(c,C)}if(C=!0,l)for(var k=l.length-1;0<=k;k--){var L=c.g=l[k];C=Yi(L,f,!0,c)&&C}if(L=c.g=s,C=Yi(L,f,!0,c)&&C,C=Yi(L,f,!1,c)&&C,l)for(k=0;k<l.length;k++)L=c.g=l[k],C=Yi(L,f,!1,c)&&C}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var s=this.i,c;for(c in s.g){for(var l=s.g[c],f=0;f<l.length;f++)Ki(l[f]);delete s.g[c],s.h--}}this.F=null},Ne.prototype.K=function(s,c,l,f){return this.i.add(String(s),c,!1,l,f)},Ne.prototype.L=function(s,c,l,f){return this.i.add(String(s),c,!0,l,f)};function Yi(s,c,l,f){if(c=s.i.g[String(c)],!c)return!0;c=c.concat();for(var C=!0,k=0;k<c.length;++k){var L=c[k];if(L&&!L.da&&L.capture==l){var oe=L.listener,Re=L.ha||L.src;L.fa&&pa(s.i,L),C=oe.call(Re,f)!==!1&&C}}return C&&!f.defaultPrevented}function kd(s,c,l){if(typeof s=="function")l&&(s=T(s,l));else if(s&&typeof s.handleEvent=="function")s=T(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:u.setTimeout(s,c||0)}function Pd(s){s.g=kd(()=>{s.g=null,s.i&&(s.i=!1,Pd(s))},s.l);let c=s.h;s.h=null,s.m.apply(null,c)}class D0 extends Ht{constructor(c,l){super(),this.m=c,this.l=l,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Pd(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(s){Ht.call(this),this.h=s,this.g={}}V(Ur,Ht);var xd=[];function Dd(s){re(s.g,function(c,l){this.g.hasOwnProperty(l)&&ya(c)},s),s.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),Dd(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wa=u.JSON.stringify,N0=u.JSON.parse,O0=class{stringify(s){return u.JSON.stringify(s,void 0)}parse(s){return u.JSON.parse(s,void 0)}};function Ta(){}Ta.prototype.h=null;function Nd(s){return s.h||(s.h=s.i())}function Od(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ba(){De.call(this,"d")}V(ba,De);function Aa(){De.call(this,"c")}V(Aa,De);var In={},Ld=null;function Xi(){return Ld=Ld||new Ne}In.La="serverreachability";function Md(s){De.call(this,In.La,s)}V(Md,De);function qr(s){let c=Xi();Be(c,new Md(c))}In.STAT_EVENT="statevent";function Vd(s,c){De.call(this,In.STAT_EVENT,s),this.stat=c}V(Vd,De);function qe(s){let c=Xi();Be(c,new Vd(c,s))}In.Ma="timingevent";function Fd(s,c){De.call(this,In.Ma,s),this.size=c}V(Fd,De);function $r(s,c){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){s()},c)}function jr(){this.g=!0}jr.prototype.xa=function(){this.g=!1};function L0(s,c,l,f,C,k){s.info(function(){if(s.g)if(k)for(var L="",oe=k.split("&"),Re=0;Re<oe.length;Re++){var se=oe[Re].split("=");if(1<se.length){var Oe=se[0];se=se[1];var Le=Oe.split("_");L=2<=Le.length&&Le[1]=="type"?L+(Oe+"="+se+"&"):L+(Oe+"=redacted&")}}else L=null;else L=k;return"XMLHTTP REQ ("+f+") [attempt "+C+"]: "+c+`
`+l+`
`+L})}function M0(s,c,l,f,C,k,L){s.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+C+"]: "+c+`
`+l+`
`+k+" "+L})}function Wn(s,c,l,f){s.info(function(){return"XMLHTTP TEXT ("+c+"): "+F0(s,l)+(f?" "+f:"")})}function V0(s,c){s.info(function(){return"TIMEOUT: "+c})}jr.prototype.info=function(){};function F0(s,c){if(!s.g)return c;if(!c)return null;try{var l=JSON.parse(c);if(l){for(s=0;s<l.length;s++)if(Array.isArray(l[s])){var f=l[s];if(!(2>f.length)){var C=f[1];if(Array.isArray(C)&&!(1>C.length)){var k=C[0];if(k!="noop"&&k!="stop"&&k!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return wa(l)}catch{return c}}var Ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ud={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sa;function Zi(){}V(Zi,Ta),Zi.prototype.g=function(){return new XMLHttpRequest},Zi.prototype.i=function(){return{}},Sa=new Zi;function Kt(s,c,l,f){this.j=s,this.i=c,this.l=l,this.R=f||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bd}function Bd(){this.i=null,this.g="",this.h=!1}var qd={},Ca={};function Ra(s,c,l){s.L=1,s.v=rs(Rt(c)),s.m=l,s.P=!0,$d(s,null)}function $d(s,c){s.F=Date.now(),es(s),s.A=Rt(s.v);var l=s.A,f=s.R;Array.isArray(f)||(f=[String(f)]),nh(l.i,"t",f),s.C=0,l=s.j.J,s.h=new Bd,s.g=Eh(s.j,l?c:null,!s.m),0<s.O&&(s.M=new D0(T(s.Y,s,s.g),s.O)),c=s.U,l=s.g,f=s.ca;var C="readystatechange";Array.isArray(C)||(C&&(xd[0]=C.toString()),C=xd);for(var k=0;k<C.length;k++){var L=bd(l,C[k],f||c.handleEvent,!1,c.h||c);if(!L)break;c.g[L.key]=L}c=s.H?m(s.H):{},s.m?(s.u||(s.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,c)):(s.u="GET",s.g.ea(s.A,s.u,null,c)),qr(),L0(s.i,s.u,s.A,s.l,s.R,s.m)}Kt.prototype.ca=function(s){s=s.target;let c=this.M;c&&kt(s)==3?c.j():this.Y(s)},Kt.prototype.Y=function(s){try{if(s==this.g)e:{let Le=kt(this.g);var c=this.g.Ba();let Kn=this.g.Z();if(!(3>Le)&&(Le!=3||this.g&&(this.h.h||this.g.oa()||uh(this.g)))){this.J||Le!=4||c==7||(c==8||0>=Kn?qr(3):qr(2)),ka(this);var l=this.g.Z();this.X=l;t:if(jd(this)){var f=uh(this.g);s="";var C=f.length,k=kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),zr(this);var L="";break t}this.h.i=new u.TextDecoder}for(c=0;c<C;c++)this.h.h=!0,s+=this.h.i.decode(f[c],{stream:!(k&&c==C-1)});f.length=0,this.h.g+=s,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=l==200,M0(this.i,this.u,this.A,this.l,this.R,Le,l),this.o){if(this.T&&!this.K){t:{if(this.g){var oe,Re=this.g;if((oe=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(oe)){var se=oe;break t}}se=null}if(l=se)Wn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,l);else{this.o=!1,this.s=3,qe(12),wn(this),zr(this);break e}}if(this.P){l=!0;let tt;for(;!this.J&&this.C<L.length;)if(tt=U0(this,L),tt==Ca){Le==4&&(this.s=4,qe(14),l=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==qd){this.s=4,qe(15),Wn(this.i,this.l,L,"[Invalid Chunk]"),l=!1;break}else Wn(this.i,this.l,tt,null),Pa(this,tt);if(jd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||L.length!=0||this.h.h||(this.s=1,qe(16),l=!1),this.o=this.o&&l,!l)Wn(this.i,this.l,L,"[Invalid Chunked Response]"),wn(this),zr(this);else if(0<L.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Ma(Oe),Oe.M=!0,qe(11))}}else Wn(this.i,this.l,L,null),Pa(this,L);Le==4&&wn(this),this.o&&!this.J&&(Le==4?gh(this.j,this):(this.o=!1,es(this)))}else n1(this.g),l==400&&0<L.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),wn(this),zr(this)}}}catch{}finally{}};function jd(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function U0(s,c){var l=s.C,f=c.indexOf(`
`,l);return f==-1?Ca:(l=Number(c.substring(l,f)),isNaN(l)?qd:(f+=1,f+l>c.length?Ca:(c=c.slice(f,f+l),s.C=f+l,c)))}Kt.prototype.cancel=function(){this.J=!0,wn(this)};function es(s){s.S=Date.now()+s.I,zd(s,s.I)}function zd(s,c){if(s.B!=null)throw Error("WatchDog timer not null");s.B=$r(T(s.ba,s),c)}function ka(s){s.B&&(u.clearTimeout(s.B),s.B=null)}Kt.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(V0(this.i,this.A),this.L!=2&&(qr(),qe(17)),wn(this),this.s=2,zr(this)):zd(this,this.S-s)};function zr(s){s.j.G==0||s.J||gh(s.j,s)}function wn(s){ka(s);var c=s.M;c&&typeof c.ma=="function"&&c.ma(),s.M=null,Dd(s.U),s.g&&(c=s.g,s.g=null,c.abort(),c.ma())}function Pa(s,c){try{var l=s.j;if(l.G!=0&&(l.g==s||xa(l.h,s))){if(!s.K&&xa(l.h,s)&&l.G==3){try{var f=l.Da.g.parse(c)}catch{f=null}if(Array.isArray(f)&&f.length==3){var C=f;if(C[0]==0){e:if(!l.u){if(l.g)if(l.g.F+3e3<s.F)cs(l),os(l);else break e;La(l),qe(18)}}else l.za=C[1],0<l.za-l.T&&37500>C[2]&&l.F&&l.v==0&&!l.C&&(l.C=$r(T(l.Za,l),6e3));if(1>=Hd(l.h)&&l.ca){try{l.ca()}catch{}l.ca=void 0}}else bn(l,11)}else if((s.K||l.g==s)&&cs(l),!Q(c))for(C=l.Da.g.parse(c),c=0;c<C.length;c++){let se=C[c];if(l.T=se[0],se=se[1],l.G==2)if(se[0]=="c"){l.K=se[1],l.ia=se[2];let Oe=se[3];Oe!=null&&(l.la=Oe,l.j.info("VER="+l.la));let Le=se[4];Le!=null&&(l.Aa=Le,l.j.info("SVER="+l.Aa));let Kn=se[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(f=1.5*Kn,l.L=f,l.j.info("backChannelRequestTimeoutMs_="+f)),f=l;let tt=s.g;if(tt){let ls=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ls){var k=f.h;k.g||ls.indexOf("spdy")==-1&&ls.indexOf("quic")==-1&&ls.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Da(k,k.h),k.h=null))}if(f.D){let Va=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Va&&(f.ya=Va,ce(f.I,f.D,Va))}}l.G=3,l.l&&l.l.ua(),l.ba&&(l.R=Date.now()-s.F,l.j.info("Handshake RTT: "+l.R+"ms")),f=l;var L=s;if(f.qa=vh(f,f.J?f.ia:null,f.W),L.K){Kd(f.h,L);var oe=L,Re=f.L;Re&&(oe.I=Re),oe.B&&(ka(oe),es(oe)),f.g=L}else ph(f);0<l.i.length&&as(l)}else se[0]!="stop"&&se[0]!="close"||bn(l,7);else l.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?bn(l,7):Oa(l):se[0]!="noop"&&l.l&&l.l.ta(se),l.v=0)}}qr(4)}catch{}}var B0=class{constructor(s,c){this.g=s,this.map=c}};function Wd(s){this.l=s||10,u.PerformanceNavigationTiming?(s=u.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gd(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function Hd(s){return s.h?1:s.g?s.g.size:0}function xa(s,c){return s.h?s.h==c:s.g?s.g.has(c):!1}function Da(s,c){s.g?s.g.add(c):s.h=c}function Kd(s,c){s.h&&s.h==c?s.h=null:s.g&&s.g.has(c)&&s.g.delete(c)}Wd.prototype.cancel=function(){if(this.i=Qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function Qd(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let c=s.i;for(let l of s.g.values())c=c.concat(l.D);return c}return q(s.i)}function q0(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(d(s)){for(var c=[],l=s.length,f=0;f<l;f++)c.push(s[f]);return c}c=[],l=0;for(f in s)c[l++]=s[f];return c}function $0(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(d(s)||typeof s=="string"){var c=[];s=s.length;for(var l=0;l<s;l++)c.push(l);return c}c=[],l=0;for(let f in s)c[l++]=f;return c}}}function Yd(s,c){if(s.forEach&&typeof s.forEach=="function")s.forEach(c,void 0);else if(d(s)||typeof s=="string")Array.prototype.forEach.call(s,c,void 0);else for(var l=$0(s),f=q0(s),C=f.length,k=0;k<C;k++)c.call(void 0,f[k],l&&l[k],s)}var Xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j0(s,c){if(s){s=s.split("&");for(var l=0;l<s.length;l++){var f=s[l].indexOf("="),C=null;if(0<=f){var k=s[l].substring(0,f);C=s[l].substring(f+1)}else k=s[l];c(k,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Tn(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Tn){this.h=s.h,ts(this,s.j),this.o=s.o,this.g=s.g,ns(this,s.s),this.l=s.l;var c=s.i,l=new Hr;l.i=c.i,c.g&&(l.g=new Map(c.g),l.h=c.h),Jd(this,l),this.m=s.m}else s&&(c=String(s).match(Xd))?(this.h=!1,ts(this,c[1]||"",!0),this.o=Wr(c[2]||""),this.g=Wr(c[3]||"",!0),ns(this,c[4]),this.l=Wr(c[5]||"",!0),Jd(this,c[6]||"",!0),this.m=Wr(c[7]||"")):(this.h=!1,this.i=new Hr(null,this.h))}Tn.prototype.toString=function(){var s=[],c=this.j;c&&s.push(Gr(c,Zd,!0),":");var l=this.g;return(l||c=="file")&&(s.push("//"),(c=this.o)&&s.push(Gr(c,Zd,!0),"@"),s.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.s,l!=null&&s.push(":",String(l))),(l=this.l)&&(this.g&&l.charAt(0)!="/"&&s.push("/"),s.push(Gr(l,l.charAt(0)=="/"?G0:W0,!0))),(l=this.i.toString())&&s.push("?",l),(l=this.m)&&s.push("#",Gr(l,K0)),s.join("")};function Rt(s){return new Tn(s)}function ts(s,c,l){s.j=l?Wr(c,!0):c,s.j&&(s.j=s.j.replace(/:$/,""))}function ns(s,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);s.s=c}else s.s=null}function Jd(s,c,l){c instanceof Hr?(s.i=c,Q0(s.i,s.h)):(l||(c=Gr(c,H0)),s.i=new Hr(c,s.h))}function ce(s,c,l){s.i.set(c,l)}function rs(s){return ce(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Wr(s,c){return s?c?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Gr(s,c,l){return typeof s=="string"?(s=encodeURI(s).replace(c,z0),l&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function z0(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Zd=/[#\/\?@]/g,W0=/[#\?:]/g,G0=/[#\?]/g,H0=/[#\?@]/g,K0=/#/g;function Hr(s,c){this.h=this.g=null,this.i=s||null,this.j=!!c}function Qt(s){s.g||(s.g=new Map,s.h=0,s.i&&j0(s.i,function(c,l){s.add(decodeURIComponent(c.replace(/\+/g," ")),l)}))}n=Hr.prototype,n.add=function(s,c){Qt(this),this.i=null,s=Gn(this,s);var l=this.g.get(s);return l||this.g.set(s,l=[]),l.push(c),this.h+=1,this};function eh(s,c){Qt(s),c=Gn(s,c),s.g.has(c)&&(s.i=null,s.h-=s.g.get(c).length,s.g.delete(c))}function th(s,c){return Qt(s),c=Gn(s,c),s.g.has(c)}n.forEach=function(s,c){Qt(this),this.g.forEach(function(l,f){l.forEach(function(C){s.call(c,C,f,this)},this)},this)},n.na=function(){Qt(this);let s=Array.from(this.g.values()),c=Array.from(this.g.keys()),l=[];for(let f=0;f<c.length;f++){let C=s[f];for(let k=0;k<C.length;k++)l.push(c[f])}return l},n.V=function(s){Qt(this);let c=[];if(typeof s=="string")th(this,s)&&(c=c.concat(this.g.get(Gn(this,s))));else{s=Array.from(this.g.values());for(let l=0;l<s.length;l++)c=c.concat(s[l])}return c},n.set=function(s,c){return Qt(this),this.i=null,s=Gn(this,s),th(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[c]),this.h+=1,this},n.get=function(s,c){return s?(s=this.V(s),0<s.length?String(s[0]):c):c};function nh(s,c,l){eh(s,c),0<l.length&&(s.i=null,s.g.set(Gn(s,c),q(l)),s.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],c=Array.from(this.g.keys());for(var l=0;l<c.length;l++){var f=c[l];let k=encodeURIComponent(String(f)),L=this.V(f);for(f=0;f<L.length;f++){var C=k;L[f]!==""&&(C+="="+encodeURIComponent(String(L[f]))),s.push(C)}}return this.i=s.join("&")};function Gn(s,c){return c=String(c),s.j&&(c=c.toLowerCase()),c}function Q0(s,c){c&&!s.j&&(Qt(s),s.i=null,s.g.forEach(function(l,f){var C=f.toLowerCase();f!=C&&(eh(this,f),nh(this,C,l))},s)),s.j=c}function Y0(s,c){let l=new jr;if(u.Image){let f=new Image;f.onload=P(Yt,l,"TestLoadImage: loaded",!0,c,f),f.onerror=P(Yt,l,"TestLoadImage: error",!1,c,f),f.onabort=P(Yt,l,"TestLoadImage: abort",!1,c,f),f.ontimeout=P(Yt,l,"TestLoadImage: timeout",!1,c,f),u.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=s}else c(!1)}function X0(s,c){let l=new jr,f=new AbortController,C=setTimeout(()=>{f.abort(),Yt(l,"TestPingServer: timeout",!1,c)},1e4);fetch(s,{signal:f.signal}).then(k=>{clearTimeout(C),k.ok?Yt(l,"TestPingServer: ok",!0,c):Yt(l,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),Yt(l,"TestPingServer: error",!1,c)})}function Yt(s,c,l,f,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),f(l)}catch{}}function J0(){this.g=new O0}function Z0(s,c,l){let f=l||"";try{Yd(s,function(C,k){let L=C;h(C)&&(L=wa(C)),c.push(f+k+"="+encodeURIComponent(L))})}catch(C){throw c.push(f+"type="+encodeURIComponent("_badmap")),C}}function Kr(s){this.l=s.Ub||null,this.j=s.eb||!1}V(Kr,Ta),Kr.prototype.g=function(){return new is(this.l,this.j)},Kr.prototype.i=function(s){return function(){return s}}({});function is(s,c){Ne.call(this),this.D=s,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(is,Ne),n=is.prototype,n.open=function(s,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=c,this.readyState=1,Yr(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(c.body=s),(this.D||u).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qr(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rh(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function rh(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var c=s.value?s.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!s.done}))&&(this.response=this.responseText+=c)}s.done?Qr(this):Yr(this),this.readyState==3&&rh(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,Qr(this))},n.Qa=function(s){this.g&&(this.response=s,Qr(this))},n.ga=function(){this.g&&Qr(this)};function Qr(s){s.readyState=4,s.l=null,s.j=null,s.v=null,Yr(s)}n.setRequestHeader=function(s,c){this.u.append(s,c)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],c=this.h.entries();for(var l=c.next();!l.done;)l=l.value,s.push(l[0]+": "+l[1]),l=c.next();return s.join(`\r
`)};function Yr(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function ih(s){let c="";return re(s,function(l,f){c+=f,c+=":",c+=l,c+=`\r
`}),c}function Na(s,c,l){e:{for(f in l){var f=!1;break e}f=!0}f||(l=ih(l),typeof s=="string"?l!=null&&encodeURIComponent(String(l)):ce(s,c,l))}function fe(s){Ne.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(fe,Ne);var e1=/^https?$/i,t1=["POST","PUT"];n=fe.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,c,l,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);c=c?c.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sa.g(),this.v=this.o?Nd(this.o):Nd(Sa),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(c,String(s),!0),this.B=!1}catch(k){sh(this,k);return}if(s=l||"",l=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var C in f)l.set(C,f[C]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let k of f.keys())l.set(k,f.get(k));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(l.keys()).find(k=>k.toLowerCase()=="content-type"),C=u.FormData&&s instanceof u.FormData,!(0<=Array.prototype.indexOf.call(t1,c,void 0))||f||C||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,L]of l)this.g.setRequestHeader(k,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ch(this),this.u=!0,this.g.send(s),this.u=!1}catch(k){sh(this,k)}};function sh(s,c){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=c,s.m=5,oh(s),ss(s)}function oh(s){s.A||(s.A=!0,Be(s,"complete"),Be(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,Be(this,"complete"),Be(this,"abort"),ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),fe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ah(this):this.bb())},n.bb=function(){ah(this)};function ah(s){if(s.h&&typeof a<"u"&&(!s.v[1]||kt(s)!=4||s.Z()!=2)){if(s.u&&kt(s)==4)kd(s.Ea,0,s);else if(Be(s,"readystatechange"),kt(s)==4){s.h=!1;try{let L=s.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var l;if(!(l=c)){var f;if(f=L===0){var C=String(s.D).match(Xd)[1]||null;!C&&u.self&&u.self.location&&(C=u.self.location.protocol.slice(0,-1)),f=!e1.test(C?C.toLowerCase():"")}l=f}if(l)Be(s,"complete"),Be(s,"success");else{s.m=6;try{var k=2<kt(s)?s.g.statusText:""}catch{k=""}s.l=k+" ["+s.Z()+"]",oh(s)}}finally{ss(s)}}}}function ss(s,c){if(s.g){ch(s);let l=s.g,f=s.v[0]?()=>{}:null;s.g=null,s.v=null,c||Be(s,"ready");try{l.onreadystatechange=f}catch{}}}function ch(s){s.I&&(u.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function kt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<kt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var c=this.g.responseText;return s&&c.indexOf(s)==0&&(c=c.substring(s.length)),N0(c)}};function uh(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function n1(s){let c={};s=(s.g&&2<=kt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<s.length;f++){if(Q(s[f]))continue;var l=S(s[f]);let C=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();let k=c[C]||[];c[C]=k,k.push(l)}A(c,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(s,c,l){return l&&l.internalChannelParams&&l.internalChannelParams[s]||c}function lh(s){this.Aa=0,this.i=[],this.j=new jr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xr("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xr("baseRetryDelayMs",5e3,s),this.cb=Xr("retryDelaySeedMs",1e4,s),this.Wa=Xr("forwardChannelMaxRetries",2,s),this.wa=Xr("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new Wd(s&&s.concurrentRequestLimit),this.Da=new J0,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=lh.prototype,n.la=8,n.G=1,n.connect=function(s,c,l,f){qe(0),this.W=s,this.H=c||{},l&&f!==void 0&&(this.H.OSID=l,this.H.OAID=f),this.F=this.X,this.I=vh(this,null,this.W),as(this)};function Oa(s){if(dh(s),s.G==3){var c=s.U++,l=Rt(s.I);if(ce(l,"SID",s.K),ce(l,"RID",c),ce(l,"TYPE","terminate"),Jr(s,l),c=new Kt(s,s.j,c),c.L=2,c.v=rs(Rt(l)),l=!1,u.navigator&&u.navigator.sendBeacon)try{l=u.navigator.sendBeacon(c.v.toString(),"")}catch{}!l&&u.Image&&(new Image().src=c.v,l=!0),l||(c.g=Eh(c.j,null),c.g.ea(c.v)),c.F=Date.now(),es(c)}yh(s)}function os(s){s.g&&(Ma(s),s.g.cancel(),s.g=null)}function dh(s){os(s),s.u&&(u.clearTimeout(s.u),s.u=null),cs(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&u.clearTimeout(s.s),s.s=null)}function as(s){if(!Gd(s.h)&&!s.s){s.s=!0;var c=s.Ga;Lr||Td(),Mr||(Lr(),Mr=!0),fa.add(c,s),s.B=0}}function r1(s,c){return Hd(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=c.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=$r(T(s.Ga,s,c),_h(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let C=new Kt(this,this.j,s),k=this.o;if(this.S&&(k?(k=m(k),w(k,this.S)):k=this.S),this.m!==null||this.O||(C.H=k,k=null),this.P)e:{for(var c=0,l=0;l<this.i.length;l++){t:{var f=this.i[l];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(c+=f,4096<c){c=l;break e}if(c===4096||l===this.i.length-1){c=l+1;break e}}c=1e3}else c=1e3;c=fh(this,C,c),l=Rt(this.I),ce(l,"RID",s),ce(l,"CVER",22),this.D&&ce(l,"X-HTTP-Session-Id",this.D),Jr(this,l),k&&(this.O?c="headers="+encodeURIComponent(String(ih(k)))+"&"+c:this.m&&Na(l,this.m,k)),Da(this.h,C),this.Ua&&ce(l,"TYPE","init"),this.P?(ce(l,"$req",c),ce(l,"SID","null"),C.T=!0,Ra(C,l,null)):Ra(C,l,c),this.G=2}}else this.G==3&&(s?hh(this,s):this.i.length==0||Gd(this.h)||hh(this))};function hh(s,c){var l;c?l=c.l:l=s.U++;let f=Rt(s.I);ce(f,"SID",s.K),ce(f,"RID",l),ce(f,"AID",s.T),Jr(s,f),s.m&&s.o&&Na(f,s.m,s.o),l=new Kt(s,s.j,l,s.B+1),s.m===null&&(l.H=s.o),c&&(s.i=c.D.concat(s.i)),c=fh(s,l,1e3),l.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Da(s.h,l),Ra(l,f,c)}function Jr(s,c){s.H&&re(s.H,function(l,f){ce(c,f,l)}),s.l&&Yd({},function(l,f){ce(c,f,l)})}function fh(s,c,l){l=Math.min(s.i.length,l);var f=s.l?T(s.l.Na,s.l,s):null;e:{var C=s.i;let k=-1;for(;;){let L=["count="+l];k==-1?0<l?(k=C[0].g,L.push("ofs="+k)):k=0:L.push("ofs="+k);let oe=!0;for(let Re=0;Re<l;Re++){let se=C[Re].g,Oe=C[Re].map;if(se-=k,0>se)k=Math.max(0,C[Re].g-100),oe=!1;else try{Z0(Oe,L,"req"+se+"_")}catch{f&&f(Oe)}}if(oe){f=L.join("&");break e}}}return s=s.i.splice(0,l),c.D=s,f}function ph(s){if(!s.g&&!s.u){s.Y=1;var c=s.Fa;Lr||Td(),Mr||(Lr(),Mr=!0),fa.add(c,s),s.v=0}}function La(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=$r(T(s.Fa,s),_h(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,mh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=$r(T(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),os(this),mh(this))};function Ma(s){s.A!=null&&(u.clearTimeout(s.A),s.A=null)}function mh(s){s.g=new Kt(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var c=Rt(s.qa);ce(c,"RID","rpc"),ce(c,"SID",s.K),ce(c,"AID",s.T),ce(c,"CI",s.F?"0":"1"),!s.F&&s.ja&&ce(c,"TO",s.ja),ce(c,"TYPE","xmlhttp"),Jr(s,c),s.m&&s.o&&Na(c,s.m,s.o),s.L&&(s.g.I=s.L);var l=s.g;s=s.ia,l.L=1,l.v=rs(Rt(c)),l.m=null,l.P=!0,$d(l,s)}n.Za=function(){this.C!=null&&(this.C=null,os(this),La(this),qe(19))};function cs(s){s.C!=null&&(u.clearTimeout(s.C),s.C=null)}function gh(s,c){var l=null;if(s.g==c){cs(s),Ma(s),s.g=null;var f=2}else if(xa(s.h,c))l=c.D,Kd(s.h,c),f=1;else return;if(s.G!=0){if(c.o)if(f==1){l=c.m?c.m.length:0,c=Date.now()-c.F;var C=s.B;f=Xi(),Be(f,new Fd(f,l)),as(s)}else ph(s);else if(C=c.s,C==3||C==0&&0<c.X||!(f==1&&r1(s,c)||f==2&&La(s)))switch(l&&0<l.length&&(c=s.h,c.i=c.i.concat(l)),C){case 1:bn(s,5);break;case 4:bn(s,10);break;case 3:bn(s,6);break;default:bn(s,2)}}}function _h(s,c){let l=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(l*=2),l*c}function bn(s,c){if(s.j.info("Error code "+c),c==2){var l=T(s.fb,s),f=s.Xa;let C=!f;f=new Tn(f||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ts(f,"https"),rs(f),C?Y0(f.toString(),l):X0(f.toString(),l)}else qe(2);s.G=0,s.l&&s.l.sa(c),yh(s),dh(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function yh(s){if(s.G=0,s.ka=[],s.l){let c=Qd(s.h);(c.length!=0||s.i.length!=0)&&(O(s.ka,c),O(s.ka,s.i),s.h.i.length=0,q(s.i),s.i.length=0),s.l.ra()}}function vh(s,c,l){var f=l instanceof Tn?Rt(l):new Tn(l);if(f.g!="")c&&(f.g=c+"."+f.g),ns(f,f.s);else{var C=u.location;f=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;var k=new Tn(null);f&&ts(k,f),c&&(k.g=c),C&&ns(k,C),l&&(k.l=l),f=k}return l=s.D,c=s.ya,l&&c&&ce(f,l,c),ce(f,"VER",s.la),Jr(s,f),f}function Eh(s,c,l){if(c&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=s.Ca&&!s.pa?new fe(new Kr({eb:l})):new fe(s.pa),c.Ha(s.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ih(){}n=Ih.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function us(){}us.prototype.g=function(s,c){return new He(s,c)};function He(s,c){Ne.call(this),this.g=new lh(c),this.l=s,this.h=c&&c.messageUrlParams||null,s=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(s?s["X-WebChannel-Content-Type"]=c.messageContentType:s={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(s?s["X-WebChannel-Client-Profile"]=c.va:s={"X-WebChannel-Client-Profile":c.va}),this.g.S=s,(s=c&&c.Sb)&&!Q(s)&&(this.g.m=s),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!Q(c)&&(this.g.D=c,s=this.h,s!==null&&c in s&&(s=this.h,c in s&&delete s[c])),this.j=new Hn(this)}V(He,Ne),He.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},He.prototype.close=function(){Oa(this.g)},He.prototype.o=function(s){var c=this.g;if(typeof s=="string"){var l={};l.__data__=s,s=l}else this.u&&(l={},l.__data__=wa(s),s=l);c.i.push(new B0(c.Ya++,s)),c.G==3&&as(c)},He.prototype.N=function(){this.g.l=null,delete this.j,Oa(this.g),delete this.g,He.aa.N.call(this)};function wh(s){ba.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var c=s.__sm__;if(c){e:{for(let l in c){s=l;break e}s=void 0}(this.i=s)&&(s=this.i,c=c!==null&&s in c?c[s]:void 0),this.data=c}else this.data=s}V(wh,ba);function Th(){Aa.call(this),this.status=1}V(Th,Aa);function Hn(s){this.g=s}V(Hn,Ih),Hn.prototype.ua=function(){Be(this.g,"a")},Hn.prototype.ta=function(s){Be(this.g,new wh(s))},Hn.prototype.sa=function(s){Be(this.g,new Th)},Hn.prototype.ra=function(){Be(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,He.prototype.send=He.prototype.o,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,gu=Ut.createWebChannelTransport=function(){return new us},mu=Ut.getStatEventTarget=function(){return Xi()},pu=Ut.Event=In,no=Ut.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,wi=Ut.ErrorCode=Ji,Ud.COMPLETE="complete",fu=Ut.EventType=Ud,Od.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,ir=Ut.WebChannel=Od,WE=Ut.FetchXmlHttpFactory=Kr,fe.prototype.listenOnce=fe.prototype.L,fe.prototype.getLastError=fe.prototype.Ka,fe.prototype.getLastErrorCode=fe.prototype.Ba,fe.prototype.getStatus=fe.prototype.Z,fe.prototype.getResponseJson=fe.prototype.Oa,fe.prototype.getResponseText=fe.prototype.oa,fe.prototype.send=fe.prototype.ea,fe.prototype.setWithCredentials=fe.prototype.Ha,hu=Ut.XhrIo=fe}).apply(typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{});var Yp="@firebase/firestore",Xp="4.8.0";var Se=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Se.UNAUTHENTICATED=new Se(null),Se.GOOGLE_CREDENTIALS=new Se("google-credentials-uid"),Se.FIRST_PARTY=new Se("first-party-uid"),Se.MOCK_USER=new Se("mock-user");var Pr="11.10.0";var $n=new mt("@firebase/firestore");function sr(){return $n.logLevel}function B(n,...e){if($n.logLevel<=Z.DEBUG){let t=e.map(Yl);$n.debug(`Firestore (${Pr}): ${n}`,...t)}}function qt(n,...e){if($n.logLevel<=Z.ERROR){let t=e.map(Yl);$n.error(`Firestore (${Pr}): ${n}`,...t)}}function _n(n,...e){if($n.logLevel<=Z.WARN){let t=e.map(Yl);$n.warn(`Firestore (${Pr}): ${n}`,...t)}}function Yl(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function G(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,$m(n,r,t)}function $m(n,e,t){let r=`FIRESTORE (${Pr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qt(r),new Error(r)}function he(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||$m(e,i,r)}function ne(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends je{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var uo=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wu=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Se.UNAUTHENTICATED))}shutdown(){}},Tu=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},bu=class{constructor(e){this.t=e,this.currentUser=Se.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){he(this.o===void 0,42304);let r=this.i,i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve(),o=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gn,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let d=o;e.enqueueRetryable(()=>v(this,null,function*(){yield d.promise,yield i(this.currentUser)}))},u=d=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?u(d):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gn)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new uo(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new Se(e)}},Au=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Se.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Su=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Au(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Se.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lo=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Cu=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ge(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){he(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lo(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(he(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function GE(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function jm(){return new TextEncoder}var ho=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=GE(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function J(n,e){return n<e?-1:n>e?1:0}function Ru(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return J(r,i);{let o=jm(),a=HE(o.encode(Jp(n,t)),o.encode(Jp(e,t)));return a!==0?a:J(r,i)}}t+=r>65535?2:1}return J(n.length,e.length)}function Jp(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function HE(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return J(n[t],e[t]);return J(n.length,e.length)}function yr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Zp="__name__",fo=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&G(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return J(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Ru(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ft.fromString(e.substring(4,e.length-2))}},ge=class n extends fo{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},KE=/^[_a-zA-Z][_a-zA-Z0-9]*$/,at=class n extends fo{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return KE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zp}static keyField(){return new n([Zp])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(ge.fromString(e))}static fromName(e){return new n(ge.fromString(e).popFirst(5))}static empty(){return new n(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ge(e.slice()))}};function QE(n,e,t){if(!t)throw new $(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YE(n,e,t,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function em(n){if(j.isDocumentKey(n))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function JE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G(12329,{type:typeof n})}function oo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=JE(n);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ie(n,e){let t={typeString:n};return e&&(t.value=e),t}function ji(n,e){if(!XE(n))throw new $(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new $(M.INVALID_ARGUMENT,t);return!0}var tm=-62135596800,nm=1e6,ze=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*nm);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tm)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nm}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ji(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-tm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:Ie("string",ze._jsonSchemaVersion),seconds:Ie("number"),nanoseconds:Ie("number")};var K=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ki=-1,ku=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ku.UNKNOWN_ID=-1;function ZE(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new jn(i,j.empty(),e)}function eI(n){return new jn(n.readTime,n.key,ki)}var jn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(K.min(),j.empty(),ki)}static max(){return new n(K.max(),j.empty(),ki)}};function tI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:J(n.largestBatchId,e.largestBatchId))}var nI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pu=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Bo(n){return v(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==nI)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&t()},d=>r(d))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let d=0;d<o;d++){let h=d;t(e[h]).next(p=>{a[h]=p,++u,u===o&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function rI(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xr(n){return n.name==="IndexedDbTransactionError"}var Xl=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),iI=-1;function qo(n){return n==null}function po(n){return n===0&&1/n==-1/0}var zm="";function sI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rm(e)),e=oI(n.get(t),e);return rm(e)}function oI(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case zm:t+="";break;default:t+=o}}return t}function rm(n){return n+zm+""}var aI="remoteDocuments",Wm="owner";var Gm="mutationQueues";var Hm="mutations";var Km="documentMutations",cI="remoteDocumentsV14";var Qm="remoteDocumentGlobal";var Ym="targets";var Xm="targetDocuments";var Jm="targetGlobal",Zm="collectionParents";var eg="clientMetadata";var tg="bundles";var ng="namedQueries";var uI="indexConfiguration";var lI="indexState";var dI="indexEntries";var rg="documentOverlays";var hI="globals";var fI=[Gm,Hm,Km,aI,Ym,Wm,Jm,Xm,eg,Qm,Zm,tg,ng],mS=[...fI,rg],pI=[Gm,Hm,Km,cI,Ym,Wm,Jm,Xm,eg,Qm,Zm,tg,ng,rg],mI=pI,gI=[...mI,uI,lI,dI];var gS=[...gI,hI];function im(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _I(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var _e=class n{constructor(e,t){this.comparator=e,this.root=t||It.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}},ur=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},It=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new It(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class n{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mo(this.data.getIterator())}getIteratorFrom(e){return new mo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},mo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vn=class n{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ce(at.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var go=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ue=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new go("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ue.EMPTY_BYTE_STRING=new Ue("");var yI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $t(n){if(he(!!n,39018),typeof n=="string"){let e=0,t=yI.exec(n);if(he(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:le(n.seconds),nanos:le(n.nanos)}}function le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jt(n){return typeof n=="string"?Ue.fromBase64String(n):Ue.fromUint8Array(n)}var ig="server_timestamp",sg="__type__",og="__previous_value__",ag="__local_write_time__";function Jl(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sg])===null||t===void 0?void 0:t.stringValue)===ig}function $o(n){let e=n.mapValue.fields[og];return Jl(e)?$o(e):e}function Pi(n){let e=$t(n.mapValue.fields[ag].timestampValue);return new ze(e.seconds,e.nanos)}var xu=class{constructor(e,t,r,i,o,a,u,d,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=p}},_o="(default)",yo=class n{constructor(e,t){this.projectId=e,this.database=t||_o}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===_o}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var cg="__type__",ug="__max__",ro={mapValue:{fields:{__type__:{stringValue:ug}}}},lg="__vector__",xi="value";function yn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jl(n)?4:hg(n)?9007199254740991:dg(n)?10:11:G(28295,{value:n})}function bt(n,e){if(n===e)return!0;let t=yn(n);if(t!==yn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pi(n).isEqual(Pi(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=$t(i.timestampValue),u=$t(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return jt(i.bytesValue).isEqual(jt(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return le(i.geoPointValue.latitude)===le(o.geoPointValue.latitude)&&le(i.geoPointValue.longitude)===le(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return le(i.integerValue)===le(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=le(i.doubleValue),u=le(o.doubleValue);return a===u?po(a)===po(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return yr(n.arrayValue.values||[],e.arrayValue.values||[],bt);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(im(a)!==im(u))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!bt(a[d],u[d])))return!1;return!0}(n,e);default:return G(52216,{left:n})}}function Di(n,e){return(n.values||[]).find(t=>bt(t,e))!==void 0}function vr(n,e){if(n===e)return 0;let t=yn(n),r=yn(e);if(t!==r)return J(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return J(n.booleanValue,e.booleanValue);case 2:return function(o,a){let u=le(o.integerValue||o.doubleValue),d=le(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return sm(n.timestampValue,e.timestampValue);case 4:return sm(Pi(n),Pi(e));case 5:return Ru(n.stringValue,e.stringValue);case 6:return function(o,a){let u=jt(o),d=jt(a);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let u=o.split("/"),d=a.split("/");for(let h=0;h<u.length&&h<d.length;h++){let p=J(u[h],d[h]);if(p!==0)return p}return J(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let u=J(le(o.latitude),le(a.latitude));return u!==0?u:J(le(o.longitude),le(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return om(n.arrayValue,e.arrayValue);case 10:return function(o,a){var u,d,h,p;let I=o.fields||{},T=a.fields||{},P=(u=I[xi])===null||u===void 0?void 0:u.arrayValue,V=(d=T[xi])===null||d===void 0?void 0:d.arrayValue,q=J(((h=P?.values)===null||h===void 0?void 0:h.length)||0,((p=V?.values)===null||p===void 0?void 0:p.length)||0);return q!==0?q:om(P,V)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===ro.mapValue&&a===ro.mapValue)return 0;if(o===ro.mapValue)return 1;if(a===ro.mapValue)return-1;let u=o.fields||{},d=Object.keys(u),h=a.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let I=0;I<d.length&&I<p.length;++I){let T=Ru(d[I],p[I]);if(T!==0)return T;let P=vr(u[d[I]],h[p[I]]);if(P!==0)return P}return J(d.length,p.length)}(n.mapValue,e.mapValue);default:throw G(23264,{le:t})}}function sm(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return J(n,e);let t=$t(n),r=$t(e),i=J(t.seconds,r.seconds);return i!==0?i:J(t.nanos,r.nanos)}function om(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=vr(t[i],r[i]);if(o)return o}return J(t.length,r.length)}function Er(n){return Du(n)}function Du(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=$t(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return jt(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Du(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${Du(t.fields[a])}`;return i+"}"}(n.mapValue):G(61005,{value:n})}function ao(n){switch(yn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=$o(n);return e?16+ao(e):16;case 5:return 2*n.stringValue.length;case 6:return jt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ao(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return zi(r.fields,(o,a)=>{i+=o.length+ao(a)}),i}(n.mapValue);default:throw G(13486,{value:n})}}function Nu(n){return!!n&&"integerValue"in n}function Zl(n){return!!n&&"arrayValue"in n}function am(n){return!!n&&"nullValue"in n}function cm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _u(n){return!!n&&"mapValue"in n}function dg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[cg])===null||t===void 0?void 0:t.stringValue)===lg}function bi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return zi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bi(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ug}var yS={mapValue:{fields:{[cg]:{stringValue:lg},[xi]:{arrayValue:{}}}}};var Bt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_u(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bi(t)}setAll(e){let t=at.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=bi(a):i.push(u.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());_u(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_u(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(bi(this.value))}};var ct=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,K.min(),K.min(),K.min(),Bt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,K.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,K.min(),K.min(),Bt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,K.min(),K.min(),Bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ir=class{constructor(e,t){this.position=e,this.inclusive=t}};function um(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(a.referenceValue),t.key):r=vr(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function lm(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bt(n.position[t],e.position[t]))return!1;return!0}var wr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function vI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vo=class{},Te=class n extends vo{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Lu(e,t,r):t==="array-contains"?new Fu(e,r):t==="in"?new Uu(e,r):t==="not-in"?new Bu(e,r):t==="array-contains-any"?new qu(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Mu(e,r):new Vu(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vr(t,this.value)):t!==null&&yn(this.value)===yn(t)&&this.matchesComparison(vr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},At=class n extends vo{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return fg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function fg(n){return n.op==="and"}function pg(n){return EI(n)&&fg(n)}function EI(n){for(let e of n.filters)if(e instanceof At)return!1;return!0}function Ou(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+Er(n.value);if(pg(n))return n.filters.map(e=>Ou(e)).join(",");{let e=n.filters.map(t=>Ou(t)).join(",");return`${n.op}(${e})`}}function mg(n,e){return n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&bt(r.value,i.value)}(n,e):n instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&mg(a,i.filters[u]),!0):!1}(n,e):void G(19439)}function gg(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${Er(t.value)}`}(n):n instanceof At?function(t){return t.op.toString()+" {"+t.getFilters().map(gg).join(" ,")+"}"}(n):"Filter"}var Lu=class extends Te{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},Mu=class extends Te{constructor(e,t){super(e,"in",t),this.keys=_g("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Vu=class extends Te{constructor(e,t){super(e,"not-in",t),this.keys=_g("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function _g(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var Fu=class extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Zl(t)&&Di(t.arrayValue,this.value)}},Uu=class extends Te{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Di(this.value.arrayValue,t)}},Bu=class extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if(Di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Di(this.value.arrayValue,t)}},qu=class extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Di(this.value.arrayValue,r))}};var $u=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Pe=null}};function dm(n,e=null,t=[],r=[],i=null,o=null,a=null){return new $u(n,e,t,r,i,o,a)}function ed(n){let e=ne(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ou(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),qo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Er(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Er(r)).join(",")),e.Pe=t}return e.Pe}function td(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mg(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lm(n.startAt,e.startAt)&&lm(n.endAt,e.endAt)}function ju(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Tr=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function II(n,e,t,r,i,o,a,u){return new Tr(n,e,t,r,i,o,a,u)}function nd(n){return new Tr(n)}function hm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wI(n){return n.collectionGroup!==null}function Ai(n){let e=ne(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ce(at.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new wr(o,r))}),t.has(at.keyField().canonicalString())||e.Te.push(new wr(at.keyField(),r))}return e.Te}function wt(n){let e=ne(n);return e.Ie||(e.Ie=TI(e,Ai(n))),e.Ie}function TI(n,e){if(n.limitType==="F")return dm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new wr(i.field,o)});let t=n.endAt?new Ir(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ir(n.startAt.position,n.startAt.inclusive):null;return dm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zu(n,e,t){return new Tr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jo(n,e){return td(wt(n),wt(e))&&n.limitType===e.limitType}function yg(n){return`${ed(wt(n))}|lt:${n.limitType}`}function or(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>gg(i)).join(", ")}]`),qo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Er(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Er(i)).join(",")),`Target(${r})`}(wt(n))}; limitType=${n.limitType})`}function zo(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ai(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,d){let h=um(a,u,d);return a.inclusive?h<=0:h<0}(r.startAt,Ai(r),i)||r.endAt&&!function(a,u,d){let h=um(a,u,d);return a.inclusive?h>=0:h>0}(r.endAt,Ai(r),i))}(n,e)}function bI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vg(n){return(e,t)=>{let r=!1;for(let i of Ai(n)){let o=AI(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function AI(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(o,a,u){let d=a.data.field(o),h=u.data.field(o);return d!==null&&h!==null?vr(d,h):G(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:n.dir})}}var zt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return _I(this.inner)}size(){return this.innerSize}};var SI=new _e(j.comparator);function vn(){return SI}var Eg=new _e(j.comparator);function Ti(...n){let e=Eg;for(let t of n)e=e.insert(t.key,t);return e}function CI(n){let e=Eg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fn(){return Si()}function Ig(){return Si()}function Si(){return new zt(n=>n.toString(),(n,e)=>n.isEqual(e))}var vS=new _e(j.comparator),RI=new Ce(j.comparator);function ie(...n){let e=RI;for(let t of n)e=e.add(t);return e}var kI=new Ce(J);function PI(){return kI}function xI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:po(e)?"-0":e}}function DI(n){return{integerValue:""+n}}var br=class{constructor(){this._=void 0}};function NI(n,e,t){return n instanceof Ni?function(i,o){let a={fields:{[sg]:{stringValue:ig},[ag]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Jl(o)&&(o=$o(o)),o&&(a.fields[og]=o),{mapValue:a}}(t,e):n instanceof Ar?wg(n,e):n instanceof Sr?Tg(n,e):function(i,o){let a=LI(i,o),u=fm(a)+fm(i.Ee);return Nu(a)&&Nu(i.Ee)?DI(u):xI(i.serializer,u)}(n,e)}function OI(n,e,t){return n instanceof Ar?wg(n,e):n instanceof Sr?Tg(n,e):t}function LI(n,e){return n instanceof Oi?function(r){return Nu(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ni=class extends br{},Ar=class extends br{constructor(e){super(),this.elements=e}};function wg(n,e){let t=bg(e);for(let r of n.elements)t.some(i=>bt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Sr=class extends br{constructor(e){super(),this.elements=e}};function Tg(n,e){let t=bg(e);for(let r of n.elements)t=t.filter(i=>!bt(i,r));return{arrayValue:{values:t}}}var Oi=class extends br{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function fm(n){return le(n.integerValue||n.doubleValue)}function bg(n){return Zl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function MI(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ar&&i instanceof Ar||r instanceof Sr&&i instanceof Sr?yr(r.elements,i.elements,bt):r instanceof Oi&&i instanceof Oi?bt(r.Ee,i.Ee):r instanceof Ni&&i instanceof Ni}(n.transform,e.transform)}var Ci=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function co(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Li=class{};function Ag(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Wu(n.key,Ci.none()):new Mi(n.key,n.data,Ci.none());{let t=n.data,r=Bt.empty(),i=new Ce(at.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Cr(n.key,r,new Vn(i.toArray()),Ci.none())}}function VI(n,e,t){n instanceof Mi?function(i,o,a){let u=i.value.clone(),d=mm(i.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Cr?function(i,o,a){if(!co(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=mm(i.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(Sg(i)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Ri(n,e,t,r){return n instanceof Mi?function(o,a,u,d){if(!co(o.precondition,a))return u;let h=o.value.clone(),p=gm(o.fieldTransforms,d,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cr?function(o,a,u,d){if(!co(o.precondition,a))return u;let h=gm(o.fieldTransforms,d,a),p=a.data;return p.setAll(Sg(o)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(I=>I.field))}(n,e,t,r):function(o,a,u){return co(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function pm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yr(r,i,(o,a)=>MI(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Mi=class extends Li{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Cr=class extends Li{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Sg(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function mm(n,e,t){let r=new Map;he(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,OI(a,u,t[i]))}return r}function gm(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,NI(o,a,e))}return r}var Wu=class extends Li{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Gu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&VI(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ri(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ri(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Ig();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let d=Ag(a,u);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&yr(this.mutations,e.mutations,(t,r)=>pm(t,r))&&yr(this.baseMutations,e.baseMutations,(t,r)=>pm(t,r))}};var Hu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ku=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ve,te;function Cg(n){if(n===void 0)return qt("GRPC error has no .code"),M.UNKNOWN;switch(n){case ve.OK:return M.OK;case ve.CANCELLED:return M.CANCELLED;case ve.UNKNOWN:return M.UNKNOWN;case ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ve.INTERNAL:return M.INTERNAL;case ve.UNAVAILABLE:return M.UNAVAILABLE;case ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ve.NOT_FOUND:return M.NOT_FOUND;case ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ve.ABORTED:return M.ABORTED;case ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ve.DATA_LOSS:return M.DATA_LOSS;default:return G(39323,{code:n})}}(te=ve||(ve={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";var _m=null;var FI=new Ft([4294967295,4294967295],0);function ym(n){let e=jm().encode(n),t=new du;return t.update(e),new Uint8Array(t.digest())}function vm(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ft([t,r],0),new Ft([i,o],0)]}var Qu=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Un(`Invalid padding: ${t}`);if(r<0)throw new Un(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Un(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Un(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ft.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Ft.fromNumber(r)));return i.compare(FI)===1&&(i=new Ft([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=ym(e),[r,i]=vm(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);if(!this.ye(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.fe===0)return;let t=ym(e),[r,i]=vm(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);this.we(a)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Un=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Eo=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Vi.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(K.min(),i,new _e(J),vn(),ie())}},Vi=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var lr=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Io=class{constructor(e,t){this.targetId=e,this.De=t}},wo=class{constructor(e,t,r=Ue.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},To=class{constructor(){this.ve=0,this.Ce=Em(),this.Fe=Ue.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ie(),t=ie(),r=ie();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new Vi(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Em()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Yu=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=vn(),this.je=io(),this.Je=io(),this.He=new _e(J)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(ju(o))if(r===0){let a=new j(o.path);this.Xe(t,a,ct.newNoDocument(a,K.min()))}else he(r===1,20013,{expectedCount:r});else{let a=this.ot(t);if(a!==r){let u=this._t(e),d=u?this.ut(u,e,a):1;if(d!==0){this.rt(t);let h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,h)}_m?.ct(function(p,I,T,P,V){var q,O,X,Q,H,Y;let ye={localCacheCount:p,existenceFilterCount:I.count,databaseId:T.database,projectId:T.projectId},re=I.unchangedNames;return re&&(ye.bloomFilter={applied:V===0,hashCount:(q=re?.hashCount)!==null&&q!==void 0?q:0,bitmapLength:(Q=(X=(O=re?.bits)===null||O===void 0?void 0:O.bitmap)===null||X===void 0?void 0:X.length)!==null&&Q!==void 0?Q:0,padding:(Y=(H=re?.bits)===null||H===void 0?void 0:H.padding)!==null&&Y!==void 0?Y:0,mightContain:A=>{var m;return(m=P?.mightContain(A))!==null&&m!==void 0&&m}}),ye}(a,e.De,this.We.lt(),u,d))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,u;try{a=jt(r).toUint8Array()}catch(d){if(d instanceof go)return _n("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Qu(a,i,o)}catch(d){return _n(d instanceof Un?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.We.lt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let u=this.st(a);if(u){if(o.current&&ju(u.target)){let d=new j(u.target.path);this.Tt(d).has(a)||this.It(a,d)||this.Xe(a,d,ct.newNoDocument(d,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let r=ie();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(d=>{let h=this.st(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let i=new Eo(e,t,this.He,this.ze,r);return this.ze=vn(),this.je=io(),this.Je=io(),this.He=new _e(J),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new To,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ce(J),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ce(J),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new To),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function io(){return new _e(j.comparator)}function Em(){return new _e(j.comparator)}var UI={asc:"ASCENDING",desc:"DESCENDING"},BI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qI={and:"AND",or:"OR"},Xu=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ju(n,e){return n.useProto3Json||qo(e)?e:{value:e}}function $I(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dr(n){return he(!!n,49232),K.fromTimestamp(function(t){let r=$t(t);return new ze(r.seconds,r.nanos)}(n))}function zI(n,e){return Zu(n,e).canonicalString()}function Zu(n,e){let t=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Rg(n){let e=ge.fromString(n);return he(Ng(e),10190,{key:e.toString()}),e}function yu(n,e){let t=Rg(e);if(t.get(1)!==n.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(Pg(t))}function kg(n,e){return zI(n.databaseId,e)}function WI(n){let e=Rg(n);return e.length===4?ge.emptyPath():Pg(e)}function Im(n){return new ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Pg(n){return he(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function GI(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(h,p){return h.useProto3Json?(he(p===void 0||typeof p=="string",58123),Ue.fromBase64String(p||"")):(he(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Ue.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(h){let p=h.code===void 0?M.UNKNOWN:Cg(h.code);return new $(p,h.message||"")}(a);t=new wo(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yu(n,r.document.name),o=dr(r.document.updateTime),a=r.document.createTime?dr(r.document.createTime):K.min(),u=new Bt({mapValue:{fields:r.document.fields}}),d=ct.newFoundDocument(i,o,a,u),h=r.targetIds||[],p=r.removedTargetIds||[];t=new lr(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yu(n,r.document),o=r.readTime?dr(r.readTime):K.min(),a=ct.newNoDocument(i,o),u=r.removedTargetIds||[];t=new lr([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yu(n,r.document),o=r.removedTargetIds||[];t=new lr([],o,i,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new Ku(i,o),u=r.targetId;t=new Io(u,a)}}return t}function HI(n,e){return{documents:[kg(n,e.path)]}}function KI(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kg(n,i);let o=function(h){if(h.length!==0)return Dg(At.create(h,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(h){if(h.length!==0)return h.map(p=>function(T){return{field:ar(T.field),direction:XI(T.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let u=Ju(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:t,parent:i}}function QI(n){let e=WI(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){he(r===1,65062);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=function(I){let T=xg(I);return T instanceof At&&pg(T)?T.getFilters():[T]}(t.where));let a=[];t.orderBy&&(a=function(I){return I.map(T=>function(V){return new wr(cr(V.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(T))}(t.orderBy));let u=null;t.limit&&(u=function(I){let T;return T=typeof I=="object"?I.value:I,qo(T)?null:T}(t.limit));let d=null;t.startAt&&(d=function(I){let T=!!I.before,P=I.values||[];return new Ir(P,T)}(t.startAt));let h=null;return t.endAt&&(h=function(I){let T=!I.before,P=I.values||[];return new Ir(P,T)}(t.endAt)),II(e,i,a,o,u,"F",d,h)}function YI(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xg(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=cr(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=cr(t.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=cr(t.unaryFilter.field);return Te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=cr(t.unaryFilter.field);return Te.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(n):n.fieldFilter!==void 0?function(t){return Te.create(cr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return At.create(t.compositeFilter.filters.map(r=>xg(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(t.compositeFilter.op))}(n):G(30097,{filter:n})}function XI(n){return UI[n]}function JI(n){return BI[n]}function ZI(n){return qI[n]}function ar(n){return{fieldPath:n.canonicalString()}}function cr(n){return at.fromServerFormat(n.fieldPath)}function Dg(n){return n instanceof Te?function(t){if(t.op==="=="){if(cm(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NAN"}};if(am(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cm(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NOT_NAN"}};if(am(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(t.field),op:JI(t.op),value:t.value}}}(n):n instanceof At?function(t){let r=t.getFilters().map(i=>Dg(i));return r.length===1?r[0]:{compositeFilter:{op:ZI(t.op),filters:r}}}(n):G(54877,{filter:n})}function Ng(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Fi=class n{constructor(e,t,r,i,o=K.min(),a=K.min(),u=Ue.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var el=class{constructor(e){this.gt=e}};function ew(n){let e=QI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zu(e,e.limit,"L"):e}var bo=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(le(e.integerValue));else if("doubleValue"in e){let r=le(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),po(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=$t(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(jt(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?hg(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):dg(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):G(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let a=xi,u=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(le(u)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),j.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};bo.Ut=new bo;var tl=class{constructor(){this.Dn=new nl}addToCollectionParentIndex(e,t){return this.Dn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(jn.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},nl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ce(ge.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(ge.comparator)).toArray()}};var ES=new Uint8Array(0);var wm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Og=41943040,et=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};et.DEFAULT_COLLECTION_PERCENTILE=10,et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,et.DEFAULT=new et(Og,et.DEFAULT_COLLECTION_PERCENTILE,et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),et.DISABLED=new et(-1,0,0);var Ui=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Tm="LruGarbageCollector",tw=1048576;function bm([n,e],[t,r]){let i=J(n,t);return i===0?J(e,r):i}var rl=class{constructor(e){this.Tr=e,this.buffer=new Ce(bm),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();bm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},il=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){B(Tm,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){xr(t)?B(Tm,"Ignoring IndexedDB error during garbage collection: ",t):yield Bo(t)}yield this.Rr(3e5)}))}},sl=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(Xl.ue);let r=new rl(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(wm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wm):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,a,u,d,h,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,a=Date.now(),this.nthSequenceNumber(e,i))).next(I=>(r=I,u=Date.now(),this.removeTargets(e,r,t))).next(I=>(o=I,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(h=Date.now(),sr()<=Z.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${I} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:I})))}};function nw(n,e){return new sl(n,e)}var ol=class{constructor(){this.changes=new zt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var al=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var cl=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ri(r.mutation,i,Vn.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Fn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=Ti();return o.forEach((u,d)=>{a=a.insert(u,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Fn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let o=vn(),a=Si(),u=function(){return Si()}();return t.forEach((d,h)=>{let p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Cr)?o=o.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),Ri(p.mutation,h,p.mutation.getFieldMask(),ze.now())):a.set(h.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((h,p)=>a.set(h,p)),t.forEach((h,p)=>{var I;return u.set(h,new al(p,(I=a.get(h))!==null&&I!==void 0?I:null))}),u))}recalculateAndSaveOverlays(e,t){let r=Si(),i=new _e((a,u)=>a-u),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(d=>{let h=t.get(d);if(h===null)return;let p=r.get(d)||Vn.empty();p=u.applyToLocalView(h,p),r.set(d,p);let I=(i.get(u.batchId)||ie()).add(d);i=i.insert(u.batchId,I)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let d=u.getNext(),h=d.key,p=d.value,I=Ig();p.forEach(T=>{if(!o.has(T)){let P=Ag(t.get(T),r.get(T));P!==null&&I.set(T,P),o=o.add(T)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,I))}return N.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return j.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(Fn()),u=ki,d=o;return a.next(h=>N.forEach(h,(p,I)=>(u<I.largestBatchId&&(u=I.largestBatchId),o.get(p)?N.resolve():this.remoteDocumentCache.getEntry(e,p).next(T=>{d=d.insert(p,T)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,d,h,ie())).next(p=>({batchId:u,changes:CI(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=Ti();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=Ti();return this.indexManager.getCollectionParents(e,o).next(u=>N.forEach(u,d=>{let h=function(I,T){return new Tr(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((I,T)=>{a=a.insert(I,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((d,h)=>{let p=h.getKey();a.get(p)===null&&(a=a.insert(p,ct.newInvalidDocument(p)))});let u=Ti();return a.forEach((d,h)=>{let p=o.get(d);p!==void 0&&Ri(p.mutation,h,Vn.empty(),ze.now()),zo(t,h)&&(u=u.insert(d,h))}),u})}};var ul=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return N.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:ew(i.bundledQuery),readTime:dr(i.readTime)}}(t)),N.resolve()}};var ll=class{constructor(){this.overlays=new _e(j.comparator),this.kr=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Fn();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=Fn(),o=t.length+1,a=new j(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new _e((h,p)=>h-p),a=this.overlays.getIterator();for(;a.hasNext();){let h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=o.get(h.largestBatchId);p===null&&(p=Fn(),o=o.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}let u=Fn(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=i)););return N.resolve(u)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Hu(t,r));let o=this.kr.get(t);o===void 0&&(o=ie(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var dl=class{constructor(){this.sessionToken=Ue.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var Bi=class{constructor(){this.qr=new Ce(Ee.Qr),this.$r=new Ce(Ee.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ee(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ee(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new j(new ge([])),r=new Ee(t,e),i=new Ee(t,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new j(new ge([])),r=new Ee(t,e),i=new Ee(t,e+1),o=ie();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Ee(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ee=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return j.comparator(e.key,t.key)||J(e.Hr,t.Hr)}static Ur(e,t){return J(e.Hr,t.Hr)||j.comparator(e.key,t.key)}};var hl=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ce(Ee.Qr)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Gu(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.Yr=this.Yr.add(new Ee(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return N.resolve(a)}lookupMutationBatch(e,t){return N.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?iI:this.er-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ee(t,0),i=new Ee(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{let u=this.Zr(a.Hr);o.push(u)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ce(J);return t.forEach(i=>{let o=new Ee(i,0),a=new Ee(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],u=>{r=r.add(u.Hr)})}),N.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let a=new Ee(new j(o),0),u=new Ce(J);return this.Yr.forEachWhile(d=>{let h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(d.Hr)),!0)},a),N.resolve(this.ei(u))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){he(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return N.forEach(t.mutations,i=>{let o=new Ee(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ee(t,0),i=this.Yr.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var fl=class{constructor(e){this.ni=e,this.docs=function(){return new _e(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(t))}getEntries(e,t){let r=vn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ct.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vn(),a=t.path,u=new j(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){let{key:h,value:{document:p}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||tI(eI(p),r)<=0||(i.has(p.key)||zo(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){G(9500)}ri(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pl(this)}getSize(e){return N.resolve(this.size)}},pl=class extends ol{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var ml=class{constructor(e){this.persistence=e,this.ii=new zt(t=>ed(t),td),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.si=0,this.oi=new Bi,this.targetCount=0,this._i=Ui.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),N.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ui(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.hr(t),N.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.oi.containsKey(t))}};var Ao=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Xl(0),this.ci=!1,this.ci=!0,this.li=new dl,this.referenceDelegate=e(this),this.hi=new ml(this),this.indexManager=new tl,this.remoteDocumentCache=function(i){return new fl(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new el(t),this.Ti=new ul(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ll,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new hl(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new gl(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return N.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},gl=class extends Pu{constructor(e){super(),this.currentSequenceNumber=e}},_l=class n{constructor(e){this.persistence=e,this.Ai=new Bi,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.mi,r=>{let i=j.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,K.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return N.or([()=>N.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},So=class n{constructor(e,t){this.persistence=e,this.gi=new zt(r=>sI(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=nw(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return N.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?N.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,t).next(u=>{u||(r++,o.removeEntry(a,K.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),N.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ao(e.data.value)),t}Sr(e,t,r){return N.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var yl=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var vl=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var El=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Af()?8:rI(Ae())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new vl;return this.ws(e,t,a).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,t,a,u.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(sr()<=Z.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",or(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),N.resolve()):(sr()<=Z.DEBUG&&B("QueryEngine","Query:",or(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(sr()<=Z.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",or(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wt(t))):N.resolve())}ps(e,t){if(hm(t))return N.resolve(null);let r=wt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=zu(t,null,"F"),r=wt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=ie(...o);return this.gs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{let h=this.bs(t,u);return this.Ds(t,h,a,d.readTime)?this.ps(e,zu(t,null,"F")):this.vs(e,h,t,d)}))})))}ys(e,t,r,i){return hm(t)||i.isEqual(K.min())?N.resolve(null):this.gs.getDocuments(e,r).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,r,i)?N.resolve(null):(sr()<=Z.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),or(t)),this.vs(e,a,t,ZE(i,ki)).next(u=>u))})}bs(e,t){let r=new Ce(vg(e));return t.forEach((i,o)=>{zo(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return sr()<=Z.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",or(t)),this.gs.getDocumentsMatchingQuery(e,t,jn.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var rd="LocalStore",rw=3e8,Il=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new _e(J),this.Ms=new zt(o=>ed(o),td),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cl(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function iw(n,e,t,r){return new Il(n,e,t,r)}function Lg(n,e){return v(this,null,function*(){let t=ne(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],d=ie();for(let h of i){a.push(h.batchId);for(let p of h.mutations)d=d.add(p.key)}for(let h of o){u.push(h.batchId);for(let p of h.mutations)d=d.add(p.key)}return t.localDocuments.getDocuments(r,d).next(h=>({Bs:h,removedBatchIds:a,addedBatchIds:u}))})})})}function Mg(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function sw(n,e){let t=ne(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let u=[];e.targetChanges.forEach((p,I)=>{let T=i.get(I);if(!T)return;u.push(t.hi.removeMatchingKeys(o,p.removedDocuments,I).next(()=>t.hi.addMatchingKeys(o,p.addedDocuments,I)));let P=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(I)!==null?P=P.withResumeToken(Ue.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):p.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(p.resumeToken,r)),i=i.insert(I,P),function(q,O,X){return q.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=rw?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0}(T,P,p)&&u.push(t.hi.updateTargetData(o,P))});let d=vn(),h=ie();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))}),u.push(ow(o,a,e.documentUpdates).next(p=>{d=p.Ls,h=p.ks})),!r.isEqual(K.min())){let p=t.hi.getLastRemoteSnapshotVersion(o).next(I=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(p)}return N.waitFor(u).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,h)).next(()=>d)}).then(o=>(t.Fs=i,o))}function ow(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=vn();return t.forEach((u,d)=>{let h=o.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(K.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):B(rd,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)}),{Ls:a,ks:i}})}function aw(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.hi.allocateTargetId(r).next(a=>(i=new Fi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function wl(n,e,t){return v(this,null,function*(){let r=ne(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!xr(a))throw a;B(rd,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Am(n,e,t){let r=ne(n),i=K.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,h,p){let I=ne(d),T=I.Ms.get(p);return T!==void 0?N.resolve(I.Fs.get(T)):I.hi.getTargetData(h,p)}(r,a,wt(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,u.targetId).next(d=>{o=d})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:K.min(),t?o:ie())).next(u=>(cw(r,bI(e),u),{documents:u,qs:o})))}function cw(n,e,t){let r=n.xs.get(e)||K.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Co=class{constructor(){this.activeTargetIds=PI()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Tl=class{constructor(){this.Fo=new Co,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Co,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bl=class{xo(e){}shutdown(){}};var Sm="ConnectivityMonitor",Ro=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(Sm,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){B(Sm,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var so=null;function Al(){return so===null?so=function(){return 268435456+Math.round(2147483648*Math.random())}():so++,"0x"+so.toString(16)}var vu="RestConnection",uw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Sl=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===_o?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let a=Al(),u=this.Go(e,t.toUriEncodedString());B(vu,`Sending RPC '${e}' ${a}:`,u,r);let d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,i,o);let{host:h}=new URL(u),p=ft(h);return this.jo(e,u,d,r,p).then(I=>(B(vu,`Received RPC '${e}' ${a}: `,I),I),I=>{throw _n(vu,`RPC '${e}' ${a} failed with error: `,I,"url: ",u,"request:",r),I})}Jo(e,t,r,i,o,a){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=uw[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Cl=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Fe="WebChannelConnection",Rl=class extends Sl{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let a=Al();return new Promise((u,d)=>{let h=new hu;h.setWithCredentials(!0),h.listenOnce(fu.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wi.NO_ERROR:let I=h.getResponseJson();B(Fe,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(I)),u(I);break;case wi.TIMEOUT:B(Fe,`RPC '${e}' ${a} timed out`),d(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case wi.HTTP_ERROR:let T=h.getStatus();if(B(Fe,`RPC '${e}' ${a} failed with status:`,T,"response text:",h.getResponseText()),T>0){let P=h.getResponseJson();Array.isArray(P)&&(P=P[0]);let V=P?.error;if(V&&V.status&&V.message){let q=function(X){let Q=X.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(Q)>=0?Q:M.UNKNOWN}(V.status);d(new $(q,V.message))}else d(new $(M.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new $(M.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:a,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{B(Fe,`RPC '${e}' ${a} completed.`)}});let p=JSON.stringify(i);B(Fe,`RPC '${e}' ${a} sending request:`,i),h.send(t,"POST",p,r,15)})}P_(e,t,r){let i=Al(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=gu(),u=mu(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;let p=o.join("");B(Fe,`Creating RPC '${e}' stream ${i}: ${p}`,d);let I=a.createWebChannel(p,d);this.T_(I);let T=!1,P=!1,V=new Cl({Ho:O=>{P?B(Fe,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(T||(B(Fe,`Opening RPC '${e}' stream ${i} transport.`),I.open(),T=!0),B(Fe,`RPC '${e}' stream ${i} sending:`,O),I.send(O))},Yo:()=>I.close()}),q=(O,X,Q)=>{O.listen(X,H=>{try{Q(H)}catch(Y){setTimeout(()=>{throw Y},0)}})};return q(I,ir.EventType.OPEN,()=>{P||(B(Fe,`RPC '${e}' stream ${i} transport opened.`),V.s_())}),q(I,ir.EventType.CLOSE,()=>{P||(P=!0,B(Fe,`RPC '${e}' stream ${i} transport closed`),V.__(),this.I_(I))}),q(I,ir.EventType.ERROR,O=>{P||(P=!0,_n(Fe,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),V.__(new $(M.UNAVAILABLE,"The operation could not be completed")))}),q(I,ir.EventType.MESSAGE,O=>{var X;if(!P){let Q=O.data[0];he(!!Q,16349);let H=Q,Y=H?.error||((X=H[0])===null||X===void 0?void 0:X.error);if(Y){B(Fe,`RPC '${e}' stream ${i} received error:`,Y);let ye=Y.status,re=function(_){let w=ve[_];if(w!==void 0)return Cg(w)}(ye),A=Y.message;re===void 0&&(re=M.INTERNAL,A="Unknown error status: "+ye+" with message "+Y.message),P=!0,V.__(new $(re,A)),I.close()}else B(Fe,`RPC '${e}' stream ${i} received:`,Q),V.a_(Q)}}),q(u,pu.STAT_EVENT,O=>{O.stat===no.PROXY?B(Fe,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===no.NOPROXY&&B(Fe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.o_()},0),V}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function Eu(){return typeof document<"u"?document:null}function Vg(n){return new Xu(n,!0)}var ko=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Cm="PersistentStream",kl=class{constructor(e,t,r,i,o,a,u,d){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ko(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return B(Cm,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(B(Cm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Pl=class extends kl{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=GI(this.serializer,e),r=function(o){if(!("targetChange"in o))return K.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?K.min():a.readTime?dr(a.readTime):K.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Im(this.serializer),t.addTarget=function(o,a){let u,d=a.target;if(u=ju(d)?{documents:HI(o,d)}:{query:KI(o,d).Vt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=jI(o,a.resumeToken);let h=Ju(o,a.expectedCount);h!==null&&(u.expectedCount=h)}else if(a.snapshotVersion.compareTo(K.min())>0){u.readTime=$I(o,a.snapshotVersion.toTimestamp());let h=Ju(o,a.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);let r=YI(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Im(this.serializer),t.removeTarget=e,this.k_(t)}};var xl=class{},Dl=class extends xl{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,Zu(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Jo(e,Zu(t,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(M.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Nl=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qt(t),this._a=!1):B("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Rr="RemoteStore",Ol=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(()=>v(this,null,function*(){Gi(this)&&(B(Rr,"Restarting streams for network reachability change."),yield function(d){return v(this,null,function*(){let h=ne(d);h.Ia.add(4),yield Wi(h),h.Aa.set("Unknown"),h.Ia.delete(4),yield Wo(h)})}(this))}))}),this.Aa=new Nl(r,i)}};function Wo(n){return v(this,null,function*(){if(Gi(n))for(let e of n.da)yield e(!0)})}function Wi(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function Fg(n,e){let t=ne(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ad(t)?od(t):Dr(t).x_()&&sd(t,e))}function id(n,e){let t=ne(n),r=Dr(t);t.Ta.delete(e),r.x_()&&Ug(t,e),t.Ta.size===0&&(r.x_()?r.B_():Gi(t)&&t.Aa.set("Unknown"))}function sd(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Dr(n).H_(e)}function Ug(n,e){n.Ra.$e(e),Dr(n).Y_(e)}function od(n){n.Ra=new Yu({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Dr(n).start(),n.Aa.aa()}function ad(n){return Gi(n)&&!Dr(n).M_()&&n.Ta.size>0}function Gi(n){return ne(n).Ia.size===0}function Bg(n){n.Ra=void 0}function lw(n){return v(this,null,function*(){n.Aa.set("Online")})}function dw(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{sd(n,e)})})}function hw(n,e){return v(this,null,function*(){Bg(n),ad(n)?(n.Aa.la(e),od(n)):n.Aa.set("Unknown")})}function fw(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof wo&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let a=o.cause;for(let u of o.targetIds)i.Ta.has(u)&&(yield i.remoteSyncer.rejectListen(u,a),i.Ta.delete(u),i.Ra.removeTarget(u))})}(n,e)}catch(r){B(Rr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Rm(n,r)}else if(e instanceof lr?n.Ra.Ye(e):e instanceof Io?n.Ra.it(e):n.Ra.et(e),!t.isEqual(K.min()))try{let r=yield Mg(n.localStore);t.compareTo(r)>=0&&(yield function(o,a){let u=o.Ra.Pt(a);return u.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){let p=o.Ta.get(h);p&&o.Ta.set(h,p.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach((d,h)=>{let p=o.Ta.get(d);if(!p)return;o.Ta.set(d,p.withResumeToken(Ue.EMPTY_BYTE_STRING,p.snapshotVersion)),Ug(o,d);let I=new Fi(p.target,d,h,p.sequenceNumber);sd(o,I)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){B(Rr,"Failed to raise snapshot:",r),yield Rm(n,r)}})}function Rm(n,e,t){return v(this,null,function*(){if(!xr(e))throw e;n.Ia.add(1),yield Wi(n),n.Aa.set("Offline"),t||(t=()=>Mg(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){B(Rr,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Wo(n)}))})}function km(n,e){return v(this,null,function*(){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),B(Rr,"RemoteStore received new credentials");let r=Gi(t);t.Ia.add(3),yield Wi(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Wo(t)})}function pw(n,e){return v(this,null,function*(){let t=ne(n);e?(t.Ia.delete(2),yield Wo(t)):e||(t.Ia.add(2),yield Wi(t),t.Aa.set("Unknown"))})}function Dr(n){return n.Va||(n.Va=function(t,r,i){let o=ne(t);return o.ia(),new Pl(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:lw.bind(null,n),e_:dw.bind(null,n),n_:hw.bind(null,n),J_:fw.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),ad(n)?od(n):n.Aa.set("Unknown")):(yield n.Va.stop(),Bg(n))}))),n.Va}var Ll=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qg(n,e){if(qt("AsyncQueue",`${e}: ${n}`),xr(n))return new $(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Po=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=Ti(),this.sortedSet=new _e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xo=class{constructor(){this.fa=new _e(j.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},kr=class n{constructor(e,t,r,i,o,a,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new n(e,t,Po.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ml=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Vl=class{constructor(){this.queries=Pm(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ne(t),o=i.queries;i.queries=Pm(),o.forEach((a,u)=>{for(let d of u.wa)d.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}};function Pm(){return new zt(n=>yg(n),jo)}function mw(n,e){return v(this,null,function*(){let t=ne(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Ml,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let u=qg(a,`Initialization of query '${or(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&cd(t)})}function gw(n,e){return v(this,null,function*(){let t=ne(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function _w(n,e){let t=ne(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let u of a.wa)u.Ca(i)&&(r=!0);a.ya=i}}r&&cd(t)}function yw(n,e,t){let r=ne(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function cd(n){n.Da.forEach(e=>{e.next()})}var Fl,xm;(xm=Fl||(Fl={})).Fa="default",xm.Cache="cache";var Ul=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new kr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=kr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Fl.Cache}};var Do=class{constructor(e){this.key=e}},No=class{constructor(e){this.key=e}},Bl=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ie(),this.mutatedKeys=ie(),this.Xa=vg(e),this.eu=new Po(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new xo,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,I)=>{let T=i.get(p),P=zo(this.query,I)?I:null,V=!!T&&this.mutatedKeys.has(T.key),q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations),O=!1;T&&P?T.data.isEqual(P.data)?V!==q&&(r.track({type:3,doc:P}),O=!0):this.iu(T,P)||(r.track({type:2,doc:P}),O=!0,(d&&this.Xa(P,d)>0||h&&this.Xa(P,h)<0)&&(u=!0)):!T&&P?(r.track({type:0,doc:P}),O=!0):T&&!P&&(r.track({type:1,doc:T}),O=!0,(d||h)&&(u=!0)),O&&(P?(a=a.add(P),o=q?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{eu:a,ru:r,Ds:u,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((p,I)=>function(P,V){let q=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:O})}};return q(P)-q(V)}(p.type,I.type)||this.Xa(p.doc,I.doc)),this.su(r),i=i!=null&&i;let u=t&&!i?this.ou():[],d=this.Za.size===0&&this.current&&!i?1:0,h=d!==this.Ya;return this.Ya=d,a.length!==0||h?{snapshot:new kr(this.query,e.eu,o,a,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new xo,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ie(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new No(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Do(r))}),t}uu(e){this.Ha=e.qs,this.Za=ie();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return kr.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},ud="SyncEngine",ql=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},$l=class{constructor(e){this.key=e,this.lu=!1}},jl=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new zt(u=>yg(u),jo),this.Tu=new Map,this.Iu=new Set,this.du=new _e(j.comparator),this.Eu=new Map,this.Au=new Bi,this.Ru={},this.Vu=new Map,this.mu=Ui.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function vw(n,e,t=!0){return v(this,null,function*(){let r=Gg(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield $g(r,e,t,!0),i})}function Ew(n,e){return v(this,null,function*(){let t=Gg(n);yield $g(t,e,!0,!1)})}function $g(n,e,t,r){return v(this,null,function*(){let i=yield aw(n.localStore,wt(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),u;return r&&(u=yield Iw(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Fg(n.remoteStore,i),u})}function Iw(n,e,t,r,i){return v(this,null,function*(){n.gu=(I,T,P)=>function(q,O,X,Q){return v(this,null,function*(){let H=O.view.nu(X);H.Ds&&(H=yield Am(q.localStore,O.query,!1).then(({documents:A})=>O.view.nu(A,H)));let Y=Q&&Q.targetChanges.get(O.targetId),ye=Q&&Q.targetMismatches.get(O.targetId)!=null,re=O.view.applyChanges(H,q.isPrimaryClient,Y,ye);return Nm(q,O.targetId,re._u),re.snapshot})}(n,I,T,P);let o=yield Am(n.localStore,e,!0),a=new Bl(e,o.qs),u=a.nu(o.documents),d=Vi.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(u,n.isPrimaryClient,d);Nm(n,t,h._u);let p=new ql(e,t,a);return n.Pu.set(e,p),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),h.snapshot})}function ww(n,e,t){return v(this,null,function*(){let r=ne(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(a=>!jo(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&id(r.remoteStore,i.targetId),zl(r,i.targetId)}).catch(Bo))):(zl(r,i.targetId),yield wl(r.localStore,i.targetId,!0))})}function Tw(n,e){return v(this,null,function*(){let t=ne(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),id(t.remoteStore,r.targetId))})}function jg(n,e){return v(this,null,function*(){let t=ne(n);try{let r=yield sw(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Eu.get(o);a&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?he(a.lu,14607):i.removedDocuments.size>0&&(he(a.lu,42227),a.lu=!1))}),yield Wg(t,r,e)}catch(r){yield Bo(r)}})}function Dm(n,e,t){let r=ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){let d=ne(a);d.onlineState=u;let h=!1;d.queries.forEach((p,I)=>{for(let T of I.wa)T.va(u)&&(h=!0)}),h&&cd(d)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bw(n,e,t){return v(this,null,function*(){let r=ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let a=new _e(j.comparator);a=a.insert(o,ct.newNoDocument(o,K.min()));let u=ie().add(o),d=new Eo(K.min(),new Map,new _e(J),a,u);yield jg(r,d),r.du=r.du.remove(o),r.Eu.delete(e),ld(r)}else yield wl(r.localStore,e,!1).then(()=>zl(r,e,t)).catch(Bo)})}function zl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||zg(n,r)})}function zg(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(id(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ld(n))}function Nm(n,e,t){for(let r of t)r instanceof Do?(n.Au.addReference(r.key,e),Aw(n,r)):r instanceof No?(B(ud,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||zg(n,r.key)):G(19791,{yu:r})}function Aw(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(B(ud,"New document in limbo: "+t),n.Iu.add(r),ld(n))}function ld(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new j(ge.fromString(e)),r=n.mu.next();n.Eu.set(r,new $l(t)),n.du=n.du.insert(t,r),Fg(n.remoteStore,new Fi(wt(nd(t.path)),r,"TargetPurposeLimboResolution",Xl.ue))}}function Wg(n,e,t){return v(this,null,function*(){let r=ne(n),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((u,d)=>{a.push(r.gu(d,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){let I=h?!h.fromCache:(p=t?.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(d.targetId,I?"current":"not-current")}if(h){i.push(h);let I=yl.Es(d.targetId,h);o.push(I)}}))}),yield Promise.all(a),r.hu.J_(i),yield function(d,h){return v(this,null,function*(){let p=ne(d);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>N.forEach(h,T=>N.forEach(T.Is,P=>p.persistence.referenceDelegate.addReference(I,T.targetId,P)).next(()=>N.forEach(T.ds,P=>p.persistence.referenceDelegate.removeReference(I,T.targetId,P)))))}catch(I){if(!xr(I))throw I;B(rd,"Failed to update sequence numbers: "+I)}for(let I of h){let T=I.targetId;if(!I.fromCache){let P=p.Fs.get(T),V=P.snapshotVersion,q=P.withLastLimboFreeSnapshotVersion(V);p.Fs=p.Fs.insert(T,q)}}})}(r.localStore,o))})}function Sw(n,e){return v(this,null,function*(){let t=ne(n);if(!t.currentUser.isEqual(e)){B(ud,"User change. New user:",e.toKey());let r=yield Lg(t.localStore,e);t.currentUser=e,function(o,a){o.Vu.forEach(u=>{u.forEach(d=>{d.reject(new $(M.CANCELLED,a))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wg(t,r.Bs)}})}function Cw(n,e){let t=ne(n),r=t.Eu.get(e);if(r&&r.lu)return ie().add(r.key);{let i=ie(),o=t.Tu.get(e);if(!o)return i;for(let a of o){let u=t.Pu.get(a);i=i.unionWith(u.view.tu)}return i}}function Gg(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bw.bind(null,e),e.hu.J_=_w.bind(null,e.eventManager),e.hu.pu=yw.bind(null,e.eventManager),e}var Hg=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Vg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return iw(this.persistence,new El,t.initialUser,this.serializer)}Du(t){return new Ao(_l.Vi,this.serializer)}bu(t){return new Tl}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Wl=class extends Hg{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){he(this.persistence.referenceDelegate instanceof So,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new il(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?et.withCacheSize(this.cacheSizeBytes):et.DEFAULT;return new Ao(r=>So.Vi(r,t),this.serializer)}};var Rw=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Dm(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sw.bind(null,this.syncEngine),yield pw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Vl}()}createDatastore(t){let r=Vg(t.databaseInfo.databaseId),i=function(a){return new Rl(a)}(t.databaseInfo);return function(a,u,d,h){return new Dl(a,u,d,h)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,a,u,d){return new Ol(i,o,a,u,d)}(this.localStore,this.datastore,t.asyncQueue,r=>Dm(this.syncEngine,r,0),function(){return Ro.C()?new Ro:new bl}())}createSyncEngine(t,r){return function(o,a,u,d,h,p,I){let T=new jl(o,a,u,d,h,p);return I&&(T.fu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let a=ne(o);B(Rr,"RemoteStore shutting down."),a.Ia.add(5),yield Wi(a),a.Ea.shutdown(),a.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Gl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var En="FirestoreClient",Hl=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Se.UNAUTHENTICATED,this.clientId=ho.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>v(this,null,function*(){B(En,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(B(En,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=qg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Iu(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B(En,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield Lg(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{_n("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{_n("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Om(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield kw(n);B(En,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>km(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>km(e.remoteStore,i)),n._onlineComponents=e})}function kw(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(En,"Using user provided OfflineComponentProvider");try{yield Iu(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;_n("Error using user provided cache. Falling back to memory cache: "+t),yield Iu(n,new Hg)}}else B(En,"Using default OfflineComponentProvider"),yield Iu(n,new Wl(void 0));return n._offlineComponents})}function Pw(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(En,"Using user provided OnlineComponentProvider"),yield Om(n,n._uninitializedComponentsProvider._online)):(B(En,"Using default OnlineComponentProvider"),yield Om(n,new Rw))),n._onlineComponents})}function Lm(n){return v(this,null,function*(){let e=yield Pw(n),t=e.eventManager;return t.onListen=vw.bind(null,e.syncEngine),t.onUnlisten=ww.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ew.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Tw.bind(null,e.syncEngine),t})}function Kg(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Mm=new Map;var Qg="firestore.googleapis.com",Vm=!0,Oo=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qg,this.ssl=Vm}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Vm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Og;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tw)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oo({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oo(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wu;switch(r.type){case"firstParty":return new Su(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Mm.get(t);r&&(B("ComponentProvider","Removing Datastore"),Mm.delete(t),r.terminate())}(this),Promise.resolve()}};function Yg(n,e,t,r={}){var i;n=oo(n,qi);let o=ft(e),a=n._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;o&&(er(`https://${d}`),tr("Firestore",!0)),a.host!==Qg&&a.host!==d&&_n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=Object.assign(Object.assign({},a),{host:d,ssl:o,emulatorOptions:r});if(!pt(h,u)&&(n._setSettings(h),r.mockUserToken)){let p,I;if(typeof r.mockUserToken=="string")p=r.mockUserToken,I=Se.MOCK_USER;else{p=xs(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Se(T)}n._authCredentials=new Tu(new uo(p,I))}}var Lo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Tt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ji(t,n._jsonSchema))return new n(e,r||null,new j(ge.fromString(t.referencePath)))}};Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:Ie("string",Tt._jsonSchemaVersion),referencePath:Ie("string")};var hr=class n extends Lo{constructor(e,t,r){super(e,t,nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Xg(n,e,...t){if(n=Ye(n),QE("collection","path",e),n instanceof qi){let r=ge.fromString(e,...t);return em(r),new hr(n,null,r)}{if(!(n instanceof Tt||n instanceof hr))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ge.fromString(e,...t));return em(r),new hr(n.firestore,null,r)}}var Fm="AsyncQueue",Mo=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ko(this,"async_queue_retry"),this.oc=()=>{let r=Eu();r&&B(Fm,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Eu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Eu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new gn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!xr(e))throw e;B(Fm,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,qt("INTERNAL UNHANDLED ERROR: ",Um(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Ll.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&G(47125,{hc:Um(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Um(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Bm(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var $i=class extends qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Mo,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Mo(e),this._firestoreClient=void 0,yield e}})}};function Jg(n,e){let t=typeof n=="object"?n:Ot(),r=typeof n=="string"?n:e||_o,i=cn(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Ps("firestore");o&&Yg(i,...o)}return i}function xw(n){if(n._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Dw(n),n._firestoreClient}function Dw(n){var e,t,r;let i=n._freezeSettings(),o=function(u,d,h,p){return new xu(u,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Kg(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Hl(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){let d=u?._online.build();return{_offline:u?._offline.build(d),_online:d}}(n._componentsProvider))}var fr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ue.fromBase64String(e))}catch(t){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ue.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ji(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};fr._jsonSchemaVersion="firestore/bytes/1.0",fr._jsonSchema={type:Ie("string",fr._jsonSchemaVersion),bytes:Ie("string")};var Vo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ji(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:Ie("string",pr._jsonSchemaVersion),latitude:Ie("number"),longitude:Ie("number")};var mr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ji(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new $(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:Ie("string",mr._jsonSchemaVersion),vectorValues:Ie("object")};var Nw=new RegExp("[~\\*/\\[\\]]");function Ow(n,e,t){if(e.search(Nw)>=0)throw qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vo(...e.split("."))._internalPath}catch{throw qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qm(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new $(M.INVALID_ARGUMENT,u+n+d)}var Fo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kl=class extends Fo{data(){return super.data()}};function Zg(n,e){return typeof e=="string"?Ow(n,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}function Lw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ql=class{convertValue(e,t="none"){switch(yn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return zi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[xi].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>le(a.doubleValue));return new mr(o)}convertGeoPoint(e){return new pr(le(e.latitude),le(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=$o(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pi(e));default:return null}}convertTimestamp(e){let t=$t(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ge.fromString(e);he(Ng(r),9688,{name:e});let i=new yo(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(t)||qt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};var Bn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},qn=class n extends Fo{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new gr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};qn._jsonSchemaVersion="firestore/documentSnapshot/1.0",qn._jsonSchema={type:Ie("string",qn._jsonSchemaVersion),bundleSource:Ie("string","DocumentSnapshot"),bundleName:Ie("string"),bundle:Ie("string")};var gr=class extends qn{data(e={}){return super.data(e)}},_r=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gr(this._firestore,this._userDataWriter,r.key,r,new Bn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let d=new gr(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Bn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let d=new gr(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Bn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,p=-1;return u.type!==0&&(h=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:Mw(u.type),doc:d,oldIndex:h,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ho.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Mw(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:n})}}_r._jsonSchemaVersion="firestore/querySnapshot/1.0",_r._jsonSchema={type:Ie("string",_r._jsonSchemaVersion),bundleSource:Ie("string","QuerySnapshot"),bundleName:Ie("string"),bundle:Ie("string")};var Uo=class extends Ql{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}};function dd(n,...e){var t,r,i;n=Ye(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Bm(e[a])||(o=e[a++]);let u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Bm(e[a])){let I=e[a];e[a]=(t=I.next)===null||t===void 0?void 0:t.bind(I),e[a+1]=(r=I.error)===null||r===void 0?void 0:r.bind(I),e[a+2]=(i=I.complete)===null||i===void 0?void 0:i.bind(I)}let d,h,p;if(n instanceof Tt)h=oo(n.firestore,$i),p=nd(n._key.path),d={next:I=>{e[a]&&e[a](Vw(h,n,I))},error:e[a+1],complete:e[a+2]};else{let I=oo(n,Lo);h=oo(I.firestore,$i),p=I._query;let T=new Uo(h);d={next:P=>{e[a]&&e[a](new _r(h,T,I,P))},error:e[a+1],complete:e[a+2]},Lw(n._query)}return function(T,P,V,q){let O=new Gl(q),X=new Ul(P,O,V);return T.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return mw(yield Lm(T),X)})),()=>{O.Ou(),T.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return gw(yield Lm(T),X)}))}}(xw(h),p,u,d)}function Vw(n,e,t){let r=t.docs.get(e._key),i=new Uo(n);return new qn(n,i,e._key,r,new Bn(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Pr=i})(_t),Xe(new xe("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new $i(new bu(r.getProvider("auth-internal")),new Cu(a,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(h.options.projectId,p)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ae(Yp,Xp,e),ae(Yp,Xp,"esm2017")})();var Go=function(){return Go=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Go.apply(this,arguments)};var Bw={includeMetadataChanges:!1};function e0(n,e){return e===void 0&&(e=Bw),new Cn(function(t){var r=dd(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function t0(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Go(Go({},r),(t={},t[e.idField]=n.id,t))}function n0(n){return e0(n,{includeMetadataChanges:!0}).pipe(qa(function(e){return e.docs}))}function r0(n,e){return e===void 0&&(e={}),n0(n).pipe(qa(function(t){return t.map(function(r){return t0(r,e)})}))}var zn=class{constructor(e){return e}},i0="firestore",hd=class{constructor(){return un(i0)}};var fd=new ut("angularfire2.firestore-instances");function qw(n,e){let t=xn(i0,n,e);return t&&new zn(t)}function $w(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zn(r)}}var jw={provide:hd,deps:[[new ke,fd]]},zw={provide:zn,useFactory:qw,deps:[[new ke,fd],st]};function s0(n,...e){return ae("angularfire",yt.full,"fst"),lt([zw,jw,{provide:fd,useFactory:$w(n),multi:!0,deps:[We,Je,vt,Lt,[new ke,Mn],[new ke,dn],...e]}])}var o0=it(r0,!0);var a0=it(Xg,!0,2);var c0=it(Jg,!0);var Ho=class n{firestore=Me(zn);constructor(){}getCols(e){let t=a0(this.firestore,e);return o0(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Yn({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qo=n=>({label:"PH",value:n,type:"ph"}),Yo=n=>({label:"DO",value:n,type:"do"}),Xo=n=>({label:"NH4",value:n,type:"nh4"}),Jo=n=>({label:"SALT",value:n,type:"salinity"}),Zo=n=>({label:"TEMP",value:n,type:"temp"}),ea=(n,e,t,r,i)=>[n,e,t,r,i],ta=(n,e)=>e.tankId,na=(n,e)=>e.label;function Ww(n,e){if(n&1&&(y(0,"div",9)(1,"div",15)(2,"span",16),E(3),b()(),y(4,"div",17)(5,"span",18),E(6),b()()()),n&2){let t=e.$implicit,r=de(3);x(3),Pe(t.label),x(),W("ngClass",r.getSensorCardClasses(t.value,t.type)),x(2),Pe(t.value)}}function Gw(n,e){if(n&1&&(y(0,"div",19),D(1,"i",20),y(2,"span",21),E(3,"Water Level"),b()(),D(4,"p-progressbar",22)),n&2){let t=de().$implicit;x(4),W("value",t.waterlevel)("showValue",!0)}}function Hw(n,e){n&1&&(y(0,"div",23),E(1,"Water level data unavailable."),b(),D(2,"p-progressbar",24)),n&2&&(x(2),W("value",0)("showValue",!1))}function Kw(n,e){if(n&1&&(y(0,"div",11)(1,"div",25)(2,"span",26),E(3," Growout"),b(),y(4,"span",27),E(5),b()(),y(6,"div",28),D(7,"div",29),b(),y(8,"div",30)(9,"span"),E(10," Aged: "),y(11,"span",31),E(12),b(),E(13," days "),b(),y(14,"span"),E(15," Total: "),y(16,"span",31),E(17),b(),E(18," days "),b(),y(19,"span"),E(20," Left: "),y(21,"span",31),E(22),b(),E(23," days "),b()()()),n&2){let t=e;x(5),ue(" ",t.completionPercentage,"% "),x(2),ti("width",t.completionPercentage,"%"),x(5),ue(" ",t.daysSinceStock," "),x(5),ue(" ",t.totalGrowoutDays," "),x(5),ue(" ",t.daysUntilRelease," ")}}function Qw(n,e){n&1&&E(0," Loading... ")}function Yw(n,e){if(n&1&&(y(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),D(4,"i",6),y(5,"span",7),E(6),b()(),y(7,"span",7),E(8),b()(),y(9,"div",8),Pt(10,Ww,7,3,"div",9,na),b(),y(12,"div",10),Ke(13,Gw,5,2)(14,Hw,3,2),b(),y(15,"div",10),Ke(16,Kw,24,6,"div",11)(17,Qw,1,0),b(),y(18,"div",12)(19,"span",13),E(20,"Last updated:"),b(),y(21,"span",14),E(22),Dt(23,"date"),b()()()()),n&2){let t,r=e.$implicit,i=de(2);x(6),Pe(r.tankId),x(2),ue(" ",r.currentStock.toUpperCase()," "),x(2),xt(ni(18,ea,me(8,Qo,r.ph),me(10,Yo,r.do),me(12,Xo,r.nh4),me(14,Jo,r.salinity),me(16,Zo,r.temp_c))),x(3),Qe(r.waterlevel!==null?13:14),x(3),Qe((t=i.getGrowout(r.stockDate.toDate(),r.releaseDate.toDate()))?16:17,t),x(6),ue(" ",r.timestamp?ii(23,5,r.timestamp,"shortTime"):"Now"," ")}}function Xw(n,e){n&1&&(y(0,"div",0),Pt(1,Yw,24,24,"div",2,ta),b()),n&2&&(x(),xt(e))}function Jw(n,e){n&1&&(y(0,"div",1)(1,"div",32)(2,"div",33)(3,"p",34),D(4,"i",35),E(5," Loading Zone A data... "),b()()()())}function Zw(n,e){if(n&1&&(y(0,"div",9)(1,"div",15)(2,"span",16),E(3),b()(),y(4,"div",17)(5,"span",18),E(6),b()()()),n&2){let t=e.$implicit,r=de(3);x(3),Pe(t.label),x(),W("ngClass",r.getSensorCardClasses(t.value,t.type)),x(2),Pe(t.value)}}function e2(n,e){if(n&1&&(y(0,"div",19),D(1,"i",20),y(2,"span",21),E(3,"Water Level"),b()(),D(4,"p-progressbar",22)),n&2){let t=de().$implicit;x(4),W("value",t.waterlevel)("showValue",!0)}}function t2(n,e){n&1&&(y(0,"div",23),E(1,"Water level data unavailable."),b(),D(2,"p-progressbar",24)),n&2&&(x(2),W("value",0)("showValue",!1))}function n2(n,e){if(n&1&&(y(0,"div",11)(1,"div",25)(2,"span",26),E(3," Growout"),b(),y(4,"span",27),E(5),b()(),y(6,"div",28),D(7,"div",29),b(),y(8,"div",30)(9,"span"),E(10," Aged: "),y(11,"span",31),E(12),b(),E(13," days "),b(),y(14,"span"),E(15," Total: "),y(16,"span",31),E(17),b(),E(18," days "),b(),y(19,"span"),E(20," Left: "),y(21,"span",31),E(22),b(),E(23," days "),b()()()),n&2){let t=e;x(5),ue(" ",t.completionPercentage,"% "),x(2),ti("width",t.completionPercentage,"%"),x(5),ue(" ",t.daysSinceStock," "),x(5),ue(" ",t.totalGrowoutDays," "),x(5),ue(" ",t.daysUntilRelease," ")}}function r2(n,e){n&1&&E(0," Loading... ")}function i2(n,e){if(n&1&&(y(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),D(4,"i",6),y(5,"span",7),E(6),b()(),y(7,"span",7),E(8),b()(),y(9,"div",8),Pt(10,Zw,7,3,"div",9,na),b(),y(12,"div",10),Ke(13,e2,5,2)(14,t2,3,2),b(),y(15,"div",10),Ke(16,n2,24,6,"div",11)(17,r2,1,0),b(),y(18,"div",12)(19,"span",13),E(20,"Last updated:"),b(),y(21,"span",14),E(22),Dt(23,"date"),b()()()()),n&2){let t,r=e.$implicit,i=de(2);x(6),Pe(r.tankId),x(2),ue(" ",r.currentStock.toUpperCase()," "),x(2),xt(ni(18,ea,me(8,Qo,r.ph),me(10,Yo,r.do),me(12,Xo,r.nh4),me(14,Jo,r.salinity),me(16,Zo,r.temp_c))),x(3),Qe(r.waterlevel!==null?13:14),x(3),Qe((t=i.getGrowout(r.stockDate.toDate(),r.releaseDate.toDate()))?16:17,t),x(6),ue(" ",r.timestamp?ii(23,5,r.timestamp,"shortTime"):"Now"," ")}}function s2(n,e){n&1&&(y(0,"div",0),Pt(1,i2,24,24,"div",2,ta),b()),n&2&&(x(),xt(e))}function o2(n,e){n&1&&(y(0,"div",1)(1,"div",32)(2,"div",33)(3,"p",34),D(4,"i",35),E(5," Loading Zone B data... "),b()()()())}function a2(n,e){if(n&1&&(y(0,"div",9)(1,"div",15)(2,"span",16),E(3),b()(),y(4,"div",17)(5,"span",18),E(6),b()()()),n&2){let t=e.$implicit,r=de(3);x(3),Pe(t.label),x(),W("ngClass",r.getSensorCardClasses(t.value,t.type)),x(2),Pe(t.value)}}function c2(n,e){if(n&1&&(y(0,"div",19),D(1,"i",20),y(2,"span",21),E(3,"Water Level"),b()(),D(4,"p-progressbar",22)),n&2){let t=de().$implicit;x(4),W("value",t.waterlevel)("showValue",!0)}}function u2(n,e){n&1&&(y(0,"div",23),E(1,"Water level data unavailable."),b(),D(2,"p-progressbar",24)),n&2&&(x(2),W("value",0)("showValue",!1))}function l2(n,e){if(n&1&&(y(0,"div",11)(1,"div",25)(2,"span",26),E(3," Growout"),b(),y(4,"span",27),E(5),b()(),y(6,"div",28),D(7,"div",29),b(),y(8,"div",30)(9,"span"),E(10," Aged: "),y(11,"span",31),E(12),b(),E(13," days "),b(),y(14,"span"),E(15," Total: "),y(16,"span",31),E(17),b(),E(18," days "),b(),y(19,"span"),E(20," Left: "),y(21,"span",31),E(22),b(),E(23," days "),b()()()),n&2){let t=e;x(5),ue(" ",t.completionPercentage,"% "),x(2),ti("width",t.completionPercentage,"%"),x(5),ue(" ",t.daysSinceStock," "),x(5),ue(" ",t.totalGrowoutDays," "),x(5),ue(" ",t.daysUntilRelease," ")}}function d2(n,e){n&1&&E(0," Loading... ")}function h2(n,e){if(n&1&&(y(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),D(4,"i",6),y(5,"span",7),E(6),b()(),y(7,"span",7),E(8),b()(),y(9,"div",8),Pt(10,a2,7,3,"div",9,na),b(),y(12,"div",10),Ke(13,c2,5,2)(14,u2,3,2),b(),y(15,"div",10),Ke(16,l2,24,6,"div",11)(17,d2,1,0),b(),y(18,"div",12)(19,"span",13),E(20,"Last updated:"),b(),y(21,"span",14),E(22),Dt(23,"date"),b()()()()),n&2){let t,r=e.$implicit,i=de(2);x(6),Pe(r.tankId),x(2),ue(" ",r.currentStock.toUpperCase()," "),x(2),xt(ni(18,ea,me(8,Qo,r.ph),me(10,Yo,r.do),me(12,Xo,r.nh4),me(14,Jo,r.salinity),me(16,Zo,r.temp_c))),x(3),Qe(r.waterlevel!==null?13:14),x(3),Qe((t=i.getGrowout(r.stockDate.toDate(),r.releaseDate.toDate()))?16:17,t),x(6),ue(" ",r.timestamp?ii(23,5,r.timestamp,"shortTime"):"Now"," ")}}function f2(n,e){n&1&&(y(0,"div",0),Pt(1,h2,24,24,"div",2,ta),b()),n&2&&(x(),xt(e))}function p2(n,e){n&1&&(y(0,"div",1)(1,"div",32)(2,"div",33)(3,"p",34),D(4,"i",35),E(5," Loading Zone C data... "),b()()()())}function m2(n,e){if(n&1&&(y(0,"div",9)(1,"div",15)(2,"span",16),E(3),b()(),y(4,"div",17)(5,"span",18),E(6),b()()()),n&2){let t=e.$implicit,r=de(3);x(3),Pe(t.label),x(),W("ngClass",r.getSensorCardClasses(t.value,t.type)),x(2),Pe(t.value)}}function g2(n,e){if(n&1&&(y(0,"div",19),D(1,"i",20),y(2,"span",21),E(3,"Water Level"),b()(),D(4,"p-progressbar",22)),n&2){let t=de().$implicit;x(4),W("value",t.waterlevel)("showValue",!0)}}function _2(n,e){n&1&&(y(0,"div",23),E(1,"Water level data unavailable."),b(),D(2,"p-progressbar",24)),n&2&&(x(2),W("value",0)("showValue",!1))}function y2(n,e){if(n&1&&(y(0,"div",11)(1,"div",25)(2,"span",26),E(3," Growout"),b(),y(4,"span",27),E(5),b()(),y(6,"div",28),D(7,"div",29),b(),y(8,"div",30)(9,"span"),E(10," Aged: "),y(11,"span",31),E(12),b(),E(13," days "),b(),y(14,"span"),E(15," Total: "),y(16,"span",31),E(17),b(),E(18," days "),b(),y(19,"span"),E(20," Left: "),y(21,"span",31),E(22),b(),E(23," days "),b()()()),n&2){let t=e;x(5),ue(" ",t.completionPercentage,"% "),x(2),ti("width",t.completionPercentage,"%"),x(5),ue(" ",t.daysSinceStock," "),x(5),ue(" ",t.totalGrowoutDays," "),x(5),ue(" ",t.daysUntilRelease," ")}}function v2(n,e){n&1&&E(0," Loading... ")}function E2(n,e){if(n&1&&(y(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),D(4,"i",6),y(5,"span",7),E(6),b()(),y(7,"span",7),E(8),b()(),y(9,"div",8),Pt(10,m2,7,3,"div",9,na),b(),y(12,"div",10),Ke(13,g2,5,2)(14,_2,3,2),b(),y(15,"div",10),Ke(16,y2,24,6,"div",11)(17,v2,1,0),b(),y(18,"div",12)(19,"span",13),E(20,"Last updated:"),b(),y(21,"span",14),E(22),Dt(23,"date"),b()()()()),n&2){let t,r=e.$implicit,i=de(2);x(6),Pe(r.tankId),x(2),ue(" ",r.currentStock.toUpperCase()," "),x(2),xt(ni(18,ea,me(8,Qo,r.ph),me(10,Yo,r.do),me(12,Xo,r.nh4),me(14,Jo,r.salinity),me(16,Zo,r.temp_c))),x(3),Qe(r.waterlevel!==null?13:14),x(3),Qe((t=i.getGrowout(r.stockDate.toDate(),r.releaseDate.toDate()))?16:17,t),x(6),ue(" ",r.timestamp?ii(23,5,r.timestamp,"shortTime"):"Now"," ")}}function I2(n,e){n&1&&(y(0,"div",0),Pt(1,E2,24,24,"div",2,ta),b()),n&2&&(x(),xt(e))}function w2(n,e){n&1&&(y(0,"div",1)(1,"div",32)(2,"div",33)(3,"p",34),D(4,"i",35),E(5," Loading Zone D data... "),b()()()())}var Ko=class n{firestoreDataService=Me(Ho);zoneA$;zoneB$;zoneC$;zoneD$;ZONES=["zone_A","zone_B","zone_C","zone_D"];constructor(){this.zoneA$=this.firestoreDataService.getCols("zone_A").pipe(Qn([])),this.zoneB$=this.firestoreDataService.getCols("zone_B").pipe(Qn([])),this.zoneC$=this.firestoreDataService.getCols("zone_C").pipe(Qn([])),this.zoneD$=this.firestoreDataService.getCols("zone_D").pipe(Qn([]))}ngOnInit(){}getSensorCardClasses(e,t){let r="bg-gray-500";switch(t){case"ph":e>=6.5&&e<=7.5?r="bg-green-500":e>=6&&e<6.5||e>7.5&&e<=8?r="bg-yellow-500":r="bg-red-500";break;case"do":e<4?r="bg-red-500":e<5?r="bg-yellow-500":r="bg-green-500";break;case"nh4":e>=.4?r="bg-red-500":r="bg-green-500";break;case"salinity":e<25?r="bg-red-500":r="bg-green-500";break;case"temp":e>=30?r="bg-red-500":e<=25?r="bg-blue-500":r="bg-green-500";break;default:r="bg-gray-500";break}return r}MS_IN_DAY=1e3*60*60*24;getGrowout(e,t){let i=new Date("2025-10-16T08:31:51+07:00").getTime(),o=this.MS_IN_DAY,a=Math.floor(i/o)*o,u=Math.floor(e/o)*o,d=Math.floor(t/o)*o,h=t-e,p=Math.floor(h/o);if(p<=0)return{totalDurationMs:0,totalGrowoutDays:0,daysSinceStock:0,daysUntilRelease:0,completionPercentage:0};let I=a-u,T=Math.max(0,Math.floor(I/o)),P=d-a,V=Math.max(0,Math.floor(P/o)),q=T/p*100;return{totalDurationMs:h,totalGrowoutDays:p,daysSinceStock:T,daysUntilRelease:V,completionPercentage:Math.min(100,parseFloat(q.toFixed(1)))}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-farmzonedash"]],decls:12,vars:12,consts:[[1,"grid","grid-cols-12","gap-6","p-4"],[1,"grid","grid-cols-12","p-4"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","xl:col-span-3"],[1,"app-dashboard-card","border-t-4","border-blue-500"],[1,"flex","justify-between","items-center","mb-4"],[1,"flex","items-center","text-gray-500","dark:text-gray-400","font-medium"],[1,"pi","pi-database","mr-2"],[1,"text-blue-600","dark:text-blue-400","font-extrabold","text-lg"],[1,"mb-6","grid","grid-cols-5","gap-2"],[1,"text-center","rounded-lg","shadow-sm","border","border-gray-300","dark:border-gray-600","transition","duration-200","ease-in-out","hover:shadow-xl","overflow-hidden"],[1,"app-water-level-bar"],[1,"app-growout-progress","px-4","py-2","bg-gray-50","dark:bg-gray-700","rounded-b-xl"],[1,"mt-4","flex","justify-between","items-center","text-sm"],[1,"text-primary","font-medium","text-blue-500"],[1,"text-gray-500","dark:text-gray-400","font-semibold"],[1,"app-sensor-header"],[1,"text-xs","uppercase","font-semibold","leading-none"],[1,"app-sensor-value",3,"ngClass"],[1,"text-base","font-extrabold","leading-none"],[1,"flex","items-center","mb-2","text-gray-700","dark:text-gray-300"],[1,"pi","pi-box","mr-2"],["id","label_status",1,"font-semibold","text-sm"],["aria-labelledby","label_status","color","#b1fa8c",3,"value","showValue"],[1,"text-center","text-sm","text-gray-500","dark:text-gray-400","mb-2"],["color","gray",3,"value","showValue"],[1,"flex","justify-between","items-center","mb-1"],[1,"text-xs","font-semibold","uppercase","text-gray-600","dark:text-gray-400"],[1,"text-base","font-extrabold","text-blue-600","dark:text-blue-400"],[1,"w-full","h-2","bg-gray-300","dark:bg-gray-600","rounded-full","overflow-hidden"],[1,"h-full","bg-blue-500","transition-all","duration-500"],[1,"flex","justify-between","items-center","mt-2","text-xs","font-medium","text-gray-500","dark:text-gray-400"],[1,"font-bold","text-gray-700","dark:text-gray-300"],[1,"col-span-12"],[1,"app-loading-container"],[1,"text-500","text-center","text-gray-500","dark:text-gray-400","text-lg"],[1,"pi","pi-spinner","pi-spin","mr-3"]],template:function(t,r){if(t&1&&(Ke(0,Xw,3,0,"div",0),Dt(1,"async"),ei(2,Jw,6,0,"div",1),Ke(3,s2,3,0,"div",0),Dt(4,"async"),ei(5,o2,6,0,"div",1),Ke(6,f2,3,0,"div",0),Dt(7,"async"),ei(8,p2,6,0,"div",1),Ke(9,I2,3,0,"div",0),Dt(10,"async"),ei(11,w2,6,0,"div",1)),t&2){let i,o,a,u;Qe((i=ri(1,4,r.zoneA$))?0:2,i),x(3),Qe((o=ri(4,6,r.zoneB$))?3:5,o),x(3),Qe((a=ri(7,8,r.zoneC$))?6:8,a),x(3),Qe((u=ri(10,10,r.zoneD$))?9:11,u)}},dependencies:[Ze,tn,lf,uf,cf,Wh,Gh],styles:[".app-dashboard-card[_ngcontent-%COMP%]{border-radius:.5rem;padding:1.25rem;box-shadow:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;transition:all .3s ease}.app-loading-container[_ngcontent-%COMP%]{padding:2rem;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a}.app-sensor-header[_ngcontent-%COMP%]{padding:.25rem;border-bottom:1px solid #e5e7eb}.app-sensor-value[_ngcontent-%COMP%]{padding:.5rem}.app-water-level-bar[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;margin-top:1rem}p-progressbar[_ngcontent-%COMP%]{--p-progressbar-label-color: black;--p-progressbar-height: 10px}"],changeDetection:0})};var ra=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-dashboard"]],decls:4,vars:0,consts:[[1,"col-span-12","xl:col-span-6"],[1,"content"]],template:function(t,r){t&1&&(y(0,"div",0),D(1,"app-farmzonedash",1)(2,"div",0)(3,"div",0),b())},dependencies:[Ko],encapsulation:2})};var ia=class n{constructor(e){this.router=e}static \u0275fac=function(t){return new(t||n)($e(nn))};static \u0275cmp=ee({type:n,selectors:[["topbar-widget"]],decls:33,vars:7,consts:[["href","#",1,"flex","items-center"],["viewBox","0 0 54 40","fill","none","xmlns","http://www.w3.org/2000/svg",1,"h-12","mr-2"],["fill-rule","evenodd","clip-rule","evenodd","d","M17.1637 19.2467C17.1566 19.4033 17.1529 19.561 17.1529 19.7194C17.1529 25.3503 21.7203 29.915 27.3546 29.915C32.9887 29.915 37.5561 25.3503 37.5561 19.7194C37.5561 19.5572 37.5524 19.3959 37.5449 19.2355C38.5617 19.0801 39.5759 18.9013 40.5867 18.6994L40.6926 18.6782C40.7191 19.0218 40.7326 19.369 40.7326 19.7194C40.7326 27.1036 34.743 33.0896 27.3546 33.0896C19.966 33.0896 13.9765 27.1036 13.9765 19.7194C13.9765 19.374 13.9896 19.0316 14.0154 18.6927L14.0486 18.6994C15.0837 18.9062 16.1223 19.0886 17.1637 19.2467ZM33.3284 11.4538C31.6493 10.2396 29.5855 9.52381 27.3546 9.52381C25.1195 9.52381 23.0524 10.2421 21.3717 11.4603C20.0078 11.3232 18.6475 11.1387 17.2933 10.907C19.7453 8.11308 23.3438 6.34921 27.3546 6.34921C31.36 6.34921 34.9543 8.10844 37.4061 10.896C36.0521 11.1292 34.692 11.3152 33.3284 11.4538ZM43.826 18.0518C43.881 18.6003 43.9091 19.1566 43.9091 19.7194C43.9091 28.8568 36.4973 36.2642 27.3546 36.2642C18.2117 36.2642 10.8 28.8568 10.8 19.7194C10.8 19.1615 10.8276 18.61 10.8816 18.0663L7.75383 17.4411C7.66775 18.1886 7.62354 18.9488 7.62354 19.7194C7.62354 30.6102 16.4574 39.4388 27.3546 39.4388C38.2517 39.4388 47.0855 30.6102 47.0855 19.7194C47.0855 18.9439 47.0407 18.1789 46.9536 17.4267L43.826 18.0518ZM44.2613 9.54743L40.9084 10.2176C37.9134 5.95821 32.9593 3.1746 27.3546 3.1746C21.7442 3.1746 16.7856 5.96385 13.7915 10.2305L10.4399 9.56057C13.892 3.83178 20.1756 0 27.3546 0C34.5281 0 40.8075 3.82591 44.2613 9.54743Z","fill","var(--primary-color)"],["id","mask0_1413_1551","maskUnits","userSpaceOnUse","x","0","y","8","width","54","height","11",2,"mask-type","alpha"],["d","M27 18.3652C10.5114 19.1944 0 8.88892 0 8.88892C0 8.88892 16.5176 14.5866 27 14.5866C37.4824 14.5866 54 8.88892 54 8.88892C54 8.88892 43.4886 17.5361 27 18.3652Z","fill","var(--primary-color)"],["mask","url(#mask0_1413_1551)"],["d","M-4.673e-05 8.88887L3.73084 -1.91434L-8.00806 17.0473L-4.673e-05 8.88887ZM27 18.3652L26.4253 6.95109L27 18.3652ZM54 8.88887L61.2673 17.7127L50.2691 -1.91434L54 8.88887ZM-4.673e-05 8.88887C-8.00806 17.0473 -8.00469 17.0505 -8.00132 17.0538C-8.00018 17.055 -7.99675 17.0583 -7.9944 17.0607C-7.98963 17.0653 -7.98474 17.0701 -7.97966 17.075C-7.96949 17.0849 -7.95863 17.0955 -7.94707 17.1066C-7.92401 17.129 -7.89809 17.1539 -7.86944 17.1812C-7.8122 17.236 -7.74377 17.3005 -7.66436 17.3743C-7.50567 17.5218 -7.30269 17.7063 -7.05645 17.9221C-6.56467 18.3532 -5.89662 18.9125 -5.06089 19.5534C-3.39603 20.83 -1.02575 22.4605 1.98012 24.0457C7.97874 27.2091 16.7723 30.3226 27.5746 29.7793L26.4253 6.95109C20.7391 7.23699 16.0326 5.61231 12.6534 3.83024C10.9703 2.94267 9.68222 2.04866 8.86091 1.41888C8.45356 1.10653 8.17155 0.867278 8.0241 0.738027C7.95072 0.673671 7.91178 0.637576 7.90841 0.634492C7.90682 0.63298 7.91419 0.639805 7.93071 0.65557C7.93897 0.663455 7.94952 0.673589 7.96235 0.686039C7.96883 0.692262 7.97582 0.699075 7.98338 0.706471C7.98719 0.710167 7.99113 0.714014 7.99526 0.718014C7.99729 0.720008 8.00047 0.723119 8.00148 0.724116C8.00466 0.727265 8.00796 0.730446 -4.673e-05 8.88887ZM27.5746 29.7793C37.6904 29.2706 45.9416 26.3684 51.6602 23.6054C54.5296 22.2191 56.8064 20.8465 58.4186 19.7784C59.2265 19.2431 59.873 18.7805 60.3494 18.4257C60.5878 18.2482 60.7841 18.0971 60.9374 17.977C61.014 17.9169 61.0799 17.8645 61.1349 17.8203C61.1624 17.7981 61.1872 17.7781 61.2093 17.7602C61.2203 17.7512 61.2307 17.7427 61.2403 17.7348C61.2452 17.7308 61.2499 17.727 61.2544 17.7233C61.2566 17.7215 61.2598 17.7188 61.261 17.7179C61.2642 17.7153 61.2673 17.7127 54 8.88887C46.7326 0.0650536 46.7357 0.0625219 46.7387 0.0600241C46.7397 0.0592345 46.7427 0.0567658 46.7446 0.0551857C46.7485 0.0520238 46.7521 0.0489887 46.7557 0.0460799C46.7628 0.0402623 46.7694 0.0349487 46.7753 0.0301318C46.7871 0.0204986 46.7966 0.0128495 46.8037 0.00712562C46.818 -0.00431848 46.8228 -0.00808311 46.8184 -0.00463784C46.8096 0.00228345 46.764 0.0378652 46.6828 0.0983779C46.5199 0.219675 46.2165 0.439161 45.7812 0.727519C44.9072 1.30663 43.5257 2.14765 41.7061 3.02677C38.0469 4.79468 32.7981 6.63058 26.4253 6.95109L27.5746 29.7793ZM54 8.88887C50.2691 -1.91433 50.27 -1.91467 50.271 -1.91498C50.2712 -1.91506 50.272 -1.91535 50.2724 -1.9155C50.2733 -1.91581 50.274 -1.91602 50.2743 -1.91616C50.2752 -1.91643 50.275 -1.91636 50.2738 -1.91595C50.2714 -1.91515 50.2652 -1.91302 50.2552 -1.9096C50.2351 -1.90276 50.1999 -1.89078 50.1503 -1.874C50.0509 -1.84043 49.8938 -1.78773 49.6844 -1.71863C49.2652 -1.58031 48.6387 -1.377 47.8481 -1.13035C46.2609 -0.635237 44.0427 0.0249875 41.5325 0.6823C36.215 2.07471 30.6736 3.15796 27 3.15796V26.0151C33.8087 26.0151 41.7672 24.2495 47.3292 22.7931C50.2586 22.026 52.825 21.2618 54.6625 20.6886C55.5842 20.4011 56.33 20.1593 56.8551 19.986C57.1178 19.8993 57.3258 19.8296 57.4735 19.7797C57.5474 19.7548 57.6062 19.7348 57.6493 19.72C57.6709 19.7127 57.6885 19.7066 57.7021 19.7019C57.7089 19.6996 57.7147 19.6976 57.7195 19.696C57.7219 19.6952 57.7241 19.6944 57.726 19.6938C57.7269 19.6934 57.7281 19.693 57.7286 19.6929C57.7298 19.6924 57.7309 19.692 54 8.88887ZM27 3.15796C23.3263 3.15796 17.7849 2.07471 12.4674 0.6823C9.95717 0.0249875 7.73904 -0.635237 6.15184 -1.13035C5.36118 -1.377 4.73467 -1.58031 4.3155 -1.71863C4.10609 -1.78773 3.94899 -1.84043 3.84961 -1.874C3.79994 -1.89078 3.76474 -1.90276 3.74471 -1.9096C3.73469 -1.91302 3.72848 -1.91515 3.72613 -1.91595C3.72496 -1.91636 3.72476 -1.91643 3.72554 -1.91616C3.72593 -1.91602 3.72657 -1.91581 3.72745 -1.9155C3.72789 -1.91535 3.72874 -1.91506 3.72896 -1.91498C3.72987 -1.91467 3.73084 -1.91433 -4.673e-05 8.88887C-3.73093 19.692 -3.72983 19.6924 -3.72868 19.6929C-3.72821 19.693 -3.72698 19.6934 -3.72603 19.6938C-3.72415 19.6944 -3.72201 19.6952 -3.71961 19.696C-3.71482 19.6976 -3.70901 19.6996 -3.7022 19.7019C-3.68858 19.7066 -3.67095 19.7127 -3.6494 19.72C-3.60629 19.7348 -3.54745 19.7548 -3.47359 19.7797C-3.32589 19.8296 -3.11788 19.8993 -2.85516 19.986C-2.33008 20.1593 -1.58425 20.4011 -0.662589 20.6886C1.17485 21.2618 3.74125 22.026 6.67073 22.7931C12.2327 24.2495 20.1913 26.0151 27 26.0151V3.15796Z","fill","var(--primary-color)"],[1,"text-surface-900","dark:text-surface-0","font-medium","text-2xl","leading-normal","mr-20"],["pButton","","severity","secondary","pRipple","","pStyleClass","@next","enterFromClass","hidden","leaveToClass","hidden",1,"lg:hidden!",3,"text","rounded","hideOnOutsideClick"],[1,"pi","pi-bars","text-2xl!"],[1,"items-center","bg-surface-0","dark:bg-surface-900","grow","justify-between","hidden","lg:flex","absolute","lg:static","w-full","left-0","top-full","px-12","lg:px-0","z-20","rounded-border"],[1,"list-none","p-0","m-0","flex","lg:items-center","select-none","flex-col","lg:flex-row","cursor-pointer","gap-8"],["pRipple","",1,"px-0","py-4","text-surface-900","dark:text-surface-0","font-medium","text-xl",3,"click"],[1,"flex","border-t","lg:border-t-0","border-surface","py-4","lg:py-0","mt-4","lg:mt-0","gap-2"],["pButton","","pRipple","","label","Login","routerLink","/auth/login",3,"rounded","text"],["pButton","","pRipple","","label","Register","routerLink","/auth/login",3,"rounded"],[3,"float"]],template:function(t,r){t&1&&(y(0,"a",0),Jt(),y(1,"svg",1),D(2,"path",2),y(3,"mask",3),D(4,"path",4),b(),y(5,"g",5),D(6,"path",6),b()(),Zt(),y(7,"span",7),E(8,"SAKAI"),b()(),y(9,"a",8),D(10,"i",9),b(),y(11,"div",10)(12,"ul",11)(13,"li")(14,"a",12),nt("click",function(){return r.router.navigate(["/landing"],{fragment:"home"})}),y(15,"span"),E(16,"Home"),b()()(),y(17,"li")(18,"a",12),nt("click",function(){return r.router.navigate(["/landing"],{fragment:"features"})}),y(19,"span"),E(20,"Features"),b()()(),y(21,"li")(22,"a",12),nt("click",function(){return r.router.navigate(["/landing"],{fragment:"highlights"})}),y(23,"span"),E(24,"Highlights"),b()()(),y(25,"li")(26,"a",12),nt("click",function(){return r.router.navigate(["/landing"],{fragment:"pricing"})}),y(27,"span"),E(28,"Pricing"),b()()()(),y(29,"div",13),D(30,"button",14)(31,"button",15)(32,"app-floating-configurator",16),b()()),t&2&&(x(9),W("text",!0)("rounded",!0)("hideOnOutsideClick",!0),x(21),W("rounded",!0)("text",!0),x(),W("rounded",!0),x(),W("float",!1))},dependencies:[be,rn,Xn,vs,ht,Jn,dt,sn,Is],encapsulation:2})};var sa=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["hero-widget"]],decls:11,vars:1,consts:[["id","hero",1,"flex","flex-col","pt-6","px-6","lg:px-20","overflow-hidden",2,"background","linear-gradient(0deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2)), radial-gradient(77.36% 256.97% at 77.36% 57.52%, rgb(238, 239, 175) 0%, rgb(195, 227, 250) 100%)","clip-path","ellipse(150% 87% at 93% 13%)"],[1,"mx-6","md:mx-20","mt-0","md:mt-6"],[1,"text-6xl","font-bold","text-gray-900","leading-tight","dark:!text-gray-700"],[1,"font-light","block"],[1,"font-normal","text-2xl","leading-normal","md:mt-4","text-gray-700","dark:text-gray-700"],["pButton","","pRipple","","type","button","label","Get Started",1,"text-xl!","mt-8","px-4!",3,"rounded"],[1,"flex","justify-center","md:justify-end"],["src","https://primefaces.org/cdn/templates/sakai/landing/screen-1.png","alt","Hero Image",1,"w-9/12","md:w-auto"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"h1",2)(3,"span",3),E(4,"Eu sem integer"),b(),E(5,"eget magna fermentum"),b(),y(6,"p",4),E(7,"Sed blandit libero volutpat sed cras. Fames ac turpis egestas integer. Placerat in egestas erat..."),b(),D(8,"button",5),b(),y(9,"div",6),D(10,"img",7),b()()),t&2&&(x(8),W("rounded",!0))},dependencies:[ht,Jn,dt,sn],encapsulation:2})};var oa=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["features-widget"]],decls:97,vars:0,consts:[["id","features",1,"py-6","px-6","lg:px-20","mt-8","mx-0","lg:mx-20"],[1,"grid","grid-cols-12","gap-4","justify-center"],[1,"col-span-12","text-center","mt-20","mb-6"],[1,"text-surface-900","dark:text-surface-0","font-normal","mb-2","text-4xl"],[1,"text-muted-color","text-2xl"],[1,"col-span-12","md:col-span-12","lg:col-span-4","p-0","lg:pr-8","lg:pb-8","mt-6","lg:mt-0"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(253, 228, 165, 0.2), rgba(187, 199, 205, 0.2)), linear-gradient(180deg, rgba(253, 228, 165, 0.2), rgba(187, 199, 205, 0.2))"],[1,"p-4","bg-surface-0","dark:bg-surface-900","h-full",2,"border-radius","8px"],[1,"flex","items-center","justify-center","bg-yellow-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-users","text-2xl!","text-yellow-700"],[1,"mb-2","text-surface-900","dark:text-surface-0"],[1,"text-surface-600","dark:text-surface-200"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(145, 226, 237, 0.2), rgba(251, 199, 145, 0.2)), linear-gradient(180deg, rgba(253, 228, 165, 0.2), rgba(172, 180, 223, 0.2))"],[1,"flex","items-center","justify-center","bg-cyan-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-palette","text-2xl!","text-cyan-700"],[1,"col-span-12","md:col-span-12","lg:col-span-4","p-0","lg:pb-8","mt-6","lg:mt-0"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(145, 226, 237, 0.2), rgba(172, 180, 223, 0.2)), linear-gradient(180deg, rgba(172, 180, 223, 0.2), rgba(246, 158, 188, 0.2))"],[1,"flex","items-center","justify-center","bg-indigo-200",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-map","text-2xl!","text-indigo-700"],[1,"mt-6","mb-1","text-surface-900","dark:text-surface-0","text-xl","font-semibold"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(187, 199, 205, 0.2), rgba(251, 199, 145, 0.2)), linear-gradient(180deg, rgba(253, 228, 165, 0.2), rgba(145, 210, 204, 0.2))"],[1,"flex","items-center","justify-center","bg-slate-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-id-card","text-2xl!","text-slate-700"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(187, 199, 205, 0.2), rgba(246, 158, 188, 0.2)), linear-gradient(180deg, rgba(145, 226, 237, 0.2), rgba(160, 210, 250, 0.2))"],[1,"flex","items-center","justify-center","bg-orange-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-star","text-2xl!","text-orange-700"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(251, 199, 145, 0.2), rgba(246, 158, 188, 0.2)), linear-gradient(180deg, rgba(172, 180, 223, 0.2), rgba(212, 162, 221, 0.2))"],[1,"flex","items-center","justify-center","bg-pink-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-moon","text-2xl!","text-pink-700"],[1,"col-span-12","md:col-span-12","lg:col-span-4","p-0","lg:pr-8","mt-6","lg:mt-0"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(145, 210, 204, 0.2), rgba(160, 210, 250, 0.2)), linear-gradient(180deg, rgba(187, 199, 205, 0.2), rgba(145, 210, 204, 0.2))"],[1,"flex","items-center","justify-center","bg-teal-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-shopping-cart","text-2xl!","text-teal-700"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(145, 210, 204, 0.2), rgba(212, 162, 221, 0.2)), linear-gradient(180deg, rgba(251, 199, 145, 0.2), rgba(160, 210, 250, 0.2))"],[1,"flex","items-center","justify-center","bg-blue-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-globe","text-2xl!","text-blue-700"],[1,"col-span-12","md:col-span-12","lg:col-span-4","p-0","lg-4","mt-6","lg:mt-0"],[2,"height","160px","padding","2px","border-radius","10px","background","linear-gradient(90deg, rgba(160, 210, 250, 0.2), rgba(212, 162, 221, 0.2)), linear-gradient(180deg, rgba(246, 158, 188, 0.2), rgba(212, 162, 221, 0.2))"],[1,"flex","items-center","justify-center","bg-purple-200","mb-4",2,"width","3.5rem","height","3.5rem","border-radius","10px"],[1,"pi","pi-fw","pi-eye","text-2xl!","text-purple-700"],[1,"col-span-12","mt-20","mb-20","p-2","md:p-20",2,"border-radius","20px","background","linear-gradient(0deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6)), radial-gradient(77.36% 256.97% at 77.36% 57.52%, #efe1af 0%, #c3dcfa 100%)"],[1,"flex","flex-col","justify-center","items-center","text-center","px-4","py-4","md:py-0"],[1,"text-gray-900","mb-2","text-3xl","font-semibold"],[1,"text-gray-600","text-2xl"],[1,"text-gray-900","sm:line-height-2","md:line-height-4","text-2xl","mt-6",2,"max-width","800px"],["src","https://primefaces.org/cdn/templates/sakai/landing/peak-logo.svg","alt","Company logo",1,"mt-6"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),E(4,"Marvelous Features"),U(),F(5,"span",4),E(6,"Placerat in egestas erat..."),U()(),F(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),pe(11,"i",9),U(),F(12,"h5",10),E(13,"Easy to Use"),U(),F(14,"span",11),E(15,"Posuere morbi leo urna molestie."),U()()()(),F(16,"div",5)(17,"div",12)(18,"div",7)(19,"div",13),pe(20,"i",14),U(),F(21,"h5",10),E(22,"Fresh Design"),U(),F(23,"span",11),E(24,"Semper risus in hendrerit."),U()()()(),F(25,"div",15)(26,"div",16)(27,"div",7)(28,"div",17),pe(29,"i",18),U(),F(30,"div",19),E(31,"Well Documented"),U(),F(32,"span",11),E(33,"Non arcu risus quis varius quam quisque."),U()()()(),F(34,"div",5)(35,"div",20)(36,"div",7)(37,"div",21),pe(38,"i",22),U(),F(39,"div",19),E(40,"Responsive Layout"),U(),F(41,"span",11),E(42,"Nulla malesuada pellentesque elit."),U()()()(),F(43,"div",5)(44,"div",23)(45,"div",7)(46,"div",24),pe(47,"i",25),U(),F(48,"div",19),E(49,"Clean Code"),U(),F(50,"span",11),E(51,"Condimentum lacinia quis vel eros."),U()()()(),F(52,"div",15)(53,"div",26)(54,"div",7)(55,"div",27),pe(56,"i",28),U(),F(57,"div",19),E(58,"Dark Mode"),U(),F(59,"span",11),E(60,"Convallis tellus id interdum velit laoreet."),U()()()(),F(61,"div",29)(62,"div",30)(63,"div",7)(64,"div",31),pe(65,"i",32),U(),F(66,"div",19),E(67,"Ready to Use"),U(),F(68,"span",11),E(69,"Mauris sit amet massa vitae."),U()()()(),F(70,"div",29)(71,"div",33)(72,"div",7)(73,"div",34),pe(74,"i",35),U(),F(75,"div",19),E(76,"Modern Practices"),U(),F(77,"span",11),E(78,"Elementum nibh tellus molestie nunc non."),U()()()(),F(79,"div",36)(80,"div",37)(81,"div",7)(82,"div",38),pe(83,"i",39),U(),F(84,"div",19),E(85,"Privacy"),U(),F(86,"span",11),E(87,"Neque egestas congue quisque."),U()()()(),F(88,"div",40)(89,"div",41)(90,"div",42),E(91,"Jos\xE9phine Miller"),U(),F(92,"span",43),E(93,"Peak Interactive"),U(),F(94,"p",44),E(95," \u201CDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\u201D "),U(),pe(96,"img",45),U()()()())},dependencies:[Ze],encapsulation:2})};var aa=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["highlights-widget"]],decls:26,vars:0,consts:[["id","highlights",1,"py-6","px-6","lg:px-20","mx-0","my-12","lg:mx-20"],[1,"text-center"],[1,"text-surface-900","dark:text-surface-0","font-normal","mb-2","text-4xl"],[1,"text-muted-color","text-2xl"],[1,"grid","grid-cols-12","gap-4","mt-20","pb-2","md:pb-20"],[1,"flex","justify-center","col-span-12","lg:col-span-6","bg-purple-100","p-0","order-1","lg:order-0",2,"border-radius","8px"],["src","https://primefaces.org/cdn/templates/sakai/landing/mockup.png","alt","mockup mobile",1,"w-11/12"],[1,"col-span-12","lg:col-span-6","my-auto","flex","flex-col","lg:items-end","text-center","lg:text-right","gap-4"],[1,"flex","items-center","justify-center","bg-purple-200","self-center","lg:self-end",2,"width","4.2rem","height","4.2rem","border-radius","10px"],[1,"pi","pi-fw","pi-mobile","text-4xl!","text-purple-700"],[1,"leading-none","text-surface-900","dark:text-surface-0","text-3xl","font-normal"],[1,"text-surface-700","dark:text-surface-100","text-2xl","leading-normal","ml-0","md:ml-2",2,"max-width","650px"],[1,"grid","grid-cols-12","gap-4","my-20","pt-2","md:pt-20"],[1,"col-span-12","lg:col-span-6","my-auto","flex","flex-col","text-center","lg:text-left","lg:items-start","gap-4"],[1,"flex","items-center","justify-center","bg-yellow-200","self-center","lg:self-start",2,"width","4.2rem","height","4.2rem","border-radius","10px"],[1,"pi","pi-fw","pi-desktop","text-3xl!","text-yellow-700"],[1,"text-surface-700","dark:text-surface-100","text-2xl","leading-normal","mr-0","md:mr-2",2,"max-width","650px"],[1,"flex","justify-end","order-1","sm:order-2","col-span-12","lg:col-span-6","bg-yellow-100","p-0",2,"border-radius","8px"],["src","https://primefaces.org/cdn/templates/sakai/landing/mockup-desktop.png","alt","mockup",1,"w-11/12"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"div",1)(2,"div",2),E(3,"Powerful Everywhere"),U(),F(4,"span",3),E(5,"Amet consectetur adipiscing elit..."),U()(),F(6,"div",4)(7,"div",5),pe(8,"img",6),U(),F(9,"div",7)(10,"div",8),pe(11,"i",9),U(),F(12,"div",10),E(13,"Congue Quisque Egestas"),U(),F(14,"span",11),E(15,"Lectus arcu bibendum at varius vel pharetra vel turpis nunc. Eget aliquet nibh praesent tristique magna sit amet purus gravida. Sit amet mattis vulputate enim nulla aliquet."),U()()(),F(16,"div",12)(17,"div",13)(18,"div",14),pe(19,"i",15),U(),F(20,"div",10),E(21,"Celerisque Eu Ultrices"),U(),F(22,"span",16),E(23,"Adipiscing commodo elit at imperdiet dui. Viverra nibh cras pulvinar mattis nunc sed blandit libero. Suspendisse in est ante in. Mauris pharetra et ultrices neque ornare aenean euismod elementum nisi."),U()(),F(24,"div",17),pe(25,"img",18),U()()())},encapsulation:2})};var ca=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["pricing-widget"]],decls:97,vars:0,consts:[["id","pricing",1,"py-6","px-6","lg:px-20","my-2","md:my-6"],[1,"text-center","mb-6"],[1,"text-surface-900","dark:text-surface-0","font-normal","mb-2","text-4xl"],[1,"text-muted-color","text-2xl"],[1,"grid","grid-cols-12","gap-4","justify-between","mt-20","md:mt-0"],[1,"col-span-12","lg:col-span-4","p-0","md:p-4"],[1,"p-4","flex","flex-col","border-surface-200","dark:border-surface-600","pricing-card","cursor-pointer","border-2","hover:border-primary","duration-300","transition-all",2,"border-radius","10px"],[1,"text-surface-900","dark:text-surface-0","text-center","my-8","text-3xl"],["src","https://primefaces.org/cdn/templates/sakai/landing/free.svg","alt","free",1,"w-10/12","mx-auto"],[1,"my-8","flex","flex-col","items-center","gap-4"],[1,"flex","items-center"],[1,"text-5xl","font-bold","mr-2","text-surface-900","dark:text-surface-0"],[1,"text-surface-600","dark:text-surface-200"],["pButton","","pRipple","","label","Get Started",1,"p-button-rounded","border-0","ml-4","font-light","leading-tight","bg-blue-500","text-white"],[1,"w-full","bg-surface-200"],[1,"my-8","list-none","p-0","flex","text-surface-900","dark:text-surface-0","flex-col","px-8"],[1,"py-2"],[1,"pi","pi-fw","pi-check","text-xl","text-cyan-500","mr-2"],[1,"text-xl","leading-normal"],[1,"col-span-12","lg:col-span-4","p-0","md:p-4","mt-6","md:mt-0"],["src","https://primefaces.org/cdn/templates/sakai/landing/startup.svg","alt","startup",1,"w-10/12","mx-auto"],["src","https://primefaces.org/cdn/templates/sakai/landing/enterprise.svg","alt","enterprise",1,"w-10/12","mx-auto"],["pButton","","pRipple","","label","Try Free",1,"p-button-rounded","border-0","ml-4","font-light","leading-tight","bg-blue-500","text-white"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),E(3,"Matchless Pricing"),b(),y(4,"span",3),E(5,"Amet consectetur adipiscing elit..."),b()(),y(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),E(10,"Free"),b(),D(11,"img",8),y(12,"div",9)(13,"div",10)(14,"span",11),E(15,"$0"),b(),y(16,"span",12),E(17,"per month"),b()(),D(18,"button",13),b(),D(19,"p-divider",14),y(20,"ul",15)(21,"li",16),D(22,"i",17),y(23,"span",18),E(24,"Responsive Layout"),b()(),y(25,"li",16),D(26,"i",17),y(27,"span",18),E(28,"Unlimited Push Messages"),b()(),y(29,"li",16),D(30,"i",17),y(31,"span",18),E(32,"50 Support Ticket"),b()(),y(33,"li",16),D(34,"i",17),y(35,"span",18),E(36,"Free Shipping"),b()()()()(),y(37,"div",19)(38,"div",6)(39,"div",7),E(40,"Startup"),b(),D(41,"img",20),y(42,"div",9)(43,"div",10)(44,"span",11),E(45,"$1"),b(),y(46,"span",12),E(47,"per month"),b()(),D(48,"button",13),b(),D(49,"p-divider",14),y(50,"ul",15)(51,"li",16),D(52,"i",17),y(53,"span",18),E(54,"Responsive Layout"),b()(),y(55,"li",16),D(56,"i",17),y(57,"span",18),E(58,"Unlimited Push Messages"),b()(),y(59,"li",16),D(60,"i",17),y(61,"span",18),E(62,"50 Support Ticket"),b()(),y(63,"li",16),D(64,"i",17),y(65,"span",18),E(66,"Free Shipping"),b()()()()(),y(67,"div",19)(68,"div",6)(69,"div",7),E(70,"Enterprise"),b(),D(71,"img",21),y(72,"div",9)(73,"div",10)(74,"span",11),E(75,"$5"),b(),y(76,"span",12),E(77,"per month"),b()(),D(78,"button",22),b(),D(79,"p-divider",14),y(80,"ul",15)(81,"li",16),D(82,"i",17),y(83,"span",18),E(84,"Responsive Layout"),b()(),y(85,"li",16),D(86,"i",17),y(87,"span",18),E(88,"Unlimited Push Messages"),b()(),y(89,"li",16),D(90,"i",17),y(91,"span",18),E(92,"50 Support Ticket"),b()(),y(93,"li",16),D(94,"i",17),y(95,"span",18),E(96,"Free Shipping"),b()()()()()()())},dependencies:[Es,ff,ht,Jn,dt,sn],encapsulation:2})};var ua=class n{constructor(e){this.router=e}static \u0275fac=function(t){return new(t||n)($e(nn))};static \u0275cmp=ee({type:n,selectors:[["footer-widget"]],decls:57,vars:0,consts:[[1,"py-12","px-12","mx-0","mt-20","lg:mx-20"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","md:col-span-2"],[1,"flex","flex-wrap","items-center","justify-center","md:justify-start","md:mb-0","mb-6","cursor-pointer",3,"click"],["viewBox","0 0 54 40","fill","none","xmlns","http://www.w3.org/2000/svg",1,"h-14","mr-2"],["fill-rule","evenodd","clip-rule","evenodd","d","M17.1637 19.2467C17.1566 19.4033 17.1529 19.561 17.1529 19.7194C17.1529 25.3503 21.7203 29.915 27.3546 29.915C32.9887 29.915 37.5561 25.3503 37.5561 19.7194C37.5561 19.5572 37.5524 19.3959 37.5449 19.2355C38.5617 19.0801 39.5759 18.9013 40.5867 18.6994L40.6926 18.6782C40.7191 19.0218 40.7326 19.369 40.7326 19.7194C40.7326 27.1036 34.743 33.0896 27.3546 33.0896C19.966 33.0896 13.9765 27.1036 13.9765 19.7194C13.9765 19.374 13.9896 19.0316 14.0154 18.6927L14.0486 18.6994C15.0837 18.9062 16.1223 19.0886 17.1637 19.2467ZM33.3284 11.4538C31.6493 10.2396 29.5855 9.52381 27.3546 9.52381C25.1195 9.52381 23.0524 10.2421 21.3717 11.4603C20.0078 11.3232 18.6475 11.1387 17.2933 10.907C19.7453 8.11308 23.3438 6.34921 27.3546 6.34921C31.36 6.34921 34.9543 8.10844 37.4061 10.896C36.0521 11.1292 34.692 11.3152 33.3284 11.4538ZM43.826 18.0518C43.881 18.6003 43.9091 19.1566 43.9091 19.7194C43.9091 28.8568 36.4973 36.2642 27.3546 36.2642C18.2117 36.2642 10.8 28.8568 10.8 19.7194C10.8 19.1615 10.8276 18.61 10.8816 18.0663L7.75383 17.4411C7.66775 18.1886 7.62354 18.9488 7.62354 19.7194C7.62354 30.6102 16.4574 39.4388 27.3546 39.4388C38.2517 39.4388 47.0855 30.6102 47.0855 19.7194C47.0855 18.9439 47.0407 18.1789 46.9536 17.4267L43.826 18.0518ZM44.2613 9.54743L40.9084 10.2176C37.9134 5.95821 32.9593 3.1746 27.3546 3.1746C21.7442 3.1746 16.7856 5.96385 13.7915 10.2305L10.4399 9.56057C13.892 3.83178 20.1756 0 27.3546 0C34.5281 0 40.8075 3.82591 44.2613 9.54743Z","fill","var(--primary-color)"],["id","mask0_1413_1551","maskUnits","userSpaceOnUse","x","0","y","8","width","54","height","11",2,"mask-type","alpha"],["d","M27 18.3652C10.5114 19.1944 0 8.88892 0 8.88892C0 8.88892 16.5176 14.5866 27 14.5866C37.4824 14.5866 54 8.88892 54 8.88892C54 8.88892 43.4886 17.5361 27 18.3652Z","fill","var(--primary-color)"],["mask","url(#mask0_1413_1551)"],["d","M-4.673e-05 8.88887L3.73084 -1.91434L-8.00806 17.0473L-4.673e-05 8.88887ZM27 18.3652L26.4253 6.95109L27 18.3652ZM54 8.88887L61.2673 17.7127L50.2691 -1.91434L54 8.88887ZM-4.673e-05 8.88887C-8.00806 17.0473 -8.00469 17.0505 -8.00132 17.0538C-8.00018 17.055 -7.99675 17.0583 -7.9944 17.0607C-7.98963 17.0653 -7.98474 17.0701 -7.97966 17.075C-7.96949 17.0849 -7.95863 17.0955 -7.94707 17.1066C-7.92401 17.129 -7.89809 17.1539 -7.86944 17.1812C-7.8122 17.236 -7.74377 17.3005 -7.66436 17.3743C-7.50567 17.5218 -7.30269 17.7063 -7.05645 17.9221C-6.56467 18.3532 -5.89662 18.9125 -5.06089 19.5534C-3.39603 20.83 -1.02575 22.4605 1.98012 24.0457C7.97874 27.2091 16.7723 30.3226 27.5746 29.7793L26.4253 6.95109C20.7391 7.23699 16.0326 5.61231 12.6534 3.83024C10.9703 2.94267 9.68222 2.04866 8.86091 1.41888C8.45356 1.10653 8.17155 0.867278 8.0241 0.738027C7.95072 0.673671 7.91178 0.637576 7.90841 0.634492C7.90682 0.63298 7.91419 0.639805 7.93071 0.65557C7.93897 0.663455 7.94952 0.673589 7.96235 0.686039C7.96883 0.692262 7.97582 0.699075 7.98338 0.706471C7.98719 0.710167 7.99113 0.714014 7.99526 0.718014C7.99729 0.720008 8.00047 0.723119 8.00148 0.724116C8.00466 0.727265 8.00796 0.730446 -4.673e-05 8.88887ZM27.5746 29.7793C37.6904 29.2706 45.9416 26.3684 51.6602 23.6054C54.5296 22.2191 56.8064 20.8465 58.4186 19.7784C59.2265 19.2431 59.873 18.7805 60.3494 18.4257C60.5878 18.2482 60.7841 18.0971 60.9374 17.977C61.014 17.9169 61.0799 17.8645 61.1349 17.8203C61.1624 17.7981 61.1872 17.7781 61.2093 17.7602C61.2203 17.7512 61.2307 17.7427 61.2403 17.7348C61.2452 17.7308 61.2499 17.727 61.2544 17.7233C61.2566 17.7215 61.2598 17.7188 61.261 17.7179C61.2642 17.7153 61.2673 17.7127 54 8.88887C46.7326 0.0650536 46.7357 0.0625219 46.7387 0.0600241C46.7397 0.0592345 46.7427 0.0567658 46.7446 0.0551857C46.7485 0.0520238 46.7521 0.0489887 46.7557 0.0460799C46.7628 0.0402623 46.7694 0.0349487 46.7753 0.0301318C46.7871 0.0204986 46.7966 0.0128495 46.8037 0.00712562C46.818 -0.00431848 46.8228 -0.00808311 46.8184 -0.00463784C46.8096 0.00228345 46.764 0.0378652 46.6828 0.0983779C46.5199 0.219675 46.2165 0.439161 45.7812 0.727519C44.9072 1.30663 43.5257 2.14765 41.7061 3.02677C38.0469 4.79468 32.7981 6.63058 26.4253 6.95109L27.5746 29.7793ZM54 8.88887C50.2691 -1.91433 50.27 -1.91467 50.271 -1.91498C50.2712 -1.91506 50.272 -1.91535 50.2724 -1.9155C50.2733 -1.91581 50.274 -1.91602 50.2743 -1.91616C50.2752 -1.91643 50.275 -1.91636 50.2738 -1.91595C50.2714 -1.91515 50.2652 -1.91302 50.2552 -1.9096C50.2351 -1.90276 50.1999 -1.89078 50.1503 -1.874C50.0509 -1.84043 49.8938 -1.78773 49.6844 -1.71863C49.2652 -1.58031 48.6387 -1.377 47.8481 -1.13035C46.2609 -0.635237 44.0427 0.0249875 41.5325 0.6823C36.215 2.07471 30.6736 3.15796 27 3.15796V26.0151C33.8087 26.0151 41.7672 24.2495 47.3292 22.7931C50.2586 22.026 52.825 21.2618 54.6625 20.6886C55.5842 20.4011 56.33 20.1593 56.8551 19.986C57.1178 19.8993 57.3258 19.8296 57.4735 19.7797C57.5474 19.7548 57.6062 19.7348 57.6493 19.72C57.6709 19.7127 57.6885 19.7066 57.7021 19.7019C57.7089 19.6996 57.7147 19.6976 57.7195 19.696C57.7219 19.6952 57.7241 19.6944 57.726 19.6938C57.7269 19.6934 57.7281 19.693 57.7286 19.6929C57.7298 19.6924 57.7309 19.692 54 8.88887ZM27 3.15796C23.3263 3.15796 17.7849 2.07471 12.4674 0.6823C9.95717 0.0249875 7.73904 -0.635237 6.15184 -1.13035C5.36118 -1.377 4.73467 -1.58031 4.3155 -1.71863C4.10609 -1.78773 3.94899 -1.84043 3.84961 -1.874C3.79994 -1.89078 3.76474 -1.90276 3.74471 -1.9096C3.73469 -1.91302 3.72848 -1.91515 3.72613 -1.91595C3.72496 -1.91636 3.72476 -1.91643 3.72554 -1.91616C3.72593 -1.91602 3.72657 -1.91581 3.72745 -1.9155C3.72789 -1.91535 3.72874 -1.91506 3.72896 -1.91498C3.72987 -1.91467 3.73084 -1.91433 -4.673e-05 8.88887C-3.73093 19.692 -3.72983 19.6924 -3.72868 19.6929C-3.72821 19.693 -3.72698 19.6934 -3.72603 19.6938C-3.72415 19.6944 -3.72201 19.6952 -3.71961 19.696C-3.71482 19.6976 -3.70901 19.6996 -3.7022 19.7019C-3.68858 19.7066 -3.67095 19.7127 -3.6494 19.72C-3.60629 19.7348 -3.54745 19.7548 -3.47359 19.7797C-3.32589 19.8296 -3.11788 19.8993 -2.85516 19.986C-2.33008 20.1593 -1.58425 20.4011 -0.662589 20.6886C1.17485 21.2618 3.74125 22.026 6.67073 22.7931C12.2327 24.2495 20.1913 26.0151 27 26.0151V3.15796Z","fill","var(--primary-color)"],[1,"font-medium","text-3xl","text-surface-900","dark:text-surface-0"],[1,"col-span-12","md:col-span-10"],[1,"grid","grid-cols-12","gap-8","text-center","md:text-left"],[1,"col-span-12","md:col-span-3"],[1,"font-medium","text-2xl","leading-normal","mb-6","text-surface-900","dark:text-surface-0"],[1,"leading-normal","text-xl","block","cursor-pointer","mb-2","text-surface-700","dark:text-surface-100"],[1,"leading-normal","text-xl","block","cursor-pointer","text-surface-700","dark:text-surface-100"],[1,"leading-normal","text-xl","flex","items-center","cursor-pointer","mb-2","text-surface-700","dark:text-surface-100"],["src","https://primefaces.org/cdn/templates/sakai/landing/new-badge.svg","alt","badge",1,"ml-2"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),Vh("click",function(){return r.router.navigate(["/pages/landing"],{fragment:"home"})}),Jt(),F(4,"svg",4),pe(5,"path",5),F(6,"mask",6),pe(7,"path",7),U(),F(8,"g",8),pe(9,"path",9),U()(),Zt(),F(10,"h4",10),E(11,"SAKAI"),U()()(),F(12,"div",11)(13,"div",12)(14,"div",13)(15,"h4",14),E(16,"Company"),U(),F(17,"a",15),E(18,"About Us"),U(),F(19,"a",15),E(20,"News"),U(),F(21,"a",15),E(22,"Investor Relations"),U(),F(23,"a",15),E(24,"Careers"),U(),F(25,"a",16),E(26,"Media Kit"),U()(),F(27,"div",13)(28,"h4",14),E(29,"Resources"),U(),F(30,"a",15),E(31,"Get Started"),U(),F(32,"a",15),E(33,"Learn"),U(),F(34,"a",16),E(35,"Case Studies"),U()(),F(36,"div",13)(37,"h4",14),E(38,"Community"),U(),F(39,"a",15),E(40,"Discord"),U(),F(41,"a",17),E(42,"Events"),pe(43,"img",18),U(),F(44,"a",15),E(45,"FAQ"),U(),F(46,"a",16),E(47,"Blog"),U()(),F(48,"div",13)(49,"h4",14),E(50,"Legal"),U(),F(51,"a",15),E(52,"Brand Policy"),U(),F(53,"a",15),E(54,"Privacy Policy"),U(),F(55,"a",16),E(56,"Terms of Service"),U()()()()()())},dependencies:[be],encapsulation:2})};var la=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-landing"]],decls:8,vars:0,consts:[[1,"bg-surface-0","dark:bg-surface-900"],["id","home",1,"landing-wrapper","overflow-hidden"],[1,"py-6","px-6","mx-0","md:mx-12","lg:mx-20","lg:px-20","flex","items-center","justify-between","relative","lg:static"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),D(2,"topbar-widget",2)(3,"hero-widget")(4,"features-widget")(5,"highlights-widget")(6,"pricing-widget")(7,"footer-widget"),b()())},dependencies:[be,ia,sa,oa,aa,ca,ua,dt,Xn,ht,Es],encapsulation:2})};var da=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-notfound"]],decls:42,vars:0,consts:[[1,"flex","items-center","justify-center","min-h-screen","overflow-hidden"],[1,"flex","flex-col","items-center","justify-center"],["width","54","height","40","viewBox","0 0 54 40","fill","none","xmlns","http://www.w3.org/2000/svg",1,"mb-8","w-32","shrink-0"],["fill-rule","evenodd","clip-rule","evenodd","d","M17.1637 19.2467C17.1566 19.4033 17.1529 19.561 17.1529 19.7194C17.1529 25.3503 21.7203 29.915 27.3546 29.915C32.9887 29.915 37.5561 25.3503 37.5561 19.7194C37.5561 19.5572 37.5524 19.3959 37.5449 19.2355C38.5617 19.0801 39.5759 18.9013 40.5867 18.6994L40.6926 18.6782C40.7191 19.0218 40.7326 19.369 40.7326 19.7194C40.7326 27.1036 34.743 33.0896 27.3546 33.0896C19.966 33.0896 13.9765 27.1036 13.9765 19.7194C13.9765 19.374 13.9896 19.0316 14.0154 18.6927L14.0486 18.6994C15.0837 18.9062 16.1223 19.0886 17.1637 19.2467ZM33.3284 11.4538C31.6493 10.2396 29.5855 9.52381 27.3546 9.52381C25.1195 9.52381 23.0524 10.2421 21.3717 11.4603C20.0078 11.3232 18.6475 11.1387 17.2933 10.907C19.7453 8.11308 23.3438 6.34921 27.3546 6.34921C31.36 6.34921 34.9543 8.10844 37.4061 10.896C36.0521 11.1292 34.692 11.3152 33.3284 11.4538ZM43.826 18.0518C43.881 18.6003 43.9091 19.1566 43.9091 19.7194C43.9091 28.8568 36.4973 36.2642 27.3546 36.2642C18.2117 36.2642 10.8 28.8568 10.8 19.7194C10.8 19.1615 10.8276 18.61 10.8816 18.0663L7.75383 17.4411C7.66775 18.1886 7.62354 18.9488 7.62354 19.7194C7.62354 30.6102 16.4574 39.4388 27.3546 39.4388C38.2517 39.4388 47.0855 30.6102 47.0855 19.7194C47.0855 18.9439 47.0407 18.1789 46.9536 17.4267L43.826 18.0518ZM44.2613 9.54743L40.9084 10.2176C37.9134 5.95821 32.9593 3.1746 27.3546 3.1746C21.7442 3.1746 16.7856 5.96385 13.7915 10.2305L10.4399 9.56057C13.892 3.83178 20.1756 0 27.3546 0C34.5281 0 40.8075 3.82591 44.2613 9.54743Z","fill","var(--primary-color)"],["id","mask0_1413_1551","maskUnits","userSpaceOnUse","x","0","y","8","width","54","height","11",2,"mask-type","alpha"],["d","M27 18.3652C10.5114 19.1944 0 8.88892 0 8.88892C0 8.88892 16.5176 14.5866 27 14.5866C37.4824 14.5866 54 8.88892 54 8.88892C54 8.88892 43.4886 17.5361 27 18.3652Z","fill","var(--primary-color)"],["mask","url(#mask0_1413_1551)"],["d","M-4.673e-05 8.88887L3.73084 -1.91434L-8.00806 17.0473L-4.673e-05 8.88887ZM27 18.3652L26.4253 6.95109L27 18.3652ZM54 8.88887L61.2673 17.7127L50.2691 -1.91434L54 8.88887ZM-4.673e-05 8.88887C-8.00806 17.0473 -8.00469 17.0505 -8.00132 17.0538C-8.00018 17.055 -7.99675 17.0583 -7.9944 17.0607C-7.98963 17.0653 -7.98474 17.0701 -7.97966 17.075C-7.96949 17.0849 -7.95863 17.0955 -7.94707 17.1066C-7.92401 17.129 -7.89809 17.1539 -7.86944 17.1812C-7.8122 17.236 -7.74377 17.3005 -7.66436 17.3743C-7.50567 17.5218 -7.30269 17.7063 -7.05645 17.9221C-6.56467 18.3532 -5.89662 18.9125 -5.06089 19.5534C-3.39603 20.83 -1.02575 22.4605 1.98012 24.0457C7.97874 27.2091 16.7723 30.3226 27.5746 29.7793L26.4253 6.95109C20.7391 7.23699 16.0326 5.61231 12.6534 3.83024C10.9703 2.94267 9.68222 2.04866 8.86091 1.41888C8.45356 1.10653 8.17155 0.867278 8.0241 0.738027C7.95072 0.673671 7.91178 0.637576 7.90841 0.634492C7.90682 0.63298 7.91419 0.639805 7.93071 0.65557C7.93897 0.663455 7.94952 0.673589 7.96235 0.686039C7.96883 0.692262 7.97582 0.699075 7.98338 0.706471C7.98719 0.710167 7.99113 0.714014 7.99526 0.718014C7.99729 0.720008 8.00047 0.723119 8.00148 0.724116C8.00466 0.727265 8.00796 0.730446 -4.673e-05 8.88887ZM27.5746 29.7793C37.6904 29.2706 45.9416 26.3684 51.6602 23.6054C54.5296 22.2191 56.8064 20.8465 58.4186 19.7784C59.2265 19.2431 59.873 18.7805 60.3494 18.4257C60.5878 18.2482 60.7841 18.0971 60.9374 17.977C61.014 17.9169 61.0799 17.8645 61.1349 17.8203C61.1624 17.7981 61.1872 17.7781 61.2093 17.7602C61.2203 17.7512 61.2307 17.7427 61.2403 17.7348C61.2452 17.7308 61.2499 17.727 61.2544 17.7233C61.2566 17.7215 61.2598 17.7188 61.261 17.7179C61.2642 17.7153 61.2673 17.7127 54 8.88887C46.7326 0.0650536 46.7357 0.0625219 46.7387 0.0600241C46.7397 0.0592345 46.7427 0.0567658 46.7446 0.0551857C46.7485 0.0520238 46.7521 0.0489887 46.7557 0.0460799C46.7628 0.0402623 46.7694 0.0349487 46.7753 0.0301318C46.7871 0.0204986 46.7966 0.0128495 46.8037 0.00712562C46.818 -0.00431848 46.8228 -0.00808311 46.8184 -0.00463784C46.8096 0.00228345 46.764 0.0378652 46.6828 0.0983779C46.5199 0.219675 46.2165 0.439161 45.7812 0.727519C44.9072 1.30663 43.5257 2.14765 41.7061 3.02677C38.0469 4.79468 32.7981 6.63058 26.4253 6.95109L27.5746 29.7793ZM54 8.88887C50.2691 -1.91433 50.27 -1.91467 50.271 -1.91498C50.2712 -1.91506 50.272 -1.91535 50.2724 -1.9155C50.2733 -1.91581 50.274 -1.91602 50.2743 -1.91616C50.2752 -1.91643 50.275 -1.91636 50.2738 -1.91595C50.2714 -1.91515 50.2652 -1.91302 50.2552 -1.9096C50.2351 -1.90276 50.1999 -1.89078 50.1503 -1.874C50.0509 -1.84043 49.8938 -1.78773 49.6844 -1.71863C49.2652 -1.58031 48.6387 -1.377 47.8481 -1.13035C46.2609 -0.635237 44.0427 0.0249875 41.5325 0.6823C36.215 2.07471 30.6736 3.15796 27 3.15796V26.0151C33.8087 26.0151 41.7672 24.2495 47.3292 22.7931C50.2586 22.026 52.825 21.2618 54.6625 20.6886C55.5842 20.4011 56.33 20.1593 56.8551 19.986C57.1178 19.8993 57.3258 19.8296 57.4735 19.7797C57.5474 19.7548 57.6062 19.7348 57.6493 19.72C57.6709 19.7127 57.6885 19.7066 57.7021 19.7019C57.7089 19.6996 57.7147 19.6976 57.7195 19.696C57.7219 19.6952 57.7241 19.6944 57.726 19.6938C57.7269 19.6934 57.7281 19.693 57.7286 19.6929C57.7298 19.6924 57.7309 19.692 54 8.88887ZM27 3.15796C23.3263 3.15796 17.7849 2.07471 12.4674 0.6823C9.95717 0.0249875 7.73904 -0.635237 6.15184 -1.13035C5.36118 -1.377 4.73467 -1.58031 4.3155 -1.71863C4.10609 -1.78773 3.94899 -1.84043 3.84961 -1.874C3.79994 -1.89078 3.76474 -1.90276 3.74471 -1.9096C3.73469 -1.91302 3.72848 -1.91515 3.72613 -1.91595C3.72496 -1.91636 3.72476 -1.91643 3.72554 -1.91616C3.72593 -1.91602 3.72657 -1.91581 3.72745 -1.9155C3.72789 -1.91535 3.72874 -1.91506 3.72896 -1.91498C3.72987 -1.91467 3.73084 -1.91433 -4.673e-05 8.88887C-3.73093 19.692 -3.72983 19.6924 -3.72868 19.6929C-3.72821 19.693 -3.72698 19.6934 -3.72603 19.6938C-3.72415 19.6944 -3.72201 19.6952 -3.71961 19.696C-3.71482 19.6976 -3.70901 19.6996 -3.7022 19.7019C-3.68858 19.7066 -3.67095 19.7127 -3.6494 19.72C-3.60629 19.7348 -3.54745 19.7548 -3.47359 19.7797C-3.32589 19.8296 -3.11788 19.8993 -2.85516 19.986C-2.33008 20.1593 -1.58425 20.4011 -0.662589 20.6886C1.17485 21.2618 3.74125 22.026 6.67073 22.7931C12.2327 24.2495 20.1913 26.0151 27 26.0151V3.15796Z","fill","var(--primary-color)"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, color-mix(in srgb, var(--primary-color), transparent 60%) 10%, var(--surface-ground) 30%)"],[1,"w-full","bg-surface-0","dark:bg-surface-900","py-20","px-8","sm:px-20","flex","flex-col","items-center",2,"border-radius","53px"],[1,"text-primary","font-bold","text-3xl"],[1,"text-surface-900","dark:text-surface-0","font-bold","text-3xl","lg:text-5xl","mb-2"],[1,"text-surface-600","dark:text-surface-200","mb-8"],["routerLink","/",1,"w-full","flex","items-center","py-8","border-surface-300","dark:border-surface-500","border-b"],[1,"flex","justify-center","items-center","border-2","border-primary","text-primary","rounded-border",2,"height","3.5rem","width","3.5rem"],[1,"pi","pi-fw","pi-table","text-2xl!"],[1,"ml-6","flex","flex-col"],[1,"text-surface-900","dark:text-surface-0","lg:text-xl","font-medium","mb-0","block"],[1,"text-surface-600","dark:text-surface-200","lg:text-xl"],[1,"pi","pi-fw","pi-question-circle","text-2xl!"],[1,"text-surface-900","dark:text-surface-0","lg:text-xl","font-medium","mb-0"],["routerLink","/",1,"w-full","flex","items-center","mb-8","py-8","border-surface-300","dark:border-surface-500","border-b"],[1,"pi","pi-fw","pi-unlock","text-2xl!"],["label","Go to Dashboard","routerLink","/"]],template:function(t,r){t&1&&(D(0,"app-floating-configurator"),y(1,"div",0)(2,"div",1),Jt(),y(3,"svg",2),D(4,"path",3),y(5,"mask",4),D(6,"path",5),b(),y(7,"g",6),D(8,"path",7),b()(),Zt(),y(9,"div",8)(10,"div",9)(11,"span",10),E(12,"404"),b(),y(13,"h1",11),E(14,"Not Found"),b(),y(15,"div",12),E(16,"Requested resource is not available."),b(),y(17,"a",13)(18,"span",14),D(19,"i",15),b(),y(20,"span",16)(21,"span",17),E(22,"Frequently Asked Questions"),b(),y(23,"span",18),E(24,"Ultricies mi quis hendrerit dolor."),b()()(),y(25,"a",13)(26,"span",14),D(27,"i",19),b(),y(28,"span",16)(29,"span",20),E(30,"Solution Center"),b(),y(31,"span",18),E(32,"Phasellus faucibus scelerisque eleifend."),b()()(),y(33,"a",21)(34,"span",14),D(35,"i",22),b(),y(36,"span",16)(37,"span",20),E(38,"Permission Manager"),b(),y(39,"span",18),E(40,"Accumsan in nisl nisi scelerisque"),b()()(),D(41,"p-button",23),b()()()())},dependencies:[be,rn,Is,ht,hf],encapsulation:2})};var u0=[{path:"",component:Ss,children:[{path:"",component:ra},{path:"uikit",loadChildren:()=>import("./chunk-OHPLF3N7.js")},{path:"documentation",component:df},{path:"pages",loadChildren:()=>import("./chunk-4T4ZHBOO.js")}]},{path:"landing",component:la},{path:"notfound",component:da},{path:"auth",loadChildren:()=>import("./chunk-GBTBOUQZ.js")},{path:"**",redirectTo:"/notfound"}];var m0="firebasestorage.googleapis.com",T2="storageBucket",b2=2*60*1e3,A2=10*60*1e3;var St=class n extends je{constructor(e,t,r=0){super(md(e),`Firebase Storage: ${t} (${md(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return md(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Gt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Gt||{});function md(n){return"storage/"+n}function S2(){let n="An unknown error occurred, please check the error payload for server response.";return new St(Gt.UNKNOWN,n)}function C2(){return new St(Gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function R2(){return new St(Gt.CANCELED,"User canceled the upload/download.")}function k2(n){return new St(Gt.INVALID_URL,"Invalid URL '"+n+"'.")}function P2(n){return new St(Gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function l0(n){return new St(Gt.INVALID_ARGUMENT,n)}function g0(){return new St(Gt.APP_DELETED,"The Firebase app was deleted.")}function x2(n){return new St(Gt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Wt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw P2(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}let a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),d={bucket:1,path:3};function h(Y){Y.path_=decodeURIComponent(Y.path)}let p="v[A-Za-z0-9_]+",I=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",P=new RegExp(`^https?://${I}/${p}/b/${i}/o${T}`,"i"),V={bucket:1,path:3},q=t===m0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",X=new RegExp(`^https?://${q}/${i}/${O}`,"i"),H=[{regex:u,indices:d,postModify:o},{regex:P,indices:V,postModify:h},{regex:X,indices:{bucket:1,path:2},postModify:h}];for(let Y=0;Y<H.length;Y++){let ye=H[Y],re=ye.regex.exec(e);if(re){let A=re[ye.indices.bucket],m=re[ye.indices.path];m||(m=""),r=new n(A,m),ye.postModify(r);break}}if(r==null)throw k2(e);return r}},gd=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function D2(n,e,t){let r=1,i=null,o=null,a=!1,u=0;function d(){return u===2}let h=!1;function p(...O){h||(h=!0,e.apply(null,O))}function I(O){i=setTimeout(()=>{i=null,n(P,d())},O)}function T(){o&&clearTimeout(o)}function P(O,...X){if(h){T();return}if(O){T(),p.call(null,O,...X);return}if(d()||a){T(),p.call(null,O,...X);return}r<64&&(r*=2);let H;u===1?(u=2,H=0):H=(r+Math.random())*1e3,I(H)}let V=!1;function q(O){V||(V=!0,T(),!h&&(i!==null?(O||(u=2),clearTimeout(i),I(0)):O||(u=1)))}return I(0),o=setTimeout(()=>{a=!0,q(!0)},t),q}function N2(n){n(!1)}function O2(n){return n!==void 0}function d0(n,e,t,r){if(r<e)throw l0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw l0(`Invalid value for '${n}'. Expected ${t} or less.`)}function L2(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var _d=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(_d||{});function M2(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var yd=class{constructor(e,t,r,i,o,a,u,d,h,p,I,T=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=I,this.retry=T,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,q)=>{this.resolve_=V,this.reject_=q,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Nr(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=u=>{let d=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let u=o.getErrorCode()===_d.NO_ERROR,d=o.getStatus();if(!u||M2(d,this.additionalRetryCodes_)&&this.retry){let p=o.getErrorCode()===_d.ABORT;r(!1,new Nr(!1,null,p));return}let h=this.successCodes_.indexOf(d)!==-1;r(!0,new Nr(h,o))})},t=(r,i)=>{let o=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{let d=this.callback_(u,u.getResponse());O2(d)?o(d):o()}catch(d){a(d)}else if(u!==null){let d=S2();d.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,d)):a(d)}else if(i.canceled){let d=this.appDelete_?g0():R2();a(d)}else{let d=C2();a(d)}};this.canceled_?t(!1,new Nr(!1,null,!0)):this.backoffId_=D2(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Nr=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function V2(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function F2(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function U2(n,e){e&&(n["X-Firebase-GMPID"]=e)}function B2(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function q2(n,e,t,r,i,o,a=!0,u=!1){let d=L2(n.urlParams),h=n.url+d,p=Object.assign({},n.headers);return U2(p,e),V2(p,t),F2(p,o),B2(p,r),new yd(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,u)}function $2(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function j2(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var a7=256*1024;var vd=class n{constructor(e,t){this._service=e,t instanceof Wt?this._location=t:this._location=Wt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Wt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j2(this._location.path)}get storage(){return this._service}get parent(){let e=$2(this._location.path);if(e===null)return null;let t=new Wt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw x2(e)}};function h0(n,e){let t=e?.[T2];return t==null?null:Wt.makeFromBucketSpec(t,n)}function z2(n,e,t,r={}){n.host=`${e}:${t}`;let i=ft(e);i&&(er(`https://${n.host}/b`),tr("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:xs(o,n.app.options.projectId))}var Ed=class{constructor(e,t,r,i,o,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=m0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=b2,this._maxUploadRetryTime=A2,this._requests=new Set,i!=null?this._bucket=Wt.makeFromBucketSpec(i,this._host):this._bucket=h0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wt.makeFromBucketSpec(this._url,e):this._bucket=h0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){if(Ge(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vd(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new gd(g0());{let a=q2(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},f0="@firebase/storage",p0="0.13.14";var _0="storage";function y0(n=Ot(),e){n=Ye(n);let r=cn(n,_0).getImmediate({identifier:e}),i=Ps("storage");return i&&v0(r,...i),r}function v0(n,e,t,r={}){z2(n,e,t,r)}function W2(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ed(t,r,i,e,_t)}function G2(){Xe(new xe(_0,W2,"PUBLIC").setMultipleInstances(!0)),ae(f0,p0,""),ae(f0,p0,"esm2017")}G2();var Hi=class{constructor(e){return e}},E0="storage",Id=class{constructor(){return un(E0)}};var wd=new ut("angularfire2.storage-instances");function H2(n,e){let t=xn(E0,n,e);return t&&new Hi(t)}function K2(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hi(r)}}var Q2={provide:Id,deps:[[new ke,wd]]},Y2={provide:Hi,useFactory:H2,deps:[[new ke,wd],st]};function I0(n,...e){return ae("angularfire",yt.full,"gcs"),lt([Y2,Q2,{provide:wd,useFactory:K2(n),multi:!0,deps:[We,Je,vt,Lt,[new ke,Mn],[new ke,dn],...e]}])}var w0=it(y0,!0);var X2={apiKey:"AIzaSyC97nQcE4r7sNeMGsR_72UovB7NpQ_j_Os",authDomain:"palserv-1323e.firebaseapp.com",projectId:"palserv-1323e",storageBucket:"palserv-1323e.firebasestorage.app",messagingSenderId:"59512201239",appId:"1:59512201239:web:7ccfbe0e282d503a55bc52",measurementId:"G-0KZVGKM106"},T0={providers:[tf(u0,nf({anchorScrolling:"enabled",scrollPositionRestoration:"enabled"}),rf()),Qh(Yh()),pf(),of({theme:{preset:sf,options:{darkModeSelector:".app-dark"}}}),Gf(()=>Hf(X2)),Gp(()=>Hp()),s0(()=>c0()),I0(()=>w0())]};var ha=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&D(0,"router-outlet")},dependencies:[be,ys],encapsulation:2})};Kh(ha,T0).catch(n=>console.error(n));
