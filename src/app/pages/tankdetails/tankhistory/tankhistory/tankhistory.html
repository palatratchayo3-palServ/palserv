<p>tankhistory works!</p>
xxxx

<div class="p-8 bg-white shadow-2xl rounded-xl mt-10">
    <h1 class="text-3xl font-extrabold text-teal-700 mb-6 border-b pb-2">Historical Water Quality Data</h1>

    <!-- Display Tank/Zone Info -->
    <div class="mb-6 flex justify-between items-center p-3 bg-teal-50 rounded-lg border-l-4 border-teal-500">
        <p class="font-medium text-teal-600">Viewing Tank:</p>
        <p class="text-xl font-bold font-mono text-teal-800">{{ zoneId }} / {{ tankId }}</p>
    </div>

    <!-- Chart Container (Using PrimeNG p-chart) -->
    @if (historicalData && historicalData.length > 0 && chartData && chartOptions) {
    <div class="relative w-full h-96">
        <!-- p-chart replaces the canvas element and binds to the component's data and options -->
        <p-chart type="line" [data]="chartData" [options]="chartOptions"></p-chart>
    </div>
    } @else {
    <div class="text-center p-6 bg-yellow-100 border border-yellow-400 text-yellow-700 rounded-lg">
        <p class="font-bold">No Historical Data Available</p>
        <p class="text-sm mt-2">Could not generate mock data for the requested tank.</p>
    </div>
    }

    <!-- Debug/Data Preview -->
    <div class="mt-8 pt-4 border-t">
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Mock Data Points (Last 24 Hours)</h3>
        <p class="text-sm text-gray-500 mb-4">Displaying {{ historicalData.length }} data points (one per hour).</p>

        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                        <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Temp (Â°C)</th>
                        <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">pH</th>
                        <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">DO</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    @for (doc of historicalData; track doc.id) {
                    <tr>
                        <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900">{{ doc.timestamp | date:'MMM d, HH:mm' }}</td>
                        <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900">{{ doc.temp_c | number:'1.1-1' }}</td>
                        <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900">{{ doc.ph | number:'1.2-2' }}</td>
                        <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900">{{ doc.do | number:'1.2-2' }}</td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
